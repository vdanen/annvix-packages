Index: xc/config/cf/FreeBSD.cf
diff -u xc/config/cf/FreeBSD.cf:3.112 xc/config/cf/FreeBSD.cf:3.112.2.1
--- xc/config/cf/FreeBSD.cf:3.112	Thu Jan  3 16:33:49 2002
+++ xc/config/cf/FreeBSD.cf	Wed Sep  4 02:38:08 2002
@@ -2,7 +2,7 @@
 XCOMM
 XCOMM
 XCOMM
-XCOMM platform:  $XFree86: xc/config/cf/FreeBSD.cf,v 3.112 2002/01/03 16:33:49 tsi Exp $
+XCOMM platform:  $XFree86: xc/config/cf/FreeBSD.cf,v 3.112.2.1 2002/09/04 02:38:08 dawes Exp $
 
 #ifndef UseElfFormat
 #define UseElfFormat		DefaultToElfFormat
@@ -59,6 +59,10 @@
 #define HasNCurses		YES
 #define HasVarRun		YES
 #define HasVarDb		YES
+
+#if (OSMajorVersion >= 3)
+#define HasIssetugid		YES
+#endif
 
 #if (OSMajorVersion > 1)
 #define InstallXloadSetGID	NO
Index: xc/config/cf/Imake.tmpl
diff -u xc/config/cf/Imake.tmpl:3.116 xc/config/cf/Imake.tmpl:3.116.2.1
--- xc/config/cf/Imake.tmpl:3.116	Tue Jan 15 21:22:33 2002
+++ xc/config/cf/Imake.tmpl	Wed Sep  4 02:38:08 2002
@@ -5,7 +5,7 @@
 XCOMM
 XCOMM
 XCOMM
-XCOMM $XFree86: xc/config/cf/Imake.tmpl,v 3.116 2002/01/15 21:22:33 keithp Exp $
+XCOMM $XFree86: xc/config/cf/Imake.tmpl,v 3.116.2.1 2002/09/04 02:38:08 dawes Exp $
 XCOMM ----------------------------------------------------------------------
 
 /*
@@ -370,6 +370,12 @@
 #endif
 #ifndef HasDlopen
 #define HasDlopen		NO	/* assume not */
+#endif
+#ifndef HasIssetugid
+#define HasIssetugid		NO	/* assume not */
+#endif
+#ifndef HasGetresuid
+#define HasGetresuid		NO	/* assume not */
 #endif
 #ifndef HasMkstemp
 #define HasMkstemp		NO	/* assume not */
Index: xc/config/cf/Imakefile
diff -u xc/config/cf/Imakefile:3.27 xc/config/cf/Imakefile:3.27.4.1
--- xc/config/cf/Imakefile:3.27	Mon Aug 27 17:40:55 2001
+++ xc/config/cf/Imakefile	Mon Sep  2 17:59:36 2002
@@ -1,5 +1,5 @@
 XCOMM $Xorg: Imakefile,v 1.3 2000/08/17 19:41:46 cpqbld Exp $
-XCOMM $XFree86: xc/config/cf/Imakefile,v 3.27 2001/08/27 17:40:55 dawes Exp $
+XCOMM $XFree86: xc/config/cf/Imakefile,v 3.27.4.1 2002/09/02 17:59:36 dawes Exp $
 
 XCOMM Some compilers generate fatal errors if an -L directory does
 XCOMM not exist.  Since BUILDLIBDIR may not exist yet suppress its use.
@@ -24,11 +24,12 @@
 RULEFILES = \
 Imake.rules \
 Motif.rules \
-cygwin.rules \
 Win32.rules \
 X11.rules \
 bsdLib.rules \
 cde.rules \
+cygwin.rules \
+darwinLib.rules \
 gnuLib.rules \
 hpLib.rules \
 ibmLib.rules \
@@ -57,11 +58,12 @@
 Server.tmpl \
 ServerLib.tmpl \
 Threads.tmpl \
-cygwin.tmpl \
 WinLib.tmpl \
 X11.tmpl \
 bsdLib.tmpl \
 cde.tmpl \
+cygwin.tmpl \
+darwinLib.tmpl \
 hpLib.tmpl \
 gnuLib.tmpl \
 ibmLib.tmpl \
Index: xc/config/cf/NetBSD.cf
diff -u xc/config/cf/NetBSD.cf:3.102 xc/config/cf/NetBSD.cf:3.102.2.1
--- xc/config/cf/NetBSD.cf:3.102	Thu Jan  3 16:33:49 2002
+++ xc/config/cf/NetBSD.cf	Wed Sep  4 02:38:08 2002
@@ -2,7 +2,7 @@
 
 
 
-XCOMM platform:  $XFree86: xc/config/cf/NetBSD.cf,v 3.102 2002/01/03 16:33:49 tsi Exp $
+XCOMM platform:  $XFree86: xc/config/cf/NetBSD.cf,v 3.102.2.1 2002/09/04 02:38:08 dawes Exp $
 
 
 #ifndef OSName
@@ -73,6 +73,12 @@
 # define HasMktemp		NO
 #else
 # define HasMktemp		YES
+#endif
+
+#ifndef HasIssetugid
+# if (OSMajorVersion > 1 || (OSMajorVersion == 1 && OSMinorVersion >= 5))
+#  define HasIssetugid          YES
+# endif
 #endif
 
 #define HasUsableFileMmap	YES
Index: xc/config/cf/OpenBSD.cf
diff -u xc/config/cf/OpenBSD.cf:3.66 xc/config/cf/OpenBSD.cf:3.66.2.1
--- xc/config/cf/OpenBSD.cf:3.66	Thu Jan  3 16:33:49 2002
+++ xc/config/cf/OpenBSD.cf	Wed Sep  4 02:38:08 2002
@@ -1,4 +1,4 @@
-XCOMM platform:  $XFree86: xc/config/cf/OpenBSD.cf,v 3.66 2002/01/03 16:33:49 tsi Exp $
+XCOMM platform:  $XFree86: xc/config/cf/OpenBSD.cf,v 3.66.2.1 2002/09/04 02:38:08 dawes Exp $
 XCOMM
 
 #ifndef OSName
@@ -71,6 +71,12 @@
 
 #ifndef HasLibPthread
 #define HasLibPthread		NO
+#endif
+
+#ifndef HasIssetugid
+# if (OSMajorVersion >= 2)
+#  define HasIssetugid		YES
+# endif
 #endif
 
 #ifndef HasMktemp
Index: xc/config/cf/X11.tmpl
diff -u xc/config/cf/X11.tmpl:1.141 xc/config/cf/X11.tmpl:1.141.2.1
--- xc/config/cf/X11.tmpl:1.141	Tue Jan 15 22:55:26 2002
+++ xc/config/cf/X11.tmpl	Wed Sep  4 02:38:08 2002
@@ -5,7 +5,7 @@
 XCOMM
 XCOMM
 XCOMM
-XCOMM $XFree86: xc/config/cf/X11.tmpl,v 1.141 2002/01/15 22:55:26 herrb Exp $
+XCOMM $XFree86: xc/config/cf/X11.tmpl,v 1.141.2.1 2002/09/04 02:38:08 dawes Exp $
 
 /***************************************************************************
  *                                                                         *
@@ -243,6 +243,15 @@
 #endif
 #ifndef BuildLoadableXlibI18n
 #define BuildLoadableXlibI18n	(HasDlopen && SharedLibX11)
+#endif
+/*
+ * This disables XLOCALEDIR.  Set it if you're using BuildLoadableXlibI18n,
+ * don't have either issetugid() or getresuid(), and you need to protect
+ * clients that are setgid or setuid to an id other than 0.
+ */
+#ifndef DisableXLocaleDirEnv
+#define DisableXLocaleDirEnv	BuildLoadableXlibI18n && \
+					!(HasIssetugid || HasGetresuid)
 #endif
 #ifndef BuildXextLib
 #define BuildXextLib		(BuildLibraries || (BuildLibrariesForXServers && XnestServer))
Index: xc/config/cf/cygwin.cf
diff -u xc/config/cf/cygwin.cf:3.34 xc/config/cf/cygwin.cf:3.34.2.2
--- xc/config/cf/cygwin.cf:3.34	Mon Dec 10 16:22:37 2001
+++ xc/config/cf/cygwin.cf	Tue Feb 19 08:43:33 2002
@@ -1,4 +1,4 @@
-XCOMM platform:  $XFree86: xc/config/cf/cygwin.cf,v 3.34 2001/12/10 16:22:37 alanh Exp $
+XCOMM platform:  $XFree86: xc/config/cf/cygwin.cf,v 3.34.2.2 2002/02/19 08:43:33 alanh Exp $
 
 #ifndef OSName
 #define OSName                  Cygwin
@@ -138,7 +138,7 @@
 #  define OptimizedCDebugFlags	DefaultGcc2i386Opt
 # endif
 
-#define StandardDefines         -D__i386__ -DWIN32_LEAN_AND_MEAN -DX_LOCALE -D_X86_ -D__STDC__ -DNO_TCP_H -D__CYGWIN__ -D_XOPEN_SOURCE -D_POSIX_C_SOURCE=199309L -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE
+#define StandardDefines         -D__i386__ -DWIN32_LEAN_AND_MEAN -DX_LOCALE -D_X86_ -D__STDC__ -DNO_TCP_H -D__CYGWIN__ -D_XOPEN_SOURCE -D_POSIX_C_SOURCE=199309L -D_BSD_SOURCE -D_SVID_SOURCE -D_GNU_SOURCE -DNO_ALLOCA
 
 #define XawI18nDefines          -DUSE_XWCHAR_STRING -DUSE_XMBTOWC
 #define HasWChar32              YES
@@ -308,10 +308,19 @@
 #endif
 
 /* Server build rules */
+#ifndef XnestServer
 #define XnestServer			YES
+#endif
+#ifndef BuildXprint
 #define BuildXprint			YES
+#endif
+#ifndef XprtServer
 #define XprtServer			YES
+#endif
+#ifndef XVirtualFramebufferServer
 #define XVirtualFramebufferServer	YES
+#endif
+
 #define XWinServer			YES
 
 /*
Index: xc/config/cf/darwin.cf
diff -u xc/config/cf/darwin.cf:1.21 xc/config/cf/darwin.cf:1.21.2.1
--- xc/config/cf/darwin.cf:1.21	Tue Jan 15 21:22:31 2002
+++ xc/config/cf/darwin.cf	Fri May  3 00:36:17 2002
@@ -1,4 +1,4 @@
-XCOMM platform:  $XFree86: xc/config/cf/darwin.cf,v 1.21 2002/01/15 21:22:31 keithp Exp $
+XCOMM platform:  $XFree86: xc/config/cf/darwin.cf,v 1.21.2.1 2002/05/03 00:36:17 torrey Exp $
 
 /* Darwin / Mac OS X configuration by John Carmack <johnc@idsoftware.com> */
 
@@ -61,8 +61,7 @@
 /* we don't need -lm */
 #define MathLibrary             /**/
 
-/* we don't have a termcap library */
-#define TermcapLibrary          /**/
+#define TermcapLibrary          -lcurses
 
 /* we don't have a dbm library */
 #define DBMLibrary              /**/
Index: xc/config/cf/darwinLib.rules
diff -u xc/config/cf/darwinLib.rules:1.4 xc/config/cf/darwinLib.rules:1.4.2.1
--- xc/config/cf/darwinLib.rules:1.4	Wed Jan 16 00:39:59 2002
+++ xc/config/cf/darwinLib.rules	Tue Jul 16 22:03:05 2002
@@ -1,4 +1,4 @@
-XCOMM $XFree86: xc/config/cf/darwinLib.rules,v 1.4 2002/01/16 00:39:59 keithp Exp $
+XCOMM $XFree86: xc/config/cf/darwinLib.rules,v 1.4.2.1 2002/07/16 22:03:05 torrey Exp $
 /*
  * Darwin/Mac OS X shared library rules
  */
@@ -57,14 +57,14 @@
  * the library gone for long periods.
  */
 #ifndef SharedLibraryTarget
-#ifdef UseInstalled
-#define LinkBuildSonameLibrary(lib) true
-#else
-#define LinkBuildSonameLibrary(lib) (RemoveFile($(BUILDLIBDIR)/lib); \
+# ifdef UseInstalled
+#  define LinkBuildSonameLibrary(lib) true
+# else
+#  define LinkBuildSonameLibrary(lib) (RemoveFile($(BUILDLIBDIR)/lib); \
 	cd $(BUILDLIBDIR); $(LN) $(BUILDINCTOP)/$(CURRENT_DIR)/lib .)
-#endif
+# endif
 
-#define SharedLibraryTarget(libname,rev,solist,down,up)			@@\
+# define SharedLibraryTarget(libname,rev,solist,down,up)		@@\
 AllTarget(Concat(lib,libname.rev.dylib))				@@\
 									@@\
 Concat(lib,libname.rev.dylib):  solist $(EXTRALIBRARYDEPS)		@@\
@@ -93,18 +93,18 @@
  * SharedDepLibraryTarget - generate rules to create a shared library.
  */
 #ifndef SharedDepLibraryTarget
-#ifdef UseInstalled
-#ifndef LinkBuildSonameLibrary
-#define LinkBuildSonameLibrary(lib) true
-#endif
-#else
-#ifndef LinkBuildSonameLibrary
-#define LinkBuildSonameLibrary(lib) (RemoveFile($(BUILDLIBDIR)/lib); \
+# ifdef UseInstalled
+#  ifndef LinkBuildSonameLibrary
+#   define LinkBuildSonameLibrary(lib) true
+#  endif
+# else
+#  ifndef LinkBuildSonameLibrary
+#   define LinkBuildSonameLibrary(lib) (RemoveFile($(BUILDLIBDIR)/lib); \
 	cd $(BUILDLIBDIR); $(LN) $(BUILDINCTOP)/$(CURRENT_DIR)/lib .)
-#endif
-#endif
+#  endif
+# endif
 
-#define SharedDepLibraryTarget(libname,rev,deplist,solist,down,up)	@@\
+# define SharedDepLibraryTarget(libname,rev,deplist,solist,down,up)	@@\
 AllTarget(Concat(lib,libname.rev.dylib))				@@\
 									@@\
 Concat(lib,libname.rev.dylib):  deplist $(EXTRALIBRARYDEPS)		@@\
@@ -128,6 +128,46 @@
 	$(RM) Concat(lib,libname.rev.dylib) Concat(lib,libname.dylib)
 
 #endif /* SharedDepLibraryTarget */
+
+/*
+ * SharedDepCplusplusLibraryTarget - generate rules to create a shared library.
+ */
+#ifndef SharedDepCplusplusLibraryTarget
+# ifdef UseInstalled
+#  ifndef LinkBuildSonameLibrary
+#   define LinkBuildSonameLibrary(lib) true
+#  endif
+# else
+#  ifndef LinkBuildSonameLibrary
+#   define LinkBuildSonameLibrary(lib) (RemoveFile($(BUILDLIBDIR)/lib); \
+	cd $(BUILDLIBDIR); $(LN) $(BUILDINCTOP)/$(CURRENT_DIR)/lib .)
+#  endif
+# endif
+
+# define SharedDepCplusplusLibraryTarget(libname,rev,deplist,solist,down,up)	@@\
+AllTarget(Concat(lib,libname.rev.dylib))				@@\
+									@@\
+Concat(lib,libname.rev.dylib):  deplist $(EXTRALIBRARYDEPS)		@@\
+	$(RM) $@~							@@\
+	@MAJREV=`expr rev : '\([^.]*\)'`; \				@@\
+	  INSTALLNAME=Concat(lib,libname.$$MAJREV.dylib); \		@@\
+	  set -x; (cd down; $(CXX) -o up/$@~ $(SHLIBLDFLAGS) -install_name $(USRLIBDIR)/$$INSTALLNAME -current_version rev -compatibility_version rev solist $(REQUIREDLIBS)); \ @@\
+	  $(RM) $$INSTALLNAME; $(LN) $@ $$INSTALLNAME; \		@@\
+	  LinkBuildSonameLibrary($$INSTALLNAME)				@@\
+	$(RM) $@							@@\
+	$(MV) $@~ $@							@@\
+	@if $(SOSYMLINK); then (set -x; \				@@\
+	  $(RM) Concat(lib,libname.dylib); \				@@\
+	  $(LN) $@ Concat(lib,libname.dylib)); fi			@@\
+	LinkBuildLibrary($@)						@@\
+	LinkBuildLibraryMaybe(Concat(lib,libname.dylib),$(SOSYMLINK))	@@\
+									@@\
+clean::									@@\
+	@MAJREV=`expr rev : '\([^.]*\)'`; \				@@\
+	set -x; $(RM) Concat(lib,libname.$$MAJREV.dylib)		@@\
+	$(RM) Concat(lib,libname.rev.dylib) Concat(lib,libname.dylib)
+
+#endif /* SharedDepCplusplusLibraryTarget */
 
 #ifndef SharedDepModuleTarget
 #define SharedDepModuleTarget(name,deps,solist)				@@\
Index: xc/config/cf/darwinLib.tmpl
diff -u xc/config/cf/darwinLib.tmpl:1.2 xc/config/cf/darwinLib.tmpl:1.2.4.1
--- xc/config/cf/darwinLib.tmpl:1.2	Thu Sep 13 01:28:57 2001
+++ xc/config/cf/darwinLib.tmpl	Sat Jun  1 00:11:17 2002
@@ -1,4 +1,4 @@
-XCOMM $XFree86: xc/config/cf/darwinLib.tmpl,v 1.2 2001/09/13 01:28:57 torrey Exp $
+XCOMM $XFree86: xc/config/cf/darwinLib.tmpl,v 1.2.4.1 2002/06/01 00:11:17 torrey Exp $
 /*
  * Darwin/Mac OS X shared library template
  */
@@ -33,7 +33,7 @@
 #define SharedXrandrReqs    $(LDPRELIB) $(XLIB)
 #define SharedXrenderReqs   $(LDPRELIB) $(EXTENSIONLIB) $(XLIB)
 #define SharedXssReqs       $(LDPRELIB) $(XLIB) $(EXTENSIONLIB) $(XTOOLLIB)
-#define SharedXtReqs        $(LDPRELIB) $(XLIBONLY) $(SMLIB) $(ICELIB)
+#define SharedXtReqs        $(LDPRELIB) $(XLIBONLY) $(SMLIB) $(ICELIB) -flat_namespace
 #define SharedXtstReqs      $(LDPRELIB) $(XLIB)
 #define SharedXvReqs        $(LDPRELIB) $(XLIB)
 #define SharedDPSReqs       $(LDPRELIB) $(SMLIB) $(ICELIB) $(XTOOLLIB) $(XLIB)
Index: xc/config/cf/linux.cf
diff -u xc/config/cf/linux.cf:3.175 xc/config/cf/linux.cf:3.175.2.1
--- xc/config/cf/linux.cf:3.175	Tue Jan 15 21:22:31 2002
+++ xc/config/cf/linux.cf	Wed Sep  4 02:38:08 2002
@@ -4,7 +4,7 @@
 
 
 
-XCOMM platform:  $XFree86: xc/config/cf/linux.cf,v 3.175 2002/01/15 21:22:31 keithp Exp $
+XCOMM platform:  $XFree86: xc/config/cf/linux.cf,v 3.175.2.1 2002/09/04 02:38:08 dawes Exp $
 
 #ifndef LinuxElfDefault
 # define LinuxElfDefault	YES
@@ -435,6 +435,9 @@
 #if UseElfFormat || defined(AlphaArchitecture)
 #define HasSnprintf		YES
 #define HasMkstemp		YES
+#endif
+#ifndef HasGetresuid
+#define HasGetresuid		YES
 #endif
 #if OSMajorVersion >= 2
 #define HasUsableFileMmap	YES
Index: xc/config/cf/sun.cf
diff -u xc/config/cf/sun.cf:3.61 xc/config/cf/sun.cf:3.61.2.1
--- xc/config/cf/sun.cf:3.61	Thu Jan  3 16:33:49 2002
+++ xc/config/cf/sun.cf	Wed Sep  4 02:38:08 2002
@@ -3,7 +3,7 @@
 
 
 
-XCOMM platform:  $XFree86: xc/config/cf/sun.cf,v 3.61 2002/01/03 16:33:49 tsi Exp $
+XCOMM platform:  $XFree86: xc/config/cf/sun.cf,v 3.61.2.1 2002/09/04 02:38:08 dawes Exp $
 
 #ifndef OSName
 # define OSName		DefaultOSName
@@ -296,6 +296,9 @@
 #define HasSecureRPC	  YES
 #define SetTtyGroup	  YES
 #define HasPutenv	  YES
+#if (OSMajorVersion > 5) || ((OSMajorVersion == 5) && (OSMinorVersion >= 9))
+# define HasIssetugid	  YES
+#endif
 #ifndef i386Architecture
 # ifndef Xsun24Server
 #  define Xsun24Server	  NO		/* color, mono, multiple depths */
Index: xc/doc/specs/Xaw/TextSource
diff -u xc/doc/specs/Xaw/TextSource:1.1.1.3 xc/doc/specs/Xaw/TextSource:1.1.1.3.6.1
--- xc/doc/specs/Xaw/TextSource:1.1.1.3	Tue Jan 16 22:02:55 2001
+++ xc/doc/specs/Xaw/TextSource	Thu Jul  4 17:07:09 2002
@@ -122,8 +122,9 @@
 Specifies the maximum number of characters the TextSrc should
 return to the application in \fItext_return\fP.
 .LP
-This function returns the actual number of characters read from the
-text buffer.  The function is not required to return \fIlength\fP
+This function returns the text position immediately after the
+characters read from the
+text buffer.  The function is not required to read \fIlength\fP
 characters if that many characters are in the file, it may break at
 any point that is convenient to the internal structure of the
 source.  It may take several calls to \fBRead\fP before the desired
Index: xc/extras/ogl-sample/main/gfx/lib/glu/libnurbs/nurbtess/quicksort.cc
diff -u xc/extras/ogl-sample/main/gfx/lib/glu/libnurbs/nurbtess/quicksort.cc:1.1.1.1 xc/extras/ogl-sample/main/gfx/lib/glu/libnurbs/nurbtess/quicksort.cc:1.1.1.1.6.1
--- xc/extras/ogl-sample/main/gfx/lib/glu/libnurbs/nurbtess/quicksort.cc:1.1.1.1	Mon Jan 15 21:48:59 2001
+++ xc/extras/ogl-sample/main/gfx/lib/glu/libnurbs/nurbtess/quicksort.cc	Wed Jan 23 19:16:59 2002
@@ -31,12 +31,15 @@
 ** published by SGI, but has not been independently verified as being
 ** compliant with the OpenGL(R) version 1.2.1 Specification.
 **
-** $Date$ $Revision$
+** Date Revision
 */
 /*
-** $Header: //depot/main/gfx/lib/glu/libnurbs/nurbtess/quicksort.cc#3 $
+** Header: //depot/main/gfx/lib/glu/libnurbs/nurbtess/quicksort.cc#3 
 */
 
+
+/* $XFree86: xc/extras/ogl-sample/main/gfx/lib/glu/libnurbs/nurbtess/quicksort.cc,v 1.1.1.1.6.1 2002/01/23 19:16:59 dawes Exp $ */
+
 #include <stdlib.h>
 #include <stdio.h>
 
@@ -58,7 +61,6 @@
 	       int (*comp) (void *, void *))
 {
   int i, last;
-  void swap(void *v[], int , int);
   if(left >= right) /*do nothing if array contains */
     return;         /*fewer than two elements*/
   
@@ -72,7 +74,7 @@
   quicksort(v, last+1, right, comp);
 }
 
-void swap(void *v[], int i, int j)
+static void swap(void *v[], int i, int j)
 {
   void *temp;
   temp = v[i];
Index: xc/lib/GL/mesa/src/drv/r128/r128_xmesa.c
diff -u xc/lib/GL/mesa/src/drv/r128/r128_xmesa.c:1.12 xc/lib/GL/mesa/src/drv/r128/r128_xmesa.c:1.12.4.1
--- xc/lib/GL/mesa/src/drv/r128/r128_xmesa.c:1.12	Mon Nov 26 21:46:35 2001
+++ xc/lib/GL/mesa/src/drv/r128/r128_xmesa.c	Sun Jan 27 19:18:39 2002
@@ -1,4 +1,4 @@
-/* $XFree86: xc/lib/GL/mesa/src/drv/r128/r128_xmesa.c,v 1.12 2001/11/26 21:46:35 dawes Exp $ */
+/* $XFree86: xc/lib/GL/mesa/src/drv/r128/r128_xmesa.c,v 1.12.4.1 2002/01/27 19:18:39 dawes Exp $ */
 /**************************************************************************
 
 Copyright 1999, 2000 ATI Technologies Inc. and Precision Insight, Inc.,
@@ -83,7 +83,7 @@
    if ( sPriv->drmMajor != 2 ||
 	sPriv->drmMinor < 2 ) {
       char msg[1000];
-      sprintf( msg, "R128 DRI driver expected DRM driver version 3.0 or greater but got version %d.%d.%d", sPriv->drmMajor, sPriv->drmMinor, sPriv->drmPatch );
+      sprintf( msg, "R128 DRI driver expected DRM driver version 2.2 or greater but got version %d.%d.%d", sPriv->drmMajor, sPriv->drmMinor, sPriv->drmPatch );
       __driMesaMessage( msg );
       return GL_FALSE;
    }
Index: xc/lib/GLU/libnurbs/internals/Imakefile
diff -u xc/lib/GLU/libnurbs/internals/Imakefile:1.6 xc/lib/GLU/libnurbs/internals/Imakefile:1.6.4.1
--- xc/lib/GLU/libnurbs/internals/Imakefile:1.6	Mon Jun 11 07:23:11 2001
+++ xc/lib/GLU/libnurbs/internals/Imakefile	Tue Jul 16 22:03:06 2002
@@ -1,4 +1,4 @@
-XCOMM $XFree86: xc/lib/GLU/libnurbs/internals/Imakefile,v 1.6 2001/06/11 07:23:11 torrey Exp $
+XCOMM $XFree86: xc/lib/GLU/libnurbs/internals/Imakefile,v 1.6.4.1 2002/07/16 22:03:06 torrey Exp $
 
 XCOMM License Applicability. Except to the extent portions of this file are
 XCOMM made subject to an alternative license as permitted in the SGI Free
@@ -143,8 +143,12 @@
 	-I$(TOP)/include \
 	-I$(TOP)/include/GL
 
-#if SystemV4 || defined(DarwinArchitecture)
+#if SystemV4
 OSDEFINES = -DNEEDCEILF
+#elif defined(DarwinArchitecture)
+# if OSMajorVersion <= 5
+OSDEFINES = -DNEEDCEILF
+# endif
 #else
 OSDEFINES = -D_EXTENSIONS_
 #endif
Index: xc/lib/X11/Imakefile
diff -u xc/lib/X11/Imakefile:3.43 xc/lib/X11/Imakefile:3.43.2.1
--- xc/lib/X11/Imakefile:3.43	Thu Dec 20 19:03:47 2001
+++ xc/lib/X11/Imakefile	Wed Sep  4 02:38:09 2002
@@ -3,7 +3,7 @@
 
 
 
-XCOMM $XFree86: xc/lib/X11/Imakefile,v 3.43 2001/12/20 19:03:47 keithp Exp $
+XCOMM $XFree86: xc/lib/X11/Imakefile,v 3.43.2.1 2002/09/04 02:38:09 dawes Exp $
 #if BuildLoadableXlibI18n
 #define IHaveSubdirs
 #define PassCDebugFlags CDEBUGFLAGS="$(CDEBUGFLAGS)"
@@ -96,6 +96,13 @@
 #if NoRConst
  RCONST_DEFINES = -DNORCONST
 #endif
+#if DisableXLocaleDirEnv
+  SETID_DEFINES = -DNO_XLOCALEDIR
+#elif HasIssetugid
+  SETID_DEFINES = -DHASSETUGID
+#elif HasGetresuid
+  SETID_DEFINES = -DHASGETRESUID
+#endif
     XLC_DEFINES = -DXLOCALEDIR=\"$(XLOCALEDIR)\"
 #if HasKrb5
          K5OBJS = k5encode.o
@@ -964,7 +971,7 @@
 SpecialCLibObjectRule(Xrm,$(_NOOP_),$(RCONST_DEFINES))
 SpecialCLibObjectRule(imTransR,$(ICONFIGFILES),$(CONN_DEFINES) $(XTRANS_XIM_DEFINES))
 SpecialCLibObjectRule(imTrans,$(ICONFIGFILES),$(CONN_DEFINES) $(XTRANS_XIM_DEFINES))
-SpecialCLibObjectRule(lcFile,$(ICONFIGFILES),$(XLC_DEFINES))
+SpecialCLibObjectRule(lcFile,$(ICONFIGFILES),$(XLC_DEFINES) $(SETID_DEFINES))
 #if BuildXKBlib
 SpecialCLibObjectRule(XKBCvt,$(_NOOP_),$(RCONST_DEFINES))
 SpecialCLibObjectRule(KeyBind,$(ICONFIGFILES),$(XKB_DEFINES))
Index: xc/lib/X11/XlcDL.c
diff -u xc/lib/X11/XlcDL.c:1.3 xc/lib/X11/XlcDL.c:1.3.4.2
--- xc/lib/X11/XlcDL.c:1.3	Mon Nov 19 15:33:38 2001
+++ xc/lib/X11/XlcDL.c	Wed Sep  4 02:38:09 2002
@@ -41,7 +41,7 @@
 Sun Microsystems, Inc. or its licensors is granted.
 
 */
-/* $XFree86: xc/lib/X11/XlcDL.c,v 1.3 2001/11/19 15:33:38 tsi Exp $ */
+/* $XFree86: xc/lib/X11/XlcDL.c,v 1.3.4.2 2002/09/04 02:38:09 dawes Exp $ */
 
 #include <stdio.h>
 #if defined(hpux)
@@ -125,28 +125,37 @@
 }
 
 static char *
-strdup_and_prefix(char *symbol)
+strdup_with_underscore(const char *symbol)
 {
-	size_t n;
 	char *result;
 
-	n = strlen(symbol) + 1;
-#ifndef __ELF__
-	n++;			/* add space for _ */
-#endif
-	if ((result = malloc(n)) == NULL) 
+	if ((result = malloc(strlen(symbol) + 2)) == NULL) 
 		return NULL;
-#ifndef __ELF__
 	result[0] = '_';
-#endif
-	memcpy(result
-#ifndef __ELF__
-		+1
-#endif
-		, symbol, n);
+	strcpy(result + 1, symbol);
 	return result;
 }
 
+#ifndef hpux
+static void *
+try_both_dlsym (void *handle, char *name)
+{
+    void    *ret;
+
+    ret = dlsym (handle, name);
+    if (!ret)
+    {
+	 name = strdup_with_underscore (name);
+	 if (name)
+	 {
+	     ret = dlsym (handle, name);
+	     free (name);
+	 }
+    }
+    return ret;
+}
+#endif
+
 static void
 resolve_object(path, lc_name)
 char *path;
@@ -202,13 +211,13 @@
 	    xi18n_objects_list[lc_count].type = XIM_OBJECT;
 	  }
 	  xi18n_objects_list[lc_count].dl_name = strdup(args[1]);
-	  xi18n_objects_list[lc_count].open = strdup_and_prefix(args[2]);
+	  xi18n_objects_list[lc_count].open = strdup(args[2]);
 	  xi18n_objects_list[lc_count].dl_release = XI18N_DLREL;
 	  xi18n_objects_list[lc_count].locale_name = strdup(lc_name);
 	  xi18n_objects_list[lc_count].dl_module = (void*)NULL;
 	  if (n == 5) {
-	    xi18n_objects_list[lc_count].im_register = strdup_and_prefix(args[3]);
-	    xi18n_objects_list[lc_count].im_unregister = strdup_and_prefix(args[4]);
+	    xi18n_objects_list[lc_count].im_register = strdup(args[3]);
+	    xi18n_objects_list[lc_count].im_unregister = strdup(args[4]);
 	  } else {
 	    xi18n_objects_list[lc_count].im_register = NULL;
 	    xi18n_objects_list[lc_count].im_unregister = NULL;
@@ -227,6 +236,12 @@
     char *path;
     size_t len;
 
+    /*
+     * reject this for possible security issue
+     */
+    if (strstr (dl_name, "../"))
+	return NULL;
+
 #ifdef _LP64
     len = (lc_dir ? strlen(lc_dir) : 0 ) +
 	(dl_name ? strlen(dl_name) : 0) + _MACH64_NAME_LEN + 10;
@@ -308,6 +323,8 @@
 	    strcmp(objects_list->locale_name, lc_name)) continue;
 	if (!objects_list->dl_module) {
 	  path = __lc_path(objects_list->dl_name, lc_dir);
+	  if (!path)
+	      continue;
 #if defined(hpux)
 	  objects_list->dl_module = shl_load(path, BIND_DEFERRED, 0L);
 #else
@@ -331,8 +348,8 @@
 	    free(symbols);
 	}
 #else
-	lc_loader = (XLCd(*)())dlsym(objects_list->dl_module,
-				     objects_list->open);
+	lc_loader = (XLCd(*)())try_both_dlsym(objects_list->dl_module,
+					      objects_list->open);
 #endif
 	if (!lc_loader) continue;
 	lcd = (*lc_loader)(lc_name);
@@ -383,6 +400,8 @@
 	strcmp(objects_list->locale_name, lc_name)) continue;
     if (!objects_list->dl_module) {
       path = __lc_path(objects_list->dl_name, lc_dir);
+      if (!path)
+	  continue;
 #if defined(hpux)
       objects_list->dl_module = shl_load(path, BIND_DEFERRED, 0L);
 #else
@@ -406,8 +425,8 @@
 	free(symbols);
     }
 #else
-    im_openIM = (XIM(*)())dlsym(objects_list->dl_module,
-				objects_list->open);
+    im_openIM = (XIM(*)())try_both_dlsym(objects_list->dl_module,
+					 objects_list->open);
     if (!im_openIM) continue;
 #endif
     im = (*im_openIM)(lcd, display, rdb, res_name, res_class);
@@ -458,6 +477,8 @@
 	strcmp(objects_list->locale_name, lc_name)) continue;
     if (!objects_list->dl_module) {
       path = __lc_path(objects_list->dl_name, lc_dir);
+      if (!path)
+	  continue;
 #if defined(hpux)
       objects_list->dl_module = shl_load(path, BIND_DEFERRED, 0L);
 #else
@@ -481,8 +502,8 @@
 	free(symbols);
     }
 #else
-    im_registerIM = (Bool(*)())dlsym(objects_list->dl_module,
-				     objects_list->im_register);
+    im_registerIM = (Bool(*)())try_both_dlsym(objects_list->dl_module,
+					      objects_list->im_register);
     if (!im_registerIM) continue;
 #endif
     ret_flag = (*im_registerIM)(lcd, display, rdb,
@@ -533,6 +554,8 @@
 	strcmp(objects_list->locale_name, lc_name)) continue;
     if (!objects_list->dl_module) {
       path = __lc_path(objects_list->dl_name, lc_dir);
+      if (!path)
+	  continue;
 #if defined(hpux)
       objects_list->dl_module = shl_load(path, BIND_DEFERRED, 0L);
 #else
@@ -556,8 +579,8 @@
 	free(symbols);
     }
 #else
-    im_unregisterIM = (Bool(*)())dlsym(objects_list->dl_module,
-				       objects_list->im_unregister);
+    im_unregisterIM = (Bool(*)())try_both_dlsym(objects_list->dl_module,
+						objects_list->im_unregister);
 
     if (!im_unregisterIM) continue;
 #endif
@@ -628,6 +651,8 @@
 	strcmp(objects_list->locale_name, lc_name)) continue;
     if (!objects_list->dl_module) {
       path = __lc_path(objects_list->dl_name, lc_dir);
+      if (!path)
+	  continue;
 #if defined(hpux)
       objects_list->dl_module = shl_load(path, BIND_DEFERRED, 0L);
 #else
@@ -651,8 +676,8 @@
 	free(symbols);
     }
 #else
-    om_openOM = (XOM(*)())dlsym(objects_list->dl_module,
-				objects_list->open);
+    om_openOM = (XOM(*)())try_both_dlsym(objects_list->dl_module,
+					 objects_list->open);
     if (!om_openOM) continue;
 #endif
     om = (*om_openOM)(lcd, display, rdb, res_name, res_class);
Index: xc/lib/X11/lcFile.c
diff -u xc/lib/X11/lcFile.c:3.25 xc/lib/X11/lcFile.c:3.25.4.1
--- xc/lib/X11/lcFile.c:3.25	Mon Nov 19 15:33:38 2001
+++ xc/lib/X11/lcFile.c	Wed Sep  4 02:38:09 2002
@@ -23,7 +23,7 @@
  * SOFTWARE.
  *
 */
-/* $XFree86: xc/lib/X11/lcFile.c,v 3.25 2001/11/19 15:33:38 tsi Exp $ */
+/* $XFree86: xc/lib/X11/lcFile.c,v 3.25.4.1 2002/09/04 02:38:09 dawes Exp $ */
 
 #include <stdlib.h>
 #include <stdio.h>
@@ -143,18 +143,62 @@
     char *buf,
     int buf_len)
 {
-    char *dir, *p = buf;
+    char *p = buf;
     int len = 0;
 
+#ifndef NO_XLOCALEDIR
+    char *dir;
+    int priv = 1;
+
     dir = getenv("XLOCALEDIR");
-    if (dir != NULL) {
-	len = strlen(dir);
-	strncpy(p, dir, buf_len);
-	if (len < buf_len) {
-	    p[len++] = LC_PATHDELIM;
-	    p += len;
+
+    if (dir) {
+	/*
+	 * Only use the user-supplied path if the process isn't priviledged.
+	 */
+	if (getuid() == geteuid() && getgid() == getegid()) {
+#if defined(HASSETUGID)
+	    priv = issetugid();
+#elif defined(HASGETRESUID)
+	    {
+		uid_t ruid, euid, suid;
+		gid_t rgid, egid, sgid;
+		if ((getresuid(&ruid, &euid, &suid) == 0) &&
+		    (getresgid(&rgid, &egid, &sgid) == 0))
+		    priv = (euid != suid) || (egid != sgid);
+	    }
+#else
+	    /*
+	     * If there are saved ID's the process might still be priviledged
+	     * even though the above test succeeded.  If issetugid() and
+	     * getresgid() aren't available, test this by trying to set
+	     * euid to 0.
+	     *
+	     * Note: this only protects setuid-root clients.  It doesn't
+	     * protect other setuid or any setgid clients.  If this tradeoff
+	     * isn't acceptable, set DisableXLocaleDirEnv to YES in host.def.
+	     */
+	    unsigned int oldeuid;
+	    oldeuid = geteuid();
+	    if (seteuid(0) != 0) {
+		priv = 0;
+	    } else {
+		seteuid(oldeuid);
+		priv = 1;
+	    }
+#endif
+	}
+	if (!priv) {
+	    len = strlen(dir);
+	    strncpy(p, dir, buf_len);
+	    if (len < buf_len) {
+	        p[len++] = LC_PATHDELIM;
+	        p += len;
+	    }
 	}
     }
+#endif /* NO_XLOCALEDIR */
+
     if (len < buf_len)
 #ifndef __EMX__
       strncpy(p, XLOCALEDIR, buf_len - len);
Index: xc/lib/Xaw/AsciiSrc.c
diff -u xc/lib/Xaw/AsciiSrc.c:1.30 xc/lib/Xaw/AsciiSrc.c:1.30.2.1
--- xc/lib/Xaw/AsciiSrc.c:1.30	Fri Dec 14 19:54:38 2001
+++ xc/lib/Xaw/AsciiSrc.c	Thu Jul  4 17:07:09 2002
@@ -26,7 +26,7 @@
 
 */
 
-/* $XFree86: xc/lib/Xaw/AsciiSrc.c,v 1.30 2001/12/14 19:54:38 dawes Exp $ */
+/* $XFree86: xc/lib/Xaw/AsciiSrc.c,v 1.30.2.1 2002/07/04 17:07:09 paulo Exp $ */
 
 /*
  * AsciiSrc.c - AsciiSrc object. (For use with the text widget).
@@ -342,7 +342,7 @@
  *
  * Parameters:
  *	w	- AsciiSource widget
- *		   pos - position of the text to retreive.
+ *	pos	- position of the text to retreive.
  *	text	- text block that will contain returned text
  *	length	- maximum number of characters to read
  *
@@ -350,7 +350,7 @@
  *	This function reads the source.
  *
  * Returns:
- *	The number of characters read into the buffer
+ *	The character position following the retrieved text.
  */
 static XawTextPosition
 ReadText(Widget w, XawTextPosition pos, XawTextBlock *text, int length)
@@ -417,7 +417,7 @@
     text->firstPos = pos;
     text->ptr = piece->text + (pos - start);
     count = piece->used - (pos - start);
-    text->length = (length > count) ? count : length;
+    text->length = Max(0, (length > count) ? count : length);
     text->format = XawFmt8Bit;
 
     return (pos + text->length);
@@ -1777,15 +1777,15 @@
 static void
 GetDefaultPieceSize(Widget w, int offset, XrmValue *value)
 {
-    static int pagesize;
+    static XPointer pagesize;
 
     if (pagesize == 0) {
-	pagesize = _XawGetPageSize();
-	if (pagesize < BUFSIZ)
-	    pagesize = BUFSIZ;
+	pagesize = (XPointer)((long)_XawGetPageSize());
+	if (pagesize < (XPointer)BUFSIZ)
+	    pagesize = (XPointer)BUFSIZ;
     }
 
-    value->addr = (XtPointer)&pagesize;
+    value->addr = (XPointer)&pagesize;
 }
 
 #if (defined(ASCII_STRING) || defined(ASCII_DISK))
Index: xc/lib/Xaw/MultiSrc.c
diff -u xc/lib/Xaw/MultiSrc.c:1.24 xc/lib/Xaw/MultiSrc.c:1.24.2.1
--- xc/lib/Xaw/MultiSrc.c:1.24	Fri Dec 14 19:54:41 2001
+++ xc/lib/Xaw/MultiSrc.c	Thu Jul  4 17:07:09 2002
@@ -27,7 +27,7 @@
  *
  * Much code taken from X11R3 String and Disk Sources.
  */
-/* $XFree86: xc/lib/Xaw/MultiSrc.c,v 1.24 2001/12/14 19:54:41 dawes Exp $ */
+/* $XFree86: xc/lib/Xaw/MultiSrc.c,v 1.24.2.1 2002/07/04 17:07:09 paulo Exp $ */
 
 /*
 
@@ -320,7 +320,7 @@
  *	This function reads the source.
  *
  * Returns:
- *	The number of characters read into the buffer
+ *	The character position following the retrieved text.
  */
 static XawTextPosition
 ReadText(Widget w, XawTextPosition pos, XawTextBlock *text, int length)
@@ -333,7 +333,7 @@
     text->firstPos = pos;
     text->ptr = (char *)(piece->text + (pos - start));
     count = piece->used - (pos - start);
-    text->length = (length > count) ? count : length;
+    text->length = Max(0, (length > count) ? count : length);
 
     return (pos + text->length);
 }
@@ -1610,13 +1610,13 @@
 static void
 GetDefaultPieceSize(Widget w, int offset, XrmValue *value)
 {
-    static int pagesize;
+    static XPointer pagesize;
 
     if (pagesize == 0) {
-	pagesize = _XawGetPageSize();
-	if (pagesize < BUFSIZ)
-	    pagesize = BUFSIZ;
+	pagesize = (XPointer)((long)_XawGetPageSize());
+	if (pagesize < (XPointer)BUFSIZ)
+	    pagesize = (XPointer)BUFSIZ;
     }
 
-    value->addr = (XtPointer)&pagesize;
+    value->addr = (XPointer)&pagesize;
 }
Index: xc/lib/Xaw/Pixmap.c
diff -u xc/lib/Xaw/Pixmap.c:3.16 xc/lib/Xaw/Pixmap.c:3.16.6.1
--- xc/lib/Xaw/Pixmap.c:3.16	Tue Jan 30 15:03:34 2001
+++ xc/lib/Xaw/Pixmap.c	Thu Jul  4 17:07:10 2002
@@ -25,7 +25,7 @@
  * XFree86 Project.
  */
 
-/* $XFree86: xc/lib/Xaw/Pixmap.c,v 3.16 2001/01/30 15:03:34 paulo Exp $ */
+/* $XFree86: xc/lib/Xaw/Pixmap.c,v 3.16.6.1 2002/07/04 17:07:10 paulo Exp $ */
 
 #include <string.h>
 #include <stdio.h>
@@ -70,6 +70,7 @@
 static int bcmp_long(register _Xconst void*, register _Xconst void *);
 static int qcmp_string(register _Xconst void*, register _Xconst void *);
 static int bcmp_string(register _Xconst void*, register _Xconst void *);
+static void GetResourcePixmapPath(Display*);
 
 /*
  * Initialization
@@ -649,9 +650,51 @@
 #define PROJECT_ROOT	"/usr/X11R6"
 #endif
 
-static char *pixmap_path =
-   "%H/%T/%N:%P/include/X11/%T/%N:/usr/X11R6/include/X11/%T/%N:/usr/include/X11/%T/%N:%N";
+static char *pixmap_path = NULL;
 
+static void
+GetResourcePixmapPath(Display *display)
+{
+    XrmName xrm_name[2];
+    XrmClass xrm_class[2];
+    XrmRepresentation rep_type;
+    XrmValue value;
+    static char *default_path =
+	"%H/%T/%N:%P/include/X11/%T/%N:/usr/X11R6/include/X11/%T/%N:/usr/include/X11/%T/%N:%N";
+
+    xrm_name[0] = XrmPermStringToQuark("pixmapFilePath");
+    xrm_name[1] = NULLQUARK;
+    xrm_class[0] = XrmPermStringToQuark("PixmapFilePath");
+    xrm_class[1] = NULLQUARK;
+    if (!XrmGetDatabase(display))
+	(void) XGetDefault(display, "", "");
+    if (XrmQGetResource(XrmGetDatabase(display), xrm_name, xrm_class, 
+			&rep_type, &value) &&
+			rep_type == XrmPermStringToQuark("String")) {
+	int length = 0;
+	char *tok, *buffer = XtNewString(value.addr);
+
+	for (tok = strtok(buffer, ":"); tok; tok = strtok(NULL, ":")) {
+	    int toklen = strlen(tok);
+
+	    if (toklen) {
+		pixmap_path = XtRealloc(pixmap_path, length + toklen + 5);
+		strcpy(pixmap_path + length, tok);
+		if (length)
+		    pixmap_path[length++] = ':';
+		sprintf(pixmap_path + length, "%s/%%N", tok);
+		length += strlen(tok) + 3;
+	    }
+	}
+	pixmap_path = XtRealloc(pixmap_path, length + strlen(default_path) + 2);
+	if (length)
+	    pixmap_path[length++] = ':';
+	strcpy(pixmap_path + length, default_path);
+    }
+    else
+	pixmap_path = default_path;
+}
+
 static Bool
 BitmapLoader(XawParams *params, Screen *screen, Colormap colormap, int depth,
 	     Pixmap *pixmap_return, Pixmap *mask_return,
@@ -700,6 +743,8 @@
       if (!sub[0].substitution)
 	sub[0].substitution = getenv("HOME");
       sub[1].substitution = params->name;
+      if (pixmap_path == NULL)
+	GetResourcePixmapPath(DisplayOfScreen(screen));
       filename = XtFindFile(pixmap_path, sub, XtNumber(sub), NULL);
       if (!filename)
 	return (FALSE);
@@ -900,6 +945,8 @@
       if (!sub[0].substitution)
 	sub[0].substitution = getenv("HOME");
       sub[1].substitution = params->name;
+      if (pixmap_path == NULL)
+	GetResourcePixmapPath(DisplayOfScreen(screen));
       filename = XtFindFile(pixmap_path, sub, XtNumber(sub), NULL);
       if (!filename)
 	return (False);
Index: xc/lib/Xaw/TextSink.c
diff -u xc/lib/Xaw/TextSink.c:1.20 xc/lib/Xaw/TextSink.c:1.20.2.1
--- xc/lib/Xaw/TextSink.c:1.20	Fri Dec 14 19:54:45 2001
+++ xc/lib/Xaw/TextSink.c	Thu Jul  4 17:07:10 2002
@@ -24,7 +24,7 @@
 in this Software without prior written authorization from The Open Group.
 
 */
-/* $XFree86: xc/lib/Xaw/TextSink.c,v 1.20 2001/12/14 19:54:45 dawes Exp $ */
+/* $XFree86: xc/lib/Xaw/TextSink.c,v 1.20.2.1 2002/07/04 17:07:10 paulo Exp $ */
 
 /*
  * Author:  Chris Peterson, MIT X Consortium.
@@ -1497,6 +1497,7 @@
     XawTextPropertyList *propl, *prev = NULL;
     XawTextProperty *def_prop = NULL;
     String str, tok, tmp;
+    char buffer[BUFSIZ];
 
     if (prop_lists) ptr = (XawTextPropertyList**)
 	bsearch((void*)(long)qname, prop_lists, num_prop_lists,
@@ -1545,6 +1546,10 @@
 	params = XawParseParamsString(tok);
 	ident = XrmStringToQuark(params->name);
 	if (ident == NULLQUARK) {
+	    XmuSnprintf(buffer, sizeof(buffer),
+			"Bad text property name \"%s\".", params->name);
+	    XtAppWarning(XtDisplayToApplicationContext
+			 (DisplayOfScreen(screen)), buffer);
 	    DestroyTextPropertyList(propl);
 	    if (prev)
 		prev->next = NULL;
@@ -1564,6 +1569,10 @@
 
 	    if ((prop->font = XLoadQueryFont(DisplayOfScreen(screen),
 					     argval->value)) == NULL) {
+		XmuSnprintf(buffer, sizeof(buffer),
+			    "Cannot load font \"%s\".", argval->value);
+		XtAppWarning(XtDisplayToApplicationContext
+			     (DisplayOfScreen(screen)), buffer);
 		DestroyTextPropertyList(propl);
 		if (prev)
 		    prev->next = NULL;
@@ -1579,6 +1588,10 @@
 	    argval->value) {
 	    if (!XAllocNamedColor(DisplayOfScreen(screen), colormap,
 				  argval->value, &color, &exact)) {
+		XmuSnprintf(buffer, sizeof(buffer),
+			    "Cannot allocate color \"%s\".", argval->value);
+		XtAppWarning(XtDisplayToApplicationContext
+			     (DisplayOfScreen(screen)), buffer);
 		DestroyTextPropertyList(propl);
 		if (prev)
 		    prev->next = NULL;
@@ -1592,6 +1605,10 @@
 	    argval->value) {
 	    if (!XAllocNamedColor(DisplayOfScreen(screen), colormap,
 				  argval->value, &color, &exact)) {
+		XmuSnprintf(buffer, sizeof(buffer),
+			    "Cannot allocate color \"%s\".", argval->value);
+		XtAppWarning(XtDisplayToApplicationContext
+			     (DisplayOfScreen(screen)), buffer);
 		DestroyTextPropertyList(propl);
 		if (prev)
 		    prev->next = NULL;
Index: xc/lib/Xaw/TextSrc.c
diff -u xc/lib/Xaw/TextSrc.c:1.30 xc/lib/Xaw/TextSrc.c:1.30.2.1
--- xc/lib/Xaw/TextSrc.c:1.30	Fri Dec 14 19:54:45 2001
+++ xc/lib/Xaw/TextSrc.c	Thu Jul  4 17:07:10 2002
@@ -25,7 +25,7 @@
 
 */
 
-/* $XFree86: xc/lib/Xaw/TextSrc.c,v 1.30 2001/12/14 19:54:45 dawes Exp $ */
+/* $XFree86: xc/lib/Xaw/TextSrc.c,v 1.30.2.1 2002/07/04 17:07:10 paulo Exp $ */
 
 /*
  * Author:  Chris Peterson, MIT X Consortium.
@@ -405,6 +405,9 @@
  *
  * Description:
  *	This function reads the source.
+ *
+ * Returns:
+ *	The character position following the retrieved text.
  */
 /*ARGSUSED*/
 static XawTextPosition
@@ -940,7 +943,8 @@
 		    memcpy(list->left->buffer, undo->left->buffer, size);
 		}
 		++list->left->length;
-		XtFree(l_state->buffer);
+		if (l_state->buffer != SrcNL && l_state->buffer != (char*)SrcWNL)
+		    XtFree(l_state->buffer);
 	    }
 
 	    if (src->textSrc.undo->num_list >= UNDO_DEPTH)
Index: xc/lib/zlib/infblock.c
diff -u xc/lib/zlib/infblock.c:1.4 xc/lib/zlib/infblock.c:1.4.6.2
--- xc/lib/zlib/infblock.c:1.4	Wed Jan 17 19:43:53 2001
+++ xc/lib/zlib/infblock.c	Thu Feb 14 16:22:45 2002
@@ -249,10 +249,11 @@
                              &s->sub.trees.tb, z);
       if (t != Z_OK)
       {
-        ZFREE(z, s->sub.trees.blens);
         r = t;
-        if (r == Z_DATA_ERROR)
+        if (r == Z_DATA_ERROR) {
+          ZFREE(z, s->sub.trees.blens);
           s->mode = BAD;
+        }
         LEAVE
       }
       s->sub.trees.index = 0;
@@ -317,14 +318,16 @@
 #endif
         t = inflate_trees_dynamic(257 + (t & 0x1f), 1 + ((t >> 5) & 0x1f),
                                   s->sub.trees.blens, &bl, &bd, &tl, &td, z);
-        ZFREE(z, s->sub.trees.blens);
         if (t != Z_OK)
         {
-          if (t == (uInt)Z_DATA_ERROR)
+          if (t == (uInt)Z_DATA_ERROR) {
+            ZFREE(z, s->sub.trees.blens);
             s->mode = BAD;
+          }
           r = t;
           LEAVE
         }
+        ZFREE(z, s->sub.trees.blens);
         Tracev((stderr, "inflate:       trees ok, %d * %d bytes used\n",
               inflate_hufts, sizeof(inflate_huft)));
         if ((c = inflate_codes_new(bl, bd, tl, td, z)) == Z_NULL)
Index: xc/programs/Xserver/Xext/shm.c
diff -u xc/programs/Xserver/Xext/shm.c:3.33 xc/programs/Xserver/Xext/shm.c:3.33.2.2
--- xc/programs/Xserver/Xext/shm.c:3.33	Fri Dec 14 19:58:51 2001
+++ xc/programs/Xserver/Xext/shm.c	Wed May 29 23:03:19 2002
@@ -1,4 +1,4 @@
-/* $XFree86: xc/programs/Xserver/Xext/shm.c,v 3.33 2001/12/14 19:58:51 dawes Exp $ */
+/* $XFree86: xc/programs/Xserver/Xext/shm.c,v 3.33.2.2 2002/05/29 23:03:19 torrey Exp $ */
 /************************************************************
 
 Copyright 1989, 1998  The Open Group
@@ -64,6 +64,12 @@
 #include "panoramiXsrv.h"
 #endif
 
+#if defined(SVR4) || defined(__linux__) || defined(CSRG_BASED)
+#define HAS_SAVED_IDS_AND_SETEUID
+#else
+#include <sys/stat.h>
+#endif
+
 typedef struct _ShmDesc {
     struct _ShmDesc *next;
     int shmid;
@@ -355,6 +361,45 @@
     return (client->noClientException);
 }
 
+#ifndef HAS_SAVED_IDS_AND_SETEUID
+/*
+ * Simulate the access() system call for a shared memory segement,
+ * using the real user and group id of the process
+ */
+static int
+shm_access(uid_t uid, gid_t gid, struct ipc_perm *perm, int readonly)
+{
+    mode_t mask;
+
+    /* User id 0 always gets access */
+    if (uid == 0) {
+	return 0;
+    }
+    /* Check the owner */
+    if (perm->uid == uid || perm->cuid == uid) {
+	mask = S_IRUSR;
+	if (!readonly) {
+	    mask |= S_IWUSR;
+	}
+	return (perm->mode & mask) == mask ? 0 : -1;
+    }
+    /* Check the group */
+    if (perm->gid == gid || perm->cgid == gid) {
+	mask = S_IRGRP;
+	if (!readonly) {
+	    mask |= S_IWGRP;
+	}
+	return (perm->mode & mask) == mask ? 0 : -1;
+    }
+    /* Otherwise, check everyone else */
+    mask = S_IROTH;
+    if (!readonly) {
+	mask |= S_IWOTH;
+    }
+    return (perm->mode & mask) == mask ? 0 : -1;
+}
+#endif
+
 static int
 ProcShmAttach(client)
     register ClientPtr client;
@@ -362,6 +407,12 @@
     struct shmid_ds buf;
     ShmDescPtr shmdesc;
     REQUEST(xShmAttachReq);
+    uid_t ruid;
+    gid_t rgid;
+#ifdef HAS_SAVED_IDS_AND_SETEUID
+    uid_t euid;
+    gid_t egid;
+#endif
 
     REQUEST_SIZE_MATCH(xShmAttachReq);
     LEGAL_NEW_RESOURCE(stuff->shmseg, client);
@@ -385,14 +436,44 @@
 	shmdesc = (ShmDescPtr) xalloc(sizeof(ShmDescRec));
 	if (!shmdesc)
 	    return BadAlloc;
+	ruid = getuid();
+	rgid = getgid();
+#ifdef HAS_SAVED_IDS_AND_SETEUID
+	euid = geteuid();
+	egid = getegid();
+
+	if (euid != ruid || egid != rgid) {
+	    /* Temporarly switch back to real ids */
+	    if (seteuid(ruid) == -1 || setegid(rgid) == -1) {
+		return BadAccess;
+	    }
+	}
+#endif
 	shmdesc->addr = shmat(stuff->shmid, 0,
 			      stuff->readOnly ? SHM_RDONLY : 0);
+#ifdef HAS_SAVED_IDS_AND_SETEUID
+	if (euid != ruid || egid != rgid) {
+	    /* Switch back to root privs */
+	    if (seteuid(euid) == -1 || setegid(egid) == -1) {
+		return BadAccess;
+	    }
+	} 
+#endif
 	if ((shmdesc->addr == ((char *)-1)) ||
 	    shmctl(stuff->shmid, IPC_STAT, &buf))
 	{
 	    xfree(shmdesc);
 	    return BadAccess;
 	}
+#ifndef HAS_SAVED_IDS_AND_SETEUID
+	/* The attach was performed with root privs. We must
+	 * do manual checking of access rights for the real uid/gid */
+	if (shm_access(ruid, rgid, &(buf.shm_perm), stuff->readOnly) == -1) {
+	    shmdt(shmdesc->addr);
+	    xfree(shmdesc);
+	    return BadAccess;
+	}
+#endif	
 	shmdesc->shmid = stuff->shmid;
 	shmdesc->refcnt = 1;
 	shmdesc->writable = !stuff->readOnly;
Index: xc/programs/Xserver/hw/darwin/darwinKeyboard.c
diff -u xc/programs/Xserver/hw/darwin/darwinKeyboard.c:1.14 xc/programs/Xserver/hw/darwin/darwinKeyboard.c:1.14.2.1
--- xc/programs/Xserver/hw/darwin/darwinKeyboard.c:1.14	Wed Dec  5 06:27:43 2001
+++ xc/programs/Xserver/hw/darwin/darwinKeyboard.c	Thu Feb  7 02:53:11 2002
@@ -36,7 +36,7 @@
 //
 //=============================================================================
 
-/* $XFree86: xc/programs/Xserver/hw/darwin/darwinKeyboard.c,v 1.14 2001/12/05 06:27:43 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/darwinKeyboard.c,v 1.14.2.1 2002/02/07 02:53:11 torrey Exp $ */
 
 /*
 ===========================================================================
@@ -416,9 +416,9 @@
                 km.charP = inBuffer;
                 km.intP++;
                 while (km.intP+3 < bufferEnd) {
-                    map_interface = *(km.intP++);
-                    map_handler_id = *(km.intP++);
-                    map_size = *(km.intP++);
+                    map_interface = NXSwapBigIntToHost(*(km.intP++));
+                    map_handler_id = NXSwapBigIntToHost(*(km.intP++));
+                    map_size = NXSwapBigIntToHost(*(km.intP++));
                     if (map_interface == interface) {
                         if (map_handler_id == handler_id || hasInterface) {
                             hasMatch = TRUE;
Index: xc/programs/Xserver/hw/darwin/bundle/XWindow.m
diff -u xc/programs/Xserver/hw/darwin/bundle/XWindow.m:1.5 xc/programs/Xserver/hw/darwin/bundle/XWindow.m:1.5.4.1
--- xc/programs/Xserver/hw/darwin/bundle/XWindow.m:1.5	Tue Nov  6 23:18:14 2001
+++ xc/programs/Xserver/hw/darwin/bundle/XWindow.m	Mon Jun  3 18:09:24 2002
@@ -1,7 +1,7 @@
 /*
  * NSWindow subclass for Mac OS X rootless X server
  */
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/XWindow.m,v 1.5 2001/11/06 23:18:14 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/XWindow.m,v 1.5.4.1 2002/06/03 18:09:24 torrey Exp $ */
 
 #import "XWindow.h"
 
@@ -37,6 +37,7 @@
     [self setAutodisplay:NO];       // MUST NOT autodisplay! See comment above
     [self disableFlushWindow];      // We do all the flushing manually
     [self setHasShadow: !isRoot];   // All windows have shadows except root
+    [self setReleasedWhenClosed:YES]; // Default, but we want to be sure
 
     // [self setAcceptsMouseMovedEvents:YES]; // MUST be AFTER orderFront?
 
Index: xc/programs/Xserver/hw/darwin/bundle/Xserver.m
diff -u xc/programs/Xserver/hw/darwin/bundle/Xserver.m:1.37 xc/programs/Xserver/hw/darwin/bundle/Xserver.m:1.37.2.1
--- xc/programs/Xserver/hw/darwin/bundle/Xserver.m:1.37	Tue Jan  1 23:09:00 2002
+++ xc/programs/Xserver/hw/darwin/bundle/Xserver.m	Tue Aug 20 21:56:15 2002
@@ -6,7 +6,7 @@
 //
 //  Created by Andreas Monitzer on January 6, 2001.
 //
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/Xserver.m,v 1.37 2002/01/01 23:09:00 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/Xserver.m,v 1.37.2.1 2002/08/20 21:56:15 torrey Exp $ */
 
 #import "Xserver.h"
 #import "Preferences.h"
@@ -49,6 +49,7 @@
 extern int main(int argc, char *argv[], char *envp[]);
 extern void HideMenuBar(void);
 extern void ShowMenuBar(void);
+extern void QuartzReallySetCursor();
 static void childDone(int sig);
 
 static NSPortMessage *signalMessage;
@@ -753,6 +754,10 @@
             if (!appQuitting) {
                 [NSApp terminate:nil];	// quit if we aren't already
             }
+            break;
+
+        case kQuartzCursorUpdate:
+            QuartzReallySetCursor();
             break;
 
         default:
Index: xc/programs/Xserver/hw/darwin/bundle/quartzCommon.h
diff -u xc/programs/Xserver/hw/darwin/bundle/quartzCommon.h:1.4 xc/programs/Xserver/hw/darwin/bundle/quartzCommon.h:1.4.2.1
--- xc/programs/Xserver/hw/darwin/bundle/quartzCommon.h:1.4	Sat Dec 22 05:28:35 2001
+++ xc/programs/Xserver/hw/darwin/bundle/quartzCommon.h	Tue Aug 20 21:56:15 2002
@@ -6,7 +6,7 @@
  * This file should be included before any X11 or IOKit headers
  * so that it can avoid symbol conflicts.
  */
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/quartzCommon.h,v 1.4 2001/12/22 05:28:35 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/quartzCommon.h,v 1.4.2.1 2002/08/20 21:56:15 torrey Exp $ */
 
 #ifndef _QUARTZCOMMON_H
 #define _QUARTZCOMMON_H
@@ -62,7 +62,8 @@
 // Messages that can be sent to the main thread.
 enum {
     kQuartzServerHidden,
-    kQuartzServerDied
+    kQuartzServerDied,
+    kQuartzCursorUpdate
 };
 
 #endif	/* _QUARTZCOMMON_H */
Index: xc/programs/Xserver/hw/darwin/bundle/quartzCursor.c
diff -u xc/programs/Xserver/hw/darwin/bundle/quartzCursor.c:1.15 xc/programs/Xserver/hw/darwin/bundle/quartzCursor.c:1.15.2.1
--- xc/programs/Xserver/hw/darwin/bundle/quartzCursor.c:1.15	Sat Dec 22 05:28:35 2001
+++ xc/programs/Xserver/hw/darwin/bundle/quartzCursor.c	Tue Aug 20 21:56:15 2002
@@ -3,7 +3,7 @@
  * Support for using the Quartz Window Manager cursor
  *
  **************************************************************/
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/quartzCursor.c,v 1.15 2001/12/22 05:28:35 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/quartzCursor.c,v 1.15.2.1 2002/08/20 21:56:15 torrey Exp $ */
 
 #include "quartzCommon.h"
 #include "quartzCursor.h"
@@ -32,6 +32,9 @@
 static CursorPtr quartzLatentCursor = NULL;
 static QD_Cursor gQDArrow; // QuickDraw arrow cursor
 
+// Cursor for the main thread to set (NULL = arrow cursor).
+static volatile CCrsrHandle currentCursor = NULL;
+
 #define CURSOR_PRIV(pScreen) \
     ((QuartzCursorScreenPtr)pScreen->devPrivates[darwinCursorScreenIndex].ptr)
 
@@ -299,7 +302,12 @@
                         (pScreen, pCursor);
         }
     } else {
-        FreeQDCursor((CCrsrHandle) pCursor->devPriv[pScreen->myNum]);
+        CCrsrHandle oldCursor = (CCrsrHandle) pCursor->devPriv[pScreen->myNum];
+
+        if (currentCursor != oldCursor) {
+            // This should only fail when quitting, in which case we just leak.
+            FreeQDCursor(oldCursor);
+        }
         pCursor->devPriv[pScreen->myNum] = NULL;
         return TRUE;
     }
@@ -336,19 +344,19 @@
              (pCursor->bits->width <= CURSORWIDTH) && ScreenPriv->useQDCursor)
     {
         // Cursor is small enough to use QuickDraw directly.
-        CCrsrHandle curs;
 
         if (! ScreenPriv->qdCursorMode)    // remove the X cursor
             (*ScreenPriv->spriteFuncs->SetCursor)(pScreen, 0, x, y);
         ScreenPriv->qdCursorMode = TRUE;
 
-        curs = (CCrsrHandle) pCursor->devPriv[pScreen->myNum];
-        SetCCursor(curs);
+        currentCursor = (CCrsrHandle) pCursor->devPriv[pScreen->myNum];
+        QuartzMessageMainThread(kQuartzCursorUpdate);
         SHOW_QD_CURSOR(pScreen, ScreenPriv->qdCursorVisible);
     }
     else if (quartzRootless) {
         // Rootless can't use a software cursor, so we just use Mac OS arrow.
-        SetCursor(&gQDArrow);
+        currentCursor = NULL;
+        QuartzMessageMainThread(kQuartzCursorUpdate);
         SHOW_QD_CURSOR(pScreen, ScreenPriv->qdCursorVisible);
     }
     else {
@@ -361,6 +369,24 @@
 
 
 /*
+ * QuartzReallySetCursor
+ * Set the QuickDraw cursor. Called from the main thread since changing the
+ * cursor with QuickDraw is not thread safe on dual processor machines.
+ */
+void
+QuartzReallySetCursor()
+{
+    CCrsrHandle newCursor = currentCursor;
+
+    if (newCursor) {
+        SetCCursor(newCursor);
+    } else {
+        SetCursor(&gQDArrow);
+    }
+}
+
+
+/*
  * QuartzMoveCursor
  * Move the cursor. This is a noop for QuickDraw.
  */
@@ -557,7 +583,8 @@
 {
     QuartzCursorScreenPtr ScreenPriv = CURSOR_PRIV(pScreen);
 
-    SetCursor(&gQDArrow);
+    currentCursor = NULL;
+    QuartzMessageMainThread(kQuartzCursorUpdate);
     SHOW_QD_CURSOR(pScreen, ScreenPriv->qdCursorVisible);
 }
 
Index: xc/programs/Xserver/hw/darwin/bundle/rootlessAquaImp.m
diff -u xc/programs/Xserver/hw/darwin/bundle/rootlessAquaImp.m:1.11 xc/programs/Xserver/hw/darwin/bundle/rootlessAquaImp.m:1.11.2.1
--- xc/programs/Xserver/hw/darwin/bundle/rootlessAquaImp.m:1.11	Thu Jan 17 02:44:27 2002
+++ xc/programs/Xserver/hw/darwin/bundle/rootlessAquaImp.m	Mon Jun  3 18:09:24 2002
@@ -1,7 +1,7 @@
 /*
  * Rootless implementation for Mac OS X Aqua environment
  */
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/rootlessAquaImp.m,v 1.11 2002/01/17 02:44:27 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/rootlessAquaImp.m,v 1.11.2.1 2002/06/03 18:09:24 torrey Exp $ */
 
 #include "rootlessAquaImp.h"
 #include "XWindow.h"
@@ -154,7 +154,8 @@
 {
     AquaWindowRec *winRec = WINREC(rw);
 
-    [winRec->window release];
+    [winRec->window orderOut:nil];
+    [winRec->window close];
 }
 
 void AquaMoveWindow(void *rw, int x, int y)
Index: xc/programs/Xserver/hw/darwin/bundle/Dutch.lproj/InfoPlist.strings.cpp
diff -u xc/programs/Xserver/hw/darwin/bundle/Dutch.lproj/InfoPlist.strings.cpp:1.1 xc/programs/Xserver/hw/darwin/bundle/Dutch.lproj/InfoPlist.strings.cpp:1.1.4.2
--- xc/programs/Xserver/hw/darwin/bundle/Dutch.lproj/InfoPlist.strings.cpp:1.1	Thu Nov 15 07:36:23 2001
+++ xc/programs/Xserver/hw/darwin/bundle/Dutch.lproj/InfoPlist.strings.cpp	Tue Aug 20 22:10:50 2002
@@ -1,5 +1,5 @@
 /* Dutch localized versions of Info.plist keys. */
 /* Most of these are set in the target application settings. */
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/Dutch.lproj/InfoPlist.strings.cpp,v 1.1 2001/11/15 07:36:23 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/Dutch.lproj/InfoPlist.strings.cpp,v 1.1.4.2 2002/08/20 22:10:50 torrey Exp $ */
 
-NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2001 XFree86 Project, Inc.__quote__
+NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2002 XFree86 Project, Inc.__quote__;
Index: xc/programs/Xserver/hw/darwin/bundle/English.lproj/InfoPlist.strings.cpp
diff -u xc/programs/Xserver/hw/darwin/bundle/English.lproj/InfoPlist.strings.cpp:1.2 xc/programs/Xserver/hw/darwin/bundle/English.lproj/InfoPlist.strings.cpp:1.2.4.2
--- xc/programs/Xserver/hw/darwin/bundle/English.lproj/InfoPlist.strings.cpp:1.2	Sun Nov  4 07:09:47 2001
+++ xc/programs/Xserver/hw/darwin/bundle/English.lproj/InfoPlist.strings.cpp	Tue Aug 20 22:10:51 2002
@@ -1,5 +1,5 @@
 /* English localized versions of Info.plist keys. */
 /* Most of these are set in the target application settings. */
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/English.lproj/InfoPlist.strings.cpp,v 1.2 2001/11/04 07:09:47 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/English.lproj/InfoPlist.strings.cpp,v 1.2.4.2 2002/08/20 22:10:51 torrey Exp $ */
 
-NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2001 XFree86 Project, Inc.__quote__
+NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2002 XFree86 Project, Inc.__quote__;
Index: xc/programs/Xserver/hw/darwin/bundle/French.lproj/InfoPlist.strings.cpp
diff -u xc/programs/Xserver/hw/darwin/bundle/French.lproj/InfoPlist.strings.cpp:1.2 xc/programs/Xserver/hw/darwin/bundle/French.lproj/InfoPlist.strings.cpp:1.2.4.2
--- xc/programs/Xserver/hw/darwin/bundle/French.lproj/InfoPlist.strings.cpp:1.2	Sun Nov  4 07:09:48 2001
+++ xc/programs/Xserver/hw/darwin/bundle/French.lproj/InfoPlist.strings.cpp	Tue Aug 20 22:10:51 2002
@@ -1,5 +1,5 @@
 /* French localized versions of Info.plist keys. */
 /* Most of these are set in the target application settings. */
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/French.lproj/InfoPlist.strings.cpp,v 1.2 2001/11/04 07:09:48 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/French.lproj/InfoPlist.strings.cpp,v 1.2.4.2 2002/08/20 22:10:51 torrey Exp $ */
 
-NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2001 XFree86 Project, Inc.__quote__
+NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2002 XFree86 Project, Inc.__quote__;
Index: xc/programs/Xserver/hw/darwin/bundle/German.lproj/InfoPlist.strings.cpp
diff -u xc/programs/Xserver/hw/darwin/bundle/German.lproj/InfoPlist.strings.cpp:1.2 xc/programs/Xserver/hw/darwin/bundle/German.lproj/InfoPlist.strings.cpp:1.2.4.2
--- xc/programs/Xserver/hw/darwin/bundle/German.lproj/InfoPlist.strings.cpp:1.2	Sun Nov  4 07:09:48 2001
+++ xc/programs/Xserver/hw/darwin/bundle/German.lproj/InfoPlist.strings.cpp	Tue Aug 20 22:10:51 2002
@@ -1,5 +1,5 @@
 /* German localized versions of Info.plist keys. */
 /* Most of these are set in the target application settings. */
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/German.lproj/InfoPlist.strings.cpp,v 1.2 2001/11/04 07:09:48 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/German.lproj/InfoPlist.strings.cpp,v 1.2.4.2 2002/08/20 22:10:51 torrey Exp $ */
 
-NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2001 XFree86 Project, Inc.__quote__
+NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2002 XFree86 Project, Inc.__quote__;
Index: xc/programs/Xserver/hw/darwin/bundle/Japanese.lproj/InfoPlist.strings.cpp
diff -u xc/programs/Xserver/hw/darwin/bundle/Japanese.lproj/InfoPlist.strings.cpp:1.2 xc/programs/Xserver/hw/darwin/bundle/Japanese.lproj/InfoPlist.strings.cpp:1.2.4.2
--- xc/programs/Xserver/hw/darwin/bundle/Japanese.lproj/InfoPlist.strings.cpp:1.2	Sun Nov  4 07:09:48 2001
+++ xc/programs/Xserver/hw/darwin/bundle/Japanese.lproj/InfoPlist.strings.cpp	Tue Aug 20 22:10:52 2002
@@ -1,5 +1,5 @@
 /* Japanese localized versions of Info.plist keys. */
 /* Most of these are set in the target application settings. */
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/Japanese.lproj/InfoPlist.strings.cpp,v 1.2 2001/11/04 07:09:48 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/Japanese.lproj/InfoPlist.strings.cpp,v 1.2.4.2 2002/08/20 22:10:52 torrey Exp $ */
 
-NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2001 XFree86 Project, Inc.__quote__
+NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2002 XFree86 Project, Inc.__quote__;
Index: xc/programs/Xserver/hw/darwin/bundle/Spanish.lproj/InfoPlist.strings.cpp
diff -u xc/programs/Xserver/hw/darwin/bundle/Spanish.lproj/InfoPlist.strings.cpp:1.1 xc/programs/Xserver/hw/darwin/bundle/Spanish.lproj/InfoPlist.strings.cpp:1.1.4.2
--- xc/programs/Xserver/hw/darwin/bundle/Spanish.lproj/InfoPlist.strings.cpp:1.1	Tue Nov 27 21:11:50 2001
+++ xc/programs/Xserver/hw/darwin/bundle/Spanish.lproj/InfoPlist.strings.cpp	Tue Aug 20 22:10:52 2002
@@ -1,5 +1,5 @@
-/* English localized versions of Info.plist keys. */
+/* Spanish localized versions of Info.plist keys. */
 /* Most of these are set in the target application settings. */
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/Spanish.lproj/InfoPlist.strings.cpp,v 1.1 2001/11/27 21:11:50 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/Spanish.lproj/InfoPlist.strings.cpp,v 1.1.4.2 2002/08/20 22:10:52 torrey Exp $ */
 
-NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2001 XFree86 Project, Inc.__quote__
+NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2002 XFree86 Project, Inc.__quote__;
Index: xc/programs/Xserver/hw/darwin/bundle/Swedish.lproj/InfoPlist.strings.cpp
diff -u xc/programs/Xserver/hw/darwin/bundle/Swedish.lproj/InfoPlist.strings.cpp:1.2 xc/programs/Xserver/hw/darwin/bundle/Swedish.lproj/InfoPlist.strings.cpp:1.2.4.2
--- xc/programs/Xserver/hw/darwin/bundle/Swedish.lproj/InfoPlist.strings.cpp:1.2	Sun Nov  4 07:09:49 2001
+++ xc/programs/Xserver/hw/darwin/bundle/Swedish.lproj/InfoPlist.strings.cpp	Tue Aug 20 22:10:52 2002
@@ -1,5 +1,5 @@
 /* Swedish localized versions of Info.plist keys. */
 /* Most of these are set in the target application settings. */
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/Swedish.lproj/InfoPlist.strings.cpp,v 1.2 2001/11/04 07:09:49 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/Swedish.lproj/InfoPlist.strings.cpp,v 1.2.4.2 2002/08/20 22:10:52 torrey Exp $ */
 
-NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2001 XFree86 Project, Inc.__quote__
+NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2002 XFree86 Project, Inc.__quote__;
Index: xc/programs/Xserver/hw/darwin/bundle/XDarwin.pbproj/project.pbxproj
diff -u xc/programs/Xserver/hw/darwin/bundle/XDarwin.pbproj/project.pbxproj:1.30 xc/programs/Xserver/hw/darwin/bundle/XDarwin.pbproj/project.pbxproj:1.30.2.2
--- xc/programs/Xserver/hw/darwin/bundle/XDarwin.pbproj/project.pbxproj:1.30	Mon Jan 14 07:12:22 2002
+++ xc/programs/Xserver/hw/darwin/bundle/XDarwin.pbproj/project.pbxproj	Tue Aug 20 22:04:41 2002
@@ -324,7 +324,7 @@
 				0A79E1A4004499A1CE6F79C2,
 			);
 			buildSettings = {
-				INSTALL_PATH = "";
+				INSTALL_PATH = /;
 				OPTIMIZATION_CFLAGS = "";
 				OTHER_CFLAGS = "";
 				OTHER_LDFLAGS = "";
@@ -338,7 +338,7 @@
 			);
 			isa = PBXApplicationTarget;
 			name = XDarwin;
-			productInstallPath = "";
+			productInstallPath = /;
 			productName = XDarwin;
 			productReference = 0A79E19E004499A1CE6F79C2;
 			productSettingsXML = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>
@@ -350,7 +350,7 @@
 	<key>CFBundleExecutable</key>
 	<string>XDarwin</string>
 	<key>CFBundleGetInfoString</key>
-	<string>XDarwin 1.1, 2001-2002 XFree86 Project, Inc.</string>
+	<string>XDarwin 1.1.0.1, 2001-2002 XFree86 Project, Inc.</string>
 	<key>CFBundleIconFile</key>
 	<string>XDarwin.icns</string>
 	<key>CFBundleIdentifier</key>
@@ -362,7 +362,7 @@
 	<key>CFBundlePackageType</key>
 	<string>APPL</string>
 	<key>CFBundleShortVersionString</key>
-	<string>XDarwin 1.1</string>
+	<string>XDarwin 1.1.0.1</string>
 	<key>CFBundleSignature</key>
 	<string>????</string>
 	<key>CFBundleVersion</key>
Index: xc/programs/Xserver/hw/darwin/bundle/ko.lproj/InfoPlist.strings.cpp
diff -u xc/programs/Xserver/hw/darwin/bundle/ko.lproj/InfoPlist.strings.cpp:1.1 xc/programs/Xserver/hw/darwin/bundle/ko.lproj/InfoPlist.strings.cpp:1.1.4.2
--- xc/programs/Xserver/hw/darwin/bundle/ko.lproj/InfoPlist.strings.cpp:1.1	Tue Dec  4 03:36:39 2001
+++ xc/programs/Xserver/hw/darwin/bundle/ko.lproj/InfoPlist.strings.cpp	Tue Aug 20 22:10:52 2002
@@ -1,5 +1,5 @@
 /* Korean localized versions of Info.plist keys. */
 /* Most of these are set in the target application settings. */
-/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/ko.lproj/InfoPlist.strings.cpp,v 1.1 2001/12/04 03:36:39 torrey Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/darwin/bundle/ko.lproj/InfoPlist.strings.cpp,v 1.1.4.2 2002/08/20 22:10:52 torrey Exp $ */
 
-NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2001 XFree86 Project, Inc.__quote__
+NSHumanReadableCopyright = __quote__XFree86 XF86_VERSION\nCopyright 2002 XFree86 Project, Inc.__quote__;
Index: xc/programs/Xserver/hw/xfree86/CHANGELOG
diff -u xc/programs/Xserver/hw/xfree86/CHANGELOG:3.2144 xc/programs/Xserver/hw/xfree86/CHANGELOG:3.2144.2.22
--- xc/programs/Xserver/hw/xfree86/CHANGELOG:3.2144	Fri Jan 18 20:09:22 2002
+++ xc/programs/Xserver/hw/xfree86/CHANGELOG	Wed Sep  4 03:01:44 2002
@@ -1,3 +1,53 @@
+XFree86 4.2.1 (03 September 2002)
+ 715. [SECURITY] Fix an Xlib problem that made it possible to load arbitrary
+      code into privileged clients.
+ 714. Fix i810_free_page() and i830_free_page() for DRI kernel modules so
+      that later 2.4.x kernels are supported.
+
+XFree86 4.2.0.1 (21 August 2002)
+ 713. Fix intermittent XDarwin crash when changing cursors on dual processor
+      machines (Torrey T. Lyons).
+ 712. Fix Finder warnings about XDarwin plist format on Jaguar
+      (Torrey T. Lyons).
+ 711. Fix XDarwin build issues on Jaguar (Sean Fagan).
+ 710. When using the vesa driver and the DisplaySize option the server
+      would crash with a floating point exception due to a divide by zero
+      in miscreeninit() (#5298, Mike A. Harris).
+ 709. Updated patch from head to fix problem described in #5244
+      (freed memory being deref'd in xaw) (jik@kamens.brookline.ma.us)
+ 708. The function MoveLine in lib/Xaw/TextAction.c sometimes attempts to
+      read uninitialized memory when hit ctrl-N in a Text widget to move to
+      the next line (#5245, Johnathan Kamens).
+ 707. Close XDarwin rootless windows properly for Jaguar compatibility
+      (Greg Parker).
+ 706. Build libXt as a flat namespace image on Darwin (Torrey T. Lyons).
+ 705. Install the bitmap file xc/programs/bitmap/Stipple as Stippler on file
+      systems that are not case sensitive (Torrey T. Lyons).
+ 704. Build with libcurses on Darwin for forward compatibility
+      (Jordan Hubbard).
+ 703. [SECURITY] MIT-SHM update: try to avoid using SHM segments that the
+      client user doesn't have sufficient privileges to access
+      (Roberto Zunino, Matthieu Herrb).
+ 702. Fix a problem related to reserving the overlay key in the default
+      colormap in 24+8 mode.  This caused some clients using the 8-bit
+      visuals to fail (David Dawes).
+ 701. [SECURITY] Zlib error handling fix (Mark Adler).
+ 700. Put back XDarwin's byte-ordering fix for reading keymappings on
+      Darwin x86 that was inadvertently dropped (Rob Braun).
+ 699. Fix for `hostname` issue on Linux (Marc La France).
+ 698. Fix startx script for ksh (Philip B. Bruce).
+ 697. Fix Emulate3Buttons for wsmouse protocol on NetBSD and OpenBSD
+      (Matthieu Herrb).
+ 696. Temporary workaround for IA-64 (Marc La France).
+ 695. Fix SIGSEGV when printing modes that have no flags (Marc La France).
+ 694. Fix an unresolved symbol in libGLU.so that shows up when building it
+      with gcc-3 (David Dawes).
+ 693. Fix incorrect symbol prefixing with Xlib's i18n modules on Solaris,
+      and fix invalid code caused by a memcpy() macro being split by a
+      directive (Keith Packard, David Dawes, #5150, Sami Farin).
+ 692. Don't try to print mode names when NULL (David Dawes).
+ 691. Revert the ATI driver's composite sync default to off (Marc La France).
+
 XFree86 4.2.0 (18 January 2002)
  690. Workaround for hardware bug that prevents older ATI 3D Rage adapters from
       being assigned to XF86Config device sections (Marc La France).
@@ -14555,4 +14605,4 @@
 XFree86 3.0 (26 April 1994)
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/CHANGELOG,v 3.2144 2002/01/18 20:09:22 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/CHANGELOG,v 3.2144.2.22 2002/09/04 03:01:44 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/xf86Version.h
diff -u xc/programs/Xserver/hw/xfree86/xf86Version.h:3.487 xc/programs/Xserver/hw/xfree86/xf86Version.h:3.487.2.5
--- xc/programs/Xserver/hw/xfree86/xf86Version.h:3.487	Fri Jan 18 20:09:24 2002
+++ xc/programs/Xserver/hw/xfree86/xf86Version.h	Wed Sep  4 03:01:47 2002
@@ -1,10 +1,10 @@
-/* $XFree86: xc/programs/Xserver/hw/xfree86/xf86Version.h,v 3.487 2002/01/18 20:09:24 dawes Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/xf86Version.h,v 3.487.2.5 2002/09/04 03:01:47 dawes Exp $ */
 
 #ifndef XF86_VERSION_CURRENT
 
 #define XF86_VERSION_MAJOR	4
 #define XF86_VERSION_MINOR	2
-#define XF86_VERSION_PATCH	0
+#define XF86_VERSION_PATCH	1
 #define XF86_VERSION_SNAP	0
 
 /* This has five arguments for compatibilty reasons */
@@ -24,7 +24,7 @@
 			0)
 
 
-#define XF86_DATE	"18 January 2002"
+#define XF86_DATE	"3 September 2002"
 
 #endif
 
Index: xc/programs/Xserver/hw/xfree86/common/xf86Mode.c
diff -u xc/programs/Xserver/hw/xfree86/common/xf86Mode.c:1.48 xc/programs/Xserver/hw/xfree86/common/xf86Mode.c:1.48.2.3
--- xc/programs/Xserver/hw/xfree86/common/xf86Mode.c:1.48	Thu Dec  6 15:40:27 2001
+++ xc/programs/Xserver/hw/xfree86/common/xf86Mode.c	Fri Jan 25 15:58:00 2002
@@ -1,4 +1,4 @@
-/* $XFree86: xc/programs/Xserver/hw/xfree86/common/xf86Mode.c,v 1.48 2001/12/06 15:40:27 tsi Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/common/xf86Mode.c,v 1.48.2.3 2002/01/25 15:58:00 tsi Exp $ */
 
 /*
  * Copyright (c) 1997,1998 by The XFree86 Project, Inc.
@@ -1805,46 +1805,41 @@
 static void
 add(char **p, char *new)
 {
-    if (!*p) {
-        *p = xnfalloc(strlen(new) + 1);
-	strcpy(*p,new);
-    } else {
-        *p = xnfrealloc(*p,((*p)?strlen(*p):0) + strlen(new) + 2);
-	strcat(*p," ");
-	strcat(*p,new);
-    }
+    *p = xnfrealloc(*p, strlen(*p) + strlen(new) + 2);
+    strcat(*p, " ");
+    strcat(*p, new);
 }
 
 static void
 PrintModeline(int scrnIndex,DisplayModePtr mode)
 {
     char tmp[256];
-    char *flags = NULL;
+    char *flags = xnfcalloc(1, 1);
 
     if (mode->HSkew) { 
-        snprintf(tmp,256,"hskew %i",mode->HSkew); 
-	add(&flags,tmp);
+	snprintf(tmp, 256, "hskew %i", mode->HSkew); 
+	add(&flags, tmp);
     }
     if (mode->VScan) { 
-        snprintf(tmp,256,"vscan %i",mode->VScan); 
-	add(&flags,tmp);
+	snprintf(tmp, 256, "vscan %i", mode->VScan); 
+	add(&flags, tmp);
     }
-    if (mode->Flags & V_INTERLACE) add(&flags,"interlace");
-    if (mode->Flags & V_CSYNC) add(&flags,"composite");
-    if (mode->Flags & V_DBLSCAN) add(&flags,"doublescan");
-    if (mode->Flags & V_BCAST) add(&flags,"bcast");
-    if (mode->Flags & V_PHSYNC) add(&flags,"+hsync");
-    if (mode->Flags & V_NHSYNC) add(&flags,"-hsync");
-    if (mode->Flags & V_PVSYNC) add(&flags,"+vsync");
-    if (mode->Flags & V_NVSYNC) add(&flags,"-vsync");
-    if (mode->Flags & V_PCSYNC) add(&flags,"+csync");
-    if (mode->Flags & V_NCSYNC) add(&flags,"-csync");
-    xf86DrvMsgVerb(scrnIndex,X_INFO,3,
-		   "Modeline \"%s\"  %6.2f  %i %i %i %i  %i %i %i %i %s\n",
-		   mode->name,mode->Clock/1000., mode->HDisplay,
-		   mode->HSyncStart,mode->HSyncEnd,mode->HTotal,
-		   mode->VDisplay,mode->VSyncStart,mode->VSyncEnd,
-		   mode->VTotal,flags);
+    if (mode->Flags & V_INTERLACE) add(&flags, "interlace");
+    if (mode->Flags & V_CSYNC) add(&flags, "composite");
+    if (mode->Flags & V_DBLSCAN) add(&flags, "doublescan");
+    if (mode->Flags & V_BCAST) add(&flags, "bcast");
+    if (mode->Flags & V_PHSYNC) add(&flags, "+hsync");
+    if (mode->Flags & V_NHSYNC) add(&flags, "-hsync");
+    if (mode->Flags & V_PVSYNC) add(&flags, "+vsync");
+    if (mode->Flags & V_NVSYNC) add(&flags, "-vsync");
+    if (mode->Flags & V_PCSYNC) add(&flags, "+csync");
+    if (mode->Flags & V_NCSYNC) add(&flags, "-csync");
+    xf86DrvMsgVerb(scrnIndex, X_INFO, 3,
+		   "Modeline \"%s\"  %6.2f  %i %i %i %i  %i %i %i %i%s\n",
+		   mode->name, mode->Clock/1000., mode->HDisplay,
+		   mode->HSyncStart, mode->HSyncEnd, mode->HTotal,
+		   mode->VDisplay, mode->VSyncStart, mode->VSyncEnd,
+		   mode->VTotal, flags);
     xfree(flags);
 }
 
@@ -1897,8 +1892,13 @@
 	else
 	    prefix = "Mode";
 	if (hsync == 0 || refresh == 0) {
-	    xf86DrvMsg(scrp->scrnIndex, X_CONFIG,
-			"%s \"%s\"\n", prefix, p->name);
+	    if (p->name)
+		xf86DrvMsg(scrp->scrnIndex, X_CONFIG,
+			   "%s \"%s\"\n", prefix, p->name);
+	    else
+		xf86DrvMsg(scrp->scrnIndex, X_PROBED,
+			   "%s %dx%d (unnamed)\n", prefix, p->HDisplay,
+			    p->VDisplay);
 	} else if (p->Clock == p->SynthClock) {
 	    xf86DrvMsg(scrp->scrnIndex, X_CONFIG,
 			"%s \"%s\": %.1f MHz, %.1f kHz, %.1f Hz%s%s\n",
Index: xc/programs/Xserver/hw/xfree86/common/xf86pciBus.c
diff -u xc/programs/Xserver/hw/xfree86/common/xf86pciBus.c:3.48 xc/programs/Xserver/hw/xfree86/common/xf86pciBus.c:3.48.2.1
--- xc/programs/Xserver/hw/xfree86/common/xf86pciBus.c:3.48	Fri Nov 30 12:11:55 2001
+++ xc/programs/Xserver/hw/xfree86/common/xf86pciBus.c	Fri Jan 25 20:51:33 2002
@@ -1,4 +1,4 @@
-/* $XFree86: xc/programs/Xserver/hw/xfree86/common/xf86pciBus.c,v 3.48 2001/11/30 12:11:55 eich Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/common/xf86pciBus.c,v 3.48.2.1 2002/01/25 20:51:33 tsi Exp $ */
 /*
  * Copyright (c) 1997-1999 by The XFree86 Project, Inc.
  */
@@ -1916,9 +1916,11 @@
 		pnPciBus = &PciBus->next;
 		PciBus->primary = -1;
 		PciBus->secondary = -1; /* to be set below */
+#ifndef __ia64__
 		PciBus->brbus = pcrp->busnum;
 		PciBus->brdev = pcrp->devnum;
 		PciBus->brfunc = pcrp->funcnum;
+#endif
 		PciBus->subclass = sub_class;
 		PciBus->brcontrol = PCI_PCI_BRIDGE_VGA_EN;
 		PciBus->preferred_io = xf86ExtractTypeFromList(
Index: xc/programs/Xserver/hw/xfree86/doc/BUILD
diff -u xc/programs/Xserver/hw/xfree86/doc/BUILD:3.7 xc/programs/Xserver/hw/xfree86/doc/BUILD:3.7.4.1
--- xc/programs/Xserver/hw/xfree86/doc/BUILD:3.7	Thu Nov 15 17:37:21 2001
+++ xc/programs/Xserver/hw/xfree86/doc/BUILD	Wed Sep  4 03:39:34 2002
@@ -17,11 +17,11 @@
 We highly recommend using gcc to build XFree86, but it generally also builds
 with the native compiler for each platform;
 
-1.  How to get the XFree86 4.2.0 source
+1.  How to get the XFree86 4.2.1 source
 
 There are a few starting points for getting the XFree86 source.  One option
-is to start directly with the XFree86 4.2.0 source distribution.  In this
-case, the procedure is as follows:
+is to start directly with the XFree86 4.2.0 source distribution and updating
+it to 4.2.1 with a source patch.  In this case, the procedure is as follows:
 
    o The XFree86 source is contained in files X420src-1.tgz, X420src-2.tgz
      and X420src-3.tgz.  These can be found at
@@ -42,21 +42,22 @@
 
           gzip -d < X420src-3.tgz | tar vxf -
 
-   o If the release is not a full release, it is available as a patch against
-     the previous full release in the
-     ftp://ftp.xfree86.org/pub/XFree86/4.2.0/patches/ directory. Get the
-     patch file from there and apply it by running the following command:
+   o A patch relative to 4.2.0 is available at
+     ftp://ftp.xfree86.org/pub/XFree86/4.2.1/patches/.  The patch file is
+     4.2.0-4.2.1.diff.gz.
 
+     The patch can be applied by running:
+
           cd the directory containing the xc directory
 
-          gzip -d < file | patch -s -p0 -E
+          gzip -d < 4.2.0-4.2.1.diff.gz | patch -s -p0 -E
 
-     Look for special patching instructions in the Release Notes.
+     Look for special patching instructions in the Release  Notes.
 
 Another option is to get the source by anonymous CVS or CVSup.  See
 http://www.xfree86.org/cvs/ for details on the different procedure available.
 
-All method will produce one main source directory called xc.
+All methods will produce one main source directory called xc.
 
 2.  Configuring the source before building
 
@@ -71,7 +72,7 @@
 ious OS*Version parameters, so you shouldn't need to enter those settings
 explicitly.
 
-If you are using just the X420src-1.tgz part of the source dist, you will
+If you are using just the X421src-1.tgz part of the source dist, you will
 need to define BuildFonts to NO.
 
 3.  Using a shadow directory of symbolic links for the build
@@ -208,7 +209,7 @@
      shown do not match your system, you probably need to set them manually
      in host.def and report the problem to XFree86@XFree86.org.
 
-     Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/BUILD.sgml,v 3.6 2001/11/15 17:32:16 dawes Exp $
+     Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/BUILD.sgml,v 3.6.4.1 2002/09/04 03:33:11 dawes Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/BUILD,v 3.7 2001/11/15 17:37:21 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/BUILD,v 3.7.4.1 2002/09/04 03:39:34 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/Install
diff -u xc/programs/Xserver/hw/xfree86/doc/Install:1.14 xc/programs/Xserver/hw/xfree86/doc/Install:1.14.2.1
--- xc/programs/Xserver/hw/xfree86/doc/Install:1.14	Wed Jan 16 20:51:01 2002
+++ xc/programs/Xserver/hw/xfree86/doc/Install	Wed Sep  4 03:39:34 2002
@@ -1,4 +1,4 @@
-                 Installation Details for XFree86[tm] 4.2.0
+                 Installation Details for XFree86[tm] 4.2.1
 
                           The XFree86 Project, Inc
 
@@ -20,13 +20,19 @@
 installation script.  We recommend that these be used to install the bina-
 ries.
 
-2.  Downloading the XFree86 4.2.0 binaries
+2.  Downloading the XFree86 4.2.1 binaries
 
-We provide XFree86 4.2.0 binaries for a range of operating systems at our ftp
-site <URL:ftp://ftp.xfree86.org/pub/XFree86/4.2.0/binaries/> and our web site
-<URL:http://ftp.xfree86.org/pub/XFree86/4.2.0/binaries/>.  Often during
-releases our site is heavily loaded.  Instead of downloading directly from us
-we recommend that instead you use one of our mirror sites.
+XFree86 4.2.1 is an update release.  The most recent full release (4.2.0)
+needs to be installed before installing this update.  Information about down-
+loading and installing 4.2.0 can be found in the installation document for
+that version, which can be found on the XFree86 web site
+<URL:http://www.xfree86.org/pub/XFree86/4.2.0/Install.html>.
+
+We provide XFree86 4.2.1 update binaries for a range of operating systems at
+our ftp site <URL:ftp://ftp.xfree86.org/pub/XFree86/4.2.1/binaries/> and our
+web site <URL:http://ftp.xfree86.org/pub/XFree86/4.2.1/binaries/>.  Often
+during releases our site is heavily loaded.  Instead of downloading directly
+from us we recommend that instead you use one of our mirror sites.
 
 Our binaries are organized by sub-directories which correspond to each of the
 OS/platforms for which we provide binaries.  First go to the sub-directory
@@ -71,28 +77,20 @@
      looking soon after the release date.  The second possibility is that we
      won't have it available at all for this release.  This is likely if it's
      still not there about two weeks after the release date.  Check here
-     <URL:http://www.xfree86.org/4.2.0/UPDATES.html> for information about
+     <URL:http://www.xfree86.org/4.2.1/UPDATES.html> for information about
      updates to our binary distributions, and here
-     <URL:http://www.xfree86.org/4.2.0/ERRATA.html> for errata related to
+     <URL:http://www.xfree86.org/4.2.1/ERRATA.html> for errata related to
      this release.
 
-Once you're run the Xinstall.sh script and found which binary distribution is
-suitable for your system, download the necessary files.  The twelve (12)
-mandatory files for all installations are listed below.  If you have not
+Once you're run the Xinstall.sh script and found which binary update distri-
+bution is suitable for your system, download the necessary files.  The four
+(4) mandatory files for all installations are listed below.  If you have not
 downloaded all of the files, the installer script will complain.
 
           1.   Xinstall.sh    The installer script
           2.   extract        The utility for extracting tarballs
-          3.   Xbin.tgz       X clients/utilities and run-time libraries
-          4.   Xlib.tgz       Some data files required at run-time
-          5.   Xman.tgz       Manual pages
-          6.   Xdoc.tgz       XFree86 documentation
-          7.   Xfnts.tgz      Base set of fonts
-          8.   Xfenc.tgz      Base set of font encoding data
-          9.   Xetc.tgz       Run-time configuration files
-          10.  Xvar.tgz       Run-time data
-          11.  Xxserv.tgz     XFree86 X server
-          12.  Xmod.tgz       XFree86 X server modules
+          3.   Xupdate.tgz    Updated files except X server drivers
+          4.   Xdrivers.tgz   Updated X server drivers
 
 NOTES:
 
@@ -101,46 +99,22 @@
      extract.exe instead.  This should fix the problem.  (This is not a
      DOS/Windows executable.)
 
-   o A few distributions don't have or require the Xvar.tgz tarball.  If it
-     is present in the binaries sub-directory for your platform, then it is
-     required.
+   o The Darwin/Mac OS X distribution doesn't have or require the
+     Xdrivers.tgz tarball.
 
-   o The Darwin/Mac OS X distribution doesn't have or require the Xmod.tgz
-     tarball.
-
    o Some distributions may have additional mandatory tarballs.  While rare,
      the installer script will tell you if any are missing.
-
-The following eleven (11) tarballs are optional.  You should download the
-ones you want to install.
-
-          1.   Xfsrv.tgz      Font server
-          2.   Xnest.tgz      Nested X server
-          3.   Xprog.tgz      X header files, config files and compile-time libs
-          4.   Xprt.tgz       X Print server
-          5.   Xvfb.tgz       Virtual framebuffer X server
-          6.   Xf100.tgz      100dpi fonts
-          7.   Xfcyr.tgz      Cyrillic fonts
-          8.   Xfscl.tgz      Scalable fonts (Speedo, Type1 and TrueType)
-          9.   Xhtml.tgz      HTML version of the documentation
-          10.  Xps.tgz        PostScript version of the documentation
-          11.  Xjdoc.tgz      Documentation in Japanese
-
-NOTES:
-
-   o Some distributions may have some additional optional tarballs.
 
-If you miss some and want to install them later, go to the Manual Installa-
-tion (section 4., page 1) section.
+3.  Installing XFree86 4.2.1 using the Xinstall.sh script
 
-3.  Installing XFree86 4.2.0 using the Xinstall.sh script
+We strongly recommend that our XFree86 4.2.1 binaries be installed using the
+Xinstall.sh script that we provide.  It is also important that the previous
+full release (4.2.0) is installed before installing this update release.
+Make sure that you use the 4.2.1 version of the Xinstall.sh script to install
+this update.  Older versions may not be able to do it correctly.  There are a
+lot of steps in the manual installation process, and those steps can vary
+according to the platform and hardware setup.
 
-We strongly recommend that our XFree86 4.2.0 binaries be installed using the
-Xinstall.sh script that we provide.  There are a lot of steps in the manual
-installation process, and those steps can vary according to the platform and
-hardware setup.  There is a description of the manual installation process
-for the most common cases below (section 4., page 1).
-
 You must login as the super user (root) to run the installer script.  Place
 all of the downloaded files into a single directory (choose a temporary loca-
 tion with enough space).  Use the cd command to change to that directory and
@@ -167,92 +141,29 @@
 running, before continuing.  If you ignore this warning and run into prob-
 lems, well, you were warned!
 
-If you have an existing X installation, you will be warned that proceeding
-with this installation will overwrite it.  Only those things that are part of
-our standard distribution will be overwritten.  Other X applications that you
-may have installed will not be removed.  Some configuration files may be
-overwritten though, but the installer should prompt you before doing so.  As
-the opening greeting says, it is strongly recommended that you backup any
-existing installation before proceeding.  If you want your old applications
-to still be there after you've installed, don't do the "backup" by simply
-renaming your old /usr/X11R6 directory.  It is better to make a copy of it,
-and then install over the top of the original one.  If you run into problems
-and want to revert to the old installation, you can then delete the overwrit-
-ten one and copy the saved version back.
+You will be warned that proceeding with this installation will overwrite it.
+Only those things that are part of our standard distribution will be over-
+written.  Other X applications that you may have installed will not be
+removed.  Some configuration files may be overwritten though, but the
+installer should prompt you before doing so.  As the opening greeting says,
+it is strongly recommended that you backup any existing installation before
+proceeding.  If you want your old applications to still be there after you've
+installed, don't do the "backup" by simply renaming your old /usr/X11R6
+directory.  It is better to make a copy of it, and then install over the top
+of the original one.  If you run into problems and want to revert to the old
+installation, you can then delete the overwritten one and copy the saved ver-
+sion back.
 
 During the first part of the installation over an existing version, the
 script may remove some old files or directories that would get in the way of
 the new installation.  It will list which files/directories have been
 removed.  If none are listed, then none were removed.
 
-The next step when installing over an existing version is to check for exist-
-ing configuration files.  As of XFree86 version 3.9.18, the run-time configu-
-ration files are installed by default under /etc/X11 instead of under
-/usr/X11R6/lib/X11.  The installer will move the existing ones for you and
-create the necessary symbolic links.  If you don't want to have these config-
-uration files under /etc/X11, then you should answer "no" when asked about
-it.  Answering "no" here also means that the new configuration files will be
-installed in the old /usr/X11R6/lib/X11 location.
-
-Note: for the rare systems that don't have symbolic links, this question will
-not be asked.  The default answer is "yes" because that is best for most sit-
-uations.  It is our new default.  It makes it easier to share the /usr/X11R6
-directory between multiple hosts, and allows it to be mounted read-only.  If
-you don't need these features, then you can safely answer "no" if you don't
-want them moved.
-
-When installing over an existing version, you will be prompted before each
-set of configuration files is installed.  If you haven't made any Customisa-
-tions to your existing configuration files, then you can safely answer "yes"
-for each of these.  If you have made customisations, you can try answering
-"no".  If you run into problems later, you may need to manually merge your
-customisations into the the new version of the configuration files.  The con-
-figuration files can all be found in the Xetc.tgz tarball.  See the section
-below (section 4., page 1) about manual installation for information about
-extracting them separately.
-
-After the configuration files have been dealt with, the other mandatory com-
-ponents of the binary distribution will be installed.  This should proceed
-without any user intervention.
-
-If you downloaded any of the optional components, the installer will ask you
-about each one before it is installed.  The default answer is "yes".  If
-there are any that you've since decided that you don't want to install,
-answer "no" when prompted.
-
-After that is done, the main part of the installation is complete.  The next
-steps are to tidy up some aspects of the installation.  The first of these is
-to run "ldconfig" on systems that require it, so that the newly installed
-shared libraries are accessible.  Then the fonts.dir files in some directo-
-ries are updated so that the fonts can be accessed correctly.  Next, the
-installer checks to see if your system has a termcap file or terminfo files.
-If it finds the former, it tells you how you may update the entries in that
-file.  If it finds the latter, it asks you if you want it to update them for
-you.
-
-You may be asked if you want to create links for the GL libraries and header
-files.  The OpenGL standard on some platforms (Linux in particular) says that
-these should be installed in the standard system locations (/usr/lib and
-/usr/include), so the installer offers to create the appropriate links.  If
-you're running Linux, you should probably answer yes.  For other platforms it
-is your choice.  If you already have another version of libGL in /usr/lib,
-answering "yes" will remove it and replace it with a link to the version we
-supply.  The installer will show you a listing of any existing versions
-before asking if they should be replaced.
-
-Finally, the installer asks you if you want a link created for the rstart
-utility.  On most modern systems the link isn't essential, so the default
-answer is "no".  Answer "yes" if you know that you need it.  If you find
-later that you need it, you can create it easily by running:
-
-     rm -f /usr/bin/rstartd
-     ln -s /usr/X11R6/bin/rstartd /usr/bin/rstartd
-
 3.2  After the installation is complete
 
 The next step is to configure the X server.  That is covered in detail in an
 as-yet unwritten document :-(.  In the meantime, there are three ways to cre-
-ate a basic X server configuration file for XFree86 4.2.0.  One is to run the
+ate a basic X server configuration file for XFree86 4.2.1.  One is to run the
 xf86config utility.  Another is to run the xf86cfg utility.  The third option
 is to use the new -configure X server option:
 
@@ -271,114 +182,7 @@
 After the X server configuration is done, it may be advisable to reboot,
 especially if you run xdm (or equivalent) or the font server (xfs).
 
-4.  Installing XFree86 4.2.0 manually
-
-This section contains information about manually installing the XFree86 4.2.0
-binary distributions.  You should only use this method if you know what
-you're doing.  The information here covers some common cases, but not every
-possible case.  It also may not be complete or up to date.  Use at your own
-risk.
-
-Put all of the downloaded files into a single directory (choose some tempo-
-rary location with enough space).  Become the super user (root).  All of the
-following commands should be run as root, and they should be run from the
-directory that has all of the downloaded files.  The "extract" utility should
-be used to unpack the tarballs.  This is a customised version of GNU tar that
-has the gzip code built-in, and which has a different usage when run under
-the name "extract".  One important thing that extract does that most versions
-of tar do not do by default is that it unlinks existing files before writing
-new ones.  This is important when installing over an existing version of X.
-If you choose to use some other utility to extract the tarballs, you're on
-your own.
-
-4.1  A new installation
-
-The simplest case is when there is no existing X installation.  The installa-
-tion procedure for this case is as follows:
-
-     chmod +x extract
-     mkdir /usr/X11R6
-     mkdir /etc/X11
-     ./extract -C /usr/X11R6 X[a-df-uw-z]*.tgz
-     ./extract -C /usr/X11R6 Xvfb.tgz    # If you are installing Xvfb
-     ./extract -C /etc/X11 Xetc.tgz
-     ./extract -C /var Xvar.tgz
-     ln -s /etc/X11/app-defaults /usr/X11R6/lib/X11
-     ln -s /etc/X11/fs /usr/X11R6/lib/X11
-     ln -s /etc/X11/lbxproxy /usr/X11R6/lib/X11
-     ln -s /etc/X11/proxymngr /usr/X11R6/lib/X11
-     ln -s /etc/X11/rstart /usr/X11R6/lib/X11
-     ln -s /etc/X11/twm /usr/X11R6/lib/X11
-     ln -s /etc/X11/xdm /usr/X11R6/lib/X11
-     ln -s /etc/X11/xinit /usr/X11R6/lib/X11
-     ln -s /etc/X11/xsm /usr/X11R6/lib/X11
-     ln -s /etc/X11/xserver /usr/X11R6/lib/X11
-     chmod ug-w /usr/X11R6/lib           # Make sure the permissions are OK
-     /sbin/ldconfig /usr/X11R6/lib       # For Linux
-     /sbin/ldconfig -m /usr/X11R6/lib    # For FreeBSD, NetBSD, OpenBSD
-     /usr/X11R6/bin/mkfontdir /usr/X11R6/lib/X11/fonts/misc
-
-4.2  Installing over an old installation
-
-If you have an existing installation of X, you should make a backup copy of
-it before installing the new version over the top of it.
-
-Before doing anything else, make sure the extract command is executable, and
-also link it to the name "gnu-tar" so that it can be used as a regular tar
-command:
-
-     chmod +x extract
-     rm -f gnu-tar
-     ln extract gnu-tar
-
-The first part of the procedure is to move the old run-time config files from
-/usr/X11R6/lib/X11 to /etc/X11.  Create /etc/X11 if it doesn't already exist.
-For each of the following sub-directories (app-defaults, fs, lbxproxy, prox-
-ymngr, rstart, twm, xdm, xinit, xsm, xserver) that you want to move, check
-that there is a sub-directory of this name in /usr/X11R6/lib/X11.  Create a
-sub-directory of the same name under /etc/X11, then copy the files over by
-running:
-
-     ./gnu-tar -C /usr/X11R6/lib/X11/subdir -c -f - . | \
-       ./gnu-tar -C /etc/X11/subdir -v -x -p -U -f -
-
-For each subdirectory that is moved, remove the one under /usr/X11R6/lib/X11
-and create a symbolic link to the new location:
-
-     rm -fr /usr/X11R6/lib/X11/subdir
-     ln -s /etc/X11/subdir /usr/X11R6/lib/X11
-
-For those subdirectories that didn't already exist under /usr/X11R6/lib/X11,
-create one under /etc/X11 and create the symbolic link to it:
-
-     mkdir /etc/X11/subdir
-     ln -s /etc/X11/subdir /usr/X11R6/lib/X11
-
-Once that is done, extract the config files from the Xetc.tgz tarball into a
-temporary directory:
-
-     mkdir tmpdir
-     ./extract -C tmpdir Xetc.tgz
-
-and then copy each sub-directory over to the installed location:
-
-     ./gnu-tar -C tmpdir/subdir -c -f - . | \
-       ./gnu-tar -C /usr/X11R6/lib/X11/subdir -v -x -p -U -f -
-
-If you have customised any config files in your old installation, you may
-want to omit those sub-directories, or copy selected files over by hand.
-
-Once that's done, the main part of the installation can be done:
-
-     ./extract -C /usr/X11R6 `pwd`/X[a-df-uw-z]*.tgz
-     ./extract -C /usr/X11R6 Xvfb.tgz    # If you are installing Xvfb
-     ./extract -C /var Xvar.tgz
-     chmod ug-w /usr/X11R6/lib           # Make sure the permissions are OK
-     /sbin/ldconfig /usr/X11R6/lib       # For Linux
-     /sbin/ldconfig -m /usr/X11R6/lib    # For FreeBSD, NetBSD, OpenBSD
-     /usr/X11R6/bin/mkfontdir /usr/X11R6/lib/X11/fonts/misc
-
      Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/Install.sgml,v 1.13 2002/01/16 20:38:44 dawes Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/Install,v 1.14 2002/01/16 20:51:01 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/Install,v 1.14.2.1 2002/09/04 03:39:34 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/README
diff -u xc/programs/Xserver/hw/xfree86/doc/README:3.116 xc/programs/Xserver/hw/xfree86/doc/README:3.116.2.1
--- xc/programs/Xserver/hw/xfree86/doc/README:3.116	Wed Jan 16 20:51:01 2002
+++ xc/programs/Xserver/hw/xfree86/doc/README	Wed Sep  4 03:39:34 2002
@@ -1,8 +1,8 @@
-                        README for XFree86[tm] 4.2.0
+                        README for XFree86[tm] 4.2.1
 
                           The XFree86 Project, Inc
 
-                               16 January 2002
+                              3 September 2002
 
                                   Abstract
 
@@ -10,10 +10,16 @@
      supports several UNIX(R) and UNIX-like (such as Linux, the BSDs and
      Solaris x86) operating systems on Intel and other platforms.
 
-1.  What is XFree86 4.2.0?
+1.  What is XFree86 4.2.1?
 
-XFree86 4.2.0 is the fifth full release in the XFree86 4 series.
+XFree86 4.2.1 is the first update to 4.2.0, the fifth full release in the
+XFree86 4 series.
 
+Update releases are taken from a stable/maintenance branch.  They are
+designed to be installed on top of the full release that they are updating.
+They contain fixes for serious problems, most commonly fixes for security
+issues, fixes for driver bugs, and fixes that improve stability.
+
 XFree86 release 4 is a major re-design of the basic architectural underpin-
 nings of XFree86's implementation of the original X Consortium's X Server.
 This re-design allows for a modular interaction between the hardware drivers
@@ -25,8 +31,7 @@
 The road to XFree86 release 4 began as an architectural concept in mid 1997,
 with the serious framework being implemented in code the beginning of 1998.
 There were several snapshots on the road to 4.0 which are now part of the 4.0
-base release.  The 4.2.0 version is an upgrade to 4.1.0, which include more
-hardware ports, code enhancements and bug fixes.
+base release.
 
 Release 4 also included the long-awaited integration of the DRI (Direct Ren-
 dering Infrastructure).  This upgrade into the code base  gives XFree86 the
@@ -116,50 +121,26 @@
 fix to <fixes@XFree86.org>.  This will ensure that they are included in
 future releases. And thanks!  You make this truly an Open group.
 
-4.  How to get XFree86 4.2.0
+4.  How to get XFree86 4.2.1
 
-XFree86 4.2.0 can be found at the XFree86 ftp server
-<URL:ftp://ftp.xfree86.org/pub/XFree86/4.2.0/>, and at mirrors of this
+XFree86 4.2.1 can be found at the XFree86 ftp server
+<URL:ftp://ftp.xfree86.org/pub/XFree86/4.2.1/>, and at mirrors of this
 server.  Information about obtaining and installing binary distributions of
 this release can be found in the Installation Document.  Information about
 obtaining the release in source form is given below.
-
-The source for version 4.2.0 is split into three tarballs: X420src-1.tgz,
-X420src-2.tgz, X420src-3.tgz.  The first contains everything except the fonts
-and general X11 documentation.  It is sufficient for building XFree86 if you
-already have a set of fonts.  The second contains the fonts and the source
-for the general X11 documentation.  The third contains the general X11 docu-
-mentation in hardcopy format.
-
-A source patch relative to version 4.1.0 is also available.  Because of its
-size, it is split into four parts.  The patch files are 4.1.0-4.2.0.diff1.gz,
-4.1.0-4.2.0.diff2.gz, 4.1.0-4.2.0.diff3.gz and 4.1.0-4.2.0.diff4.gz.  There
-is also a tarball that contains some files that have components that can't be
-included in a diff.  It is 4.2.0.tgz.  These patches should be applied to a
-clean 4.1.0 source tree, working from the directory containing the xc/ direc-
-tory.  The patches should be applied by running:
-
-     gzip -d < 4.1.0-4.2.0.diff1.gz | patch -p0 -E
-     gzip -d < 4.1.0-4.2.0.diff2.gz | patch -p0 -E
-     gzip -d < 4.1.0-4.2.0.diff3.gz | patch -p0 -E
-     gzip -d < 4.1.0-4.2.0.diff4.gz | patch -p0 -E
-
-     rm -f xc/extras/freetype2/builds/mac/ftlib.prj
-     rm -fr xc/extras/freetype2/docs/design
-     rm -fr xc/extras/freetype2/docs/glyphs
-     rm -fr xc/extras/freetype2/docs/image
-     rm -fr xc/extras/freetype2/docs/tutorial
-     rm -f xc/programs/Xserver/hw/darwin/bundle/English.lproj/MainMenu.nib/objects.nib
-     rm -f xc/programs/Xserver/hw/darwin/bundle/Japanese.lproj/Localizable.strings
-     rm -f xc/programs/Xserver/hw/darwin/bundle/Japanese.lproj/MainMenu.nib/objects.nib
-
-     gzip -d < 4.2.0.tgz | tar vxf -
 
-The contrib part of the distribution was folded into the main source tree a
-while ago, so a separate contrib tarball is not required.
+The source for version 4.2.1 is available as a patch relative to 4.2.0.  The
+patch file is 4.2.0-4.2.1.diff.gz.
 
-To format the XFree86 documentation use the latest version of our doctools
-package available as doctools-1.3.tgz.
+The patch should be applied to a clean 4.2.0 source tree, working from the
+directory containing the xc/ directory.  The patch should be applied by run-
+ning:
+
+     gzip -d < 4.2.0-4.2.1.diff.gz | patch -p0 -E
+
+Information about getting the source for 4.2.0 can be found in the README
+file for that version, which can be found on the XFree86 web site
+<URL:http://www.xfree86.org/pub/XFree86/4.2.0/README.html>.
 
 The XFree86 source code can also be accessed via the XFree86 CVS repository.
 Information about accessing this can be found at the CVS page
@@ -176,7 +157,7 @@
 system core dump.  Do not edit  the log file as our developers use it to
 reproduce and debug your problem.
 
-     Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/README.sgml,v 3.119 2002/01/16 19:40:48 dawes Exp $
+     Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/README.sgml,v 3.119.2.1 2002/09/04 03:01:48 dawes Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/README,v 3.116 2002/01/16 20:51:01 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/README,v 3.116.2.1 2002/09/04 03:39:34 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/README.DECtga
diff -u xc/programs/Xserver/hw/xfree86/doc/README.DECtga:3.19 xc/programs/Xserver/hw/xfree86/doc/README.DECtga:3.19.4.1
--- xc/programs/Xserver/hw/xfree86/doc/README.DECtga:3.19	Thu Nov 15 17:37:21 2001
+++ xc/programs/Xserver/hw/xfree86/doc/README.DECtga	Wed Sep  4 03:39:34 2002
@@ -6,7 +6,7 @@
 
 1.  DEC 21030
 
-   o The DEC 21030 is supported by XFree86 4.2.0.  The driver is now par-
+   o The DEC 21030 is supported by XFree86 4.2.1.  The driver is now par-
      tially accelerated.  The built-in graphics on the Multia is supported in
      8-plane mode, and PCI cards with 8 or 16 MB framebuffers are supported
      in 24-plane mode.  TGA2 (aka PowerStorm 3D30/4D20) cards are not cur-
@@ -65,4 +65,4 @@
      Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/DECtga.sgml,v 3.9 2000/03/06 22:59:23 dawes Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.DECtga,v 3.19 2001/11/15 17:37:21 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.DECtga,v 3.19.4.1 2002/09/04 03:39:34 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/README.Darwin
diff -u xc/programs/Xserver/hw/xfree86/doc/README.Darwin:1.8 xc/programs/Xserver/hw/xfree86/doc/README.Darwin:1.8.2.1
--- xc/programs/Xserver/hw/xfree86/doc/README.Darwin:1.8	Thu Dec 20 00:15:41 2001
+++ xc/programs/Xserver/hw/xfree86/doc/README.Darwin	Wed Sep  4 03:39:34 2002
@@ -66,7 +66,7 @@
 
 If you don't feel the need to live on the cutting edge, you can save some
 time and effort by using the precompiled binaries available on the XFree86
-FTP server at <URL:ftp://ftp.xfree86.org/pub/XFree86/4.2.0/binaries/>.  Fol-
+FTP server at <URL:ftp://ftp.xfree86.org/pub/XFree86/4.2.1/binaries/>.  Fol-
 low the instructions in the Install document to install it. This will create
 two new directory trees, /usr/X11R6 and /etc/X11 For Mac OS X Quartz support,
 download the optional Xquartz.tgz tarball. With Quartz support, the XDarwin
@@ -187,4 +187,4 @@
      Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/Darwin.sgml,v 1.9 2001/12/13 07:09:05 torrey Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.Darwin,v 1.8 2001/12/20 00:15:41 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.Darwin,v 1.8.2.1 2002/09/04 03:39:34 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/README.LynxOS
diff -u xc/programs/Xserver/hw/xfree86/doc/README.LynxOS:3.30 xc/programs/Xserver/hw/xfree86/doc/README.LynxOS:3.30.4.1
--- xc/programs/Xserver/hw/xfree86/doc/README.LynxOS:3.30	Thu Nov 15 17:37:22 2001
+++ xc/programs/Xserver/hw/xfree86/doc/README.LynxOS	Wed Sep  4 03:39:34 2002
@@ -1,4 +1,4 @@
-                     README for XFree86 4.2.0 on LynxOS
+                     README for XFree86 4.2.1 on LynxOS
 
                                Thomas Mueller
 
@@ -13,19 +13,19 @@
 
 See the Copyright Notice.
 
-The sources for XFree86 4.2.0 are available by anonymous ftp from:
+The sources for XFree86 4.2.1 are available by anonymous ftp from:
 
-ftp://ftp.XFree86.org/pub/XFree86/4.2.0
+ftp://ftp.XFree86.org/pub/XFree86/4.2.1
 
 Binaries of XFree86 for LynxOS x86 are available from:
 
-ftp://ftp.XFree86.org/pub/XFree86/4.2.0/binaries/LynxOS
+ftp://ftp.XFree86.org/pub/XFree86/4.2.1/binaries/LynxOS
 
 A list of mirror sites is provided by ftp://ftp.XFree86.org/pub/XFree86/MIR-
 RORS
 
 The binaries on the FTP site were built on the latest released LynxOS version
-at the time XFree86 4.2.0 was released. In this case it is `LynxOS x86
+at the time XFree86 4.2.1 was released. In this case it is `LynxOS x86
 3.0.1'. Because of changes made to the object format they don't run on LynxOS
 versions earlier than 3.0.0.
 
@@ -37,7 +37,7 @@
 3.1.0' support has to be considered to be in `alpha state'.  Initial tests
 were performed on LynxOS x86 only!
 
-XFree86 4.2.0 supports LynxOS on the x86 and on the PowerPC platform. X
+XFree86 4.2.1 supports LynxOS on the x86 and on the PowerPC platform. X
 servers are currently available only on the x86 platform. The X server may
 work with some PowerPC platforms supported by LynxOS though this has not
 (yet) been thoroughly tested.
@@ -163,7 +163,7 @@
 3.5  X Server debug diagnostics output and other VT peculiarities
 
 Output made by the XFree86 X on its stdout or stderr will be lost after the
-server switches to graphics mode. The XFree86 4.2.0 server stores its output
+server switches to graphics mode. The XFree86 4.2.1 server stores its output
 in /usr/adm/XFree86.n.log (where n is the screen number).
 
 When the X server is running output made to other consoles will be lost.
@@ -266,4 +266,4 @@
      Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/LynxOS.sgml,v 3.20 2000/06/17 00:27:32 dawes Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.LynxOS,v 3.30 2001/11/15 17:37:22 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.LynxOS,v 3.30.4.1 2002/09/04 03:39:34 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/README.NetBSD
diff -u xc/programs/Xserver/hw/xfree86/doc/README.NetBSD:3.80 xc/programs/Xserver/hw/xfree86/doc/README.NetBSD:3.80.2.1
--- xc/programs/Xserver/hw/xfree86/doc/README.NetBSD:3.80	Wed Jan 16 22:37:23 2002
+++ xc/programs/Xserver/hw/xfree86/doc/README.NetBSD	Wed Sep  4 03:39:34 2002
@@ -1,4 +1,4 @@
-                     README for XFree86 4.2.0 on NetBSD
+                     README for XFree86 4.2.1 on NetBSD
 
 Rich  Murphey, David Dawes, Marc  Wandschneider, Mark  Weaver, Matthieu Herrb
 
@@ -14,10 +14,10 @@
 
 The sources for XFree86 are available by anonymous ftp from:
 
-ftp://ftp.XFree86.org/pub/XFree86/4.2.0
+ftp://ftp.XFree86.org/pub/XFree86/4.2.1
 
 Binaries for NetBSD 1.4 and later are available from:
-ftp://ftp.XFree86.org/pub/XFree86/4.2.0/binaries/NetBSD
+ftp://ftp.XFree86.org/pub/XFree86/4.2.1/binaries/NetBSD
 
 A list of mirror sites is provided by http://www.xfree86.org/MIRRORS.shtml
 
@@ -33,7 +33,7 @@
 
 3.  New OS dependent features
 
-See the Release Notes for non-OS dependent new features in XFree86 4.2.0.
+See the Release Notes for non-OS dependent new features in XFree86 4.2.1.
 
 3.1  New OS dependent features in 4.2.0
 
@@ -111,7 +111,7 @@
 
 5.1  About mouse configuration
 
-XFree86 4.2.0 has support for the mouse driver included in the wscons console
+XFree86 4.2.1 has support for the mouse driver included in the wscons console
 driver introduced by NetBSD 1.4. Specify ``wsmouse'' as the protocol and
 ``/dev/wsmouse0'' as the device in /etc/X11/XF86Config if you're using NetBSD
 1.4 or later with a PS/2 mouse.
@@ -229,14 +229,14 @@
 access to the /dev/mem device when in multi-users mode. But XFree86 servers
 can take advantage (or require) linear access to the display memory.
 
-Most XFree86 4.2.0 card drivers require linear memory access.  There are two
+Most XFree86 4.2.1 card drivers require linear memory access.  There are two
 ways to allow XFree86 to access linear memory:
 
 The first way is to disable the kernel security feature by adding ``option
 INSECURE'' in the kernel configuration file and build a new kernel.
 
 The second way is to install the aperture driver, included in source form in
-xc/programs/Xserver/hw/xfree86/etc/apNetBSD.shar in the XFree86 4.2.0 source
+xc/programs/Xserver/hw/xfree86/etc/apNetBSD.shar in the XFree86 4.2.1 source
 distribution. Unpack it in a new directory of your choice by running:
 
        sh apNetBSD.shar
@@ -380,4 +380,4 @@
      Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/NetBSD.sgml,v 3.63 2002/01/16 22:35:18 herrb Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.NetBSD,v 3.80 2002/01/16 22:37:23 herrb Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.NetBSD,v 3.80.2.1 2002/09/04 03:39:34 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/README.OpenBSD
diff -u xc/programs/Xserver/hw/xfree86/doc/README.OpenBSD:1.30 xc/programs/Xserver/hw/xfree86/doc/README.OpenBSD:1.30.2.1
--- xc/programs/Xserver/hw/xfree86/doc/README.OpenBSD:1.30	Wed Jan 16 22:37:23 2002
+++ xc/programs/Xserver/hw/xfree86/doc/README.OpenBSD	Wed Sep  4 03:39:35 2002
@@ -1,4 +1,4 @@
-                     README for XFree86 4.2.0 on OpenBSD
+                     README for XFree86 4.2.1 on OpenBSD
 
                                Matthieu Herrb
 
@@ -12,13 +12,13 @@
 
 See the Copyright Notice.
 
-The sources for XFree86 4.2.0 are available by anonymous ftp from:
+The sources for XFree86 4.2.1 are available by anonymous ftp from:
 
-ftp://ftp.XFree86.org/pub/XFree86/4.2.0
+ftp://ftp.XFree86.org/pub/XFree86/4.2.1
 
 Binaries for OpenBSD/i386 3.0 and later are available from:
 
-ftp://ftp.XFree86.org/pub/XFree86/4.2.0/binaries/OpenBSD
+ftp://ftp.XFree86.org/pub/XFree86/4.2.1/binaries/OpenBSD
 
 A list of mirror sites is provided by http://www.xfree86.org/MIRRORS.shtml
 
@@ -32,7 +32,7 @@
 
 3.  New OS dependent features
 
-See the Release Notes for non-OS dependent new features in XFree86 4.2.0.
+See the Release Notes for non-OS dependent new features in XFree86 4.2.1.
 
 3.1  New OS dependent features in 4.2
 
@@ -128,7 +128,7 @@
 
 5.1  About mouse configuration
 
-XFree86 4.2.0 has support for the mouse driver included in the new wscons
+XFree86 4.2.1 has support for the mouse driver included in the new wscons
 console driver introduced by OpenBSD-2.9.  Specify ``wsmouse'' as the proto-
 col and ``/dev/wsmouse0'' as the  device in /etc/X11/XF86Config if you're
 using OpenBSD-2.9 or later with a PS/2 or USB mouse.
@@ -309,4 +309,4 @@
      Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/OpenBSD.sgml,v 1.24 2002/01/16 22:35:17 herrb Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.OpenBSD,v 1.30 2002/01/16 22:37:23 herrb Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.OpenBSD,v 1.30.2.1 2002/09/04 03:39:35 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/README.chips
diff -u xc/programs/Xserver/hw/xfree86/doc/README.chips:3.38 xc/programs/Xserver/hw/xfree86/doc/README.chips:3.38.4.1
--- xc/programs/Xserver/hw/xfree86/doc/README.chips:3.38	Thu Nov 15 17:37:22 2001
+++ xc/programs/Xserver/hw/xfree86/doc/README.chips	Wed Sep  4 03:39:35 2002
@@ -7,7 +7,7 @@
 
 1.  Introduction
 
-With the release of XFree86 version 4.2.0, the Chips and Technologies driver
+With the release of XFree86 version 4.2.1, the Chips and Technologies driver
 has been extensively rewritten and contains many new features.  This driver
 must be considered work in progress, and those users wanting stability are
 encouraged to use the older XFree86 3.3.x versions. However this version of
@@ -956,7 +956,7 @@
 
                         startx -- -depth 24 -fbbpp 32   8-8-8 RGB truecolor
 
-            however as XFree86 version 4.2.0 allows 32bpp pixmaps to be used
+            however as XFree86 version 4.2.1 allows 32bpp pixmaps to be used
             with framebuffers operating in 24bpp, this mode of operating will
             cost performance for no gain in functionality.
 
@@ -1030,4 +1030,4 @@
      Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/chips.sgml,v 3.38 2001/10/01 13:44:02 eich Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.chips,v 3.38 2001/11/15 17:37:22 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.chips,v 3.38.4.1 2002/09/04 03:39:35 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/README.mouse
diff -u xc/programs/Xserver/hw/xfree86/doc/README.mouse:1.13 xc/programs/Xserver/hw/xfree86/doc/README.mouse:1.13.4.1
--- xc/programs/Xserver/hw/xfree86/doc/README.mouse:1.13	Thu Nov 15 17:37:23 2001
+++ xc/programs/Xserver/hw/xfree86/doc/README.mouse	Wed Sep  4 03:39:35 2002
@@ -6,7 +6,7 @@
 
 1.  Introduction
 
-This document describes mouse support in XFree86 4.2.0.
+This document describes mouse support in XFree86 4.2.1.
 
 Mouse configuration has often been mysterious task for novice users.  How-
 ever, once you learn several basics, it is straightforward to write the mouse
@@ -928,4 +928,4 @@
      Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/mouse.sgml,v 1.11 2000/03/01 00:25:23 dawes Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.mouse,v 1.13 2001/11/15 17:37:23 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.mouse,v 1.13.4.1 2002/09/04 03:39:35 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/README.s3virge
diff -u xc/programs/Xserver/hw/xfree86/doc/README.s3virge:1.9 xc/programs/Xserver/hw/xfree86/doc/README.s3virge:1.9.2.1
--- xc/programs/Xserver/hw/xfree86/doc/README.s3virge:1.9	Mon Jan  7 22:07:16 2002
+++ xc/programs/Xserver/hw/xfree86/doc/README.s3virge	Wed Sep  4 03:39:35 2002
@@ -6,7 +6,7 @@
 
 1.  Supported hardware
 
-The s3virge driver in XFree86 4.2.0 supports the S3 ViRGE, ViRGE DX, GX, GX2,
+The s3virge driver in XFree86 4.2.1 supports the S3 ViRGE, ViRGE DX, GX, GX2,
 MX, MX+, and VX chipsets.  It also supports Trio3D and Trio3D/2x chips.  A
 majority of testing is done on ViRGE DX chips, making them the most stable to
 date.  This release has some stabilization fixes for MX, GX2 and Trio3D, and
@@ -62,4 +62,4 @@
      Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/s3virge.sgml,v 1.5 2001/12/21 21:01:57 dawes Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.s3virge,v 1.9 2002/01/07 22:07:16 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/README.s3virge,v 1.9.2.1 2002/09/04 03:39:35 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/RELNOTES
diff -u xc/programs/Xserver/hw/xfree86/doc/RELNOTES:3.104 xc/programs/Xserver/hw/xfree86/doc/RELNOTES:3.104.2.1
--- xc/programs/Xserver/hw/xfree86/doc/RELNOTES:3.104	Thu Jan 17 23:27:44 2002
+++ xc/programs/Xserver/hw/xfree86/doc/RELNOTES	Wed Sep  4 03:39:35 2002
@@ -1,23 +1,23 @@
-                     Release Notes for XFree86[tm] 4.2.0
+                     Release Notes for XFree86[tm] 4.2.1
 
                           The XFree86 Project, Inc
 
-                               17 January 2002
+                              3 September 2002
 
                                   Abstract
 
      This document contains some information about features present in
-     XFree86 4.2.0 and their status.
+     XFree86 4.2.1 and their status.
 
 1.  Introduction to the 4.x Release Series
 
-XFree86 4.0 was the first official release of the new XFree86 4 series.  The
-current release (4.2.0) is the latest in that series.  XFree86 4 represents a
-significant redesign of the XFree86 X server.  Not all of the hardware
-drivers from 3.3.x have been ported to 4.x yet, but conversely, 4.x has some
-hardware support not present in 3.3.x.  Our Driver Status document summarizes
-how the hardware driver support compares between 3.3.6 and 4.2.0.  Please
-check there first before downloading 4.2.0.
+XFree86 4.0 was the first official release of the new XFree86 4 series.
+XFree86 4.2.1 is the first update to 4.2.0, which is the latest full release
+in that series.  XFree86 4 represents a significant redesign of the XFree86 X
+server.  Not all of the hardware drivers from 3.3.x have been ported to 4.x
+yet, but conversely, 4.x has some hardware support not present in 3.3.x.  Our
+Driver Status document summarizes how the hardware driver support compares
+between 3.3.6 and 4.2.1.  Please check there first before downloading 4.2.1.
 
 The 4.0.1 release introduced a new graphical configuration tool, "xf86cfg",
 and a text mode interface was added to it for the 4.0.2 release.  It is work
@@ -28,7 +28,7 @@
 for some hardware.  To try it out, just run (as root) "XFree86 -configure".
 Each of these configuration options will give you a reasonable starting point
 for a suitable configuration file.  We've put some effort into documenting
-the 4.2.0 config file format, and you can find that information in the
+the 4.2.1 config file format, and you can find that information in the
 XF86Config manual page. Check that, the driver manual pages and the related
 documentation for further information.
 
@@ -37,16 +37,48 @@
 save you some time and help you figure out which of the binary releases you
 need.
 
-The next section describes what is new in the latest version (4.2.0) compared
-with the previous full release (4.1.0).  The other sections below describe
-some of the new features and changes between 3.3.x and 4.0.  There are lot's
-of new features, and we definitely don't have enough space to cover them all
-here.
+The next sections describe what has changed in the update release(s) as well
+as what is new in the latest full release (4.2.0).  The other sections below
+describe some of the new features and changes between 3.3.x and 4.0.  There
+are lot's of new features, and we definitely don't have enough space to cover
+them all here.
 
-2.  Summary of new features in 4.2.0.
+2.  Summary of updates in 4.2.1.
 
-2.1  Video Driver Enhancements
+2.1  Security
 
+   o  Fix a zlib bug that may have security implications on some platforms.
+
+   o  MIT-SHM update to not access SHM segments that the client doesn't have
+     sufficient privileges to access.
+
+   o  Fix an Xlib problem that made it possible to load (and execute) arbi-
+     trary code in privileged clients.
+
+2.2  Other
+
+   o Revert the ATI driver's composite sync default to a safer value.
+
+   o Fix Xlib's modular i18n support on Solaris.
+
+   o Fix an X server crash when printing some types of modes.
+
+   o Startx and xon script fixes.
+
+   o Fix a colormap bug with 24+8 overlay mode.
+
+   o Update XDarwin support for the Jaguar release.
+
+   o Xaw bug fix.
+
+   o Fix a vesa driver floating point exception.
+
+   o Fix Emulate3Buttons for wsmouse protocol on NetBSD and OpenBSD.
+
+3.  Summary of new features in 4.2.0.
+
+3.1  Video Driver Enhancements
+
    o  An s3 driver is added, which provides support for many of the older
      non-ViRGE and non-Savage S3 chipsets.
 
@@ -95,7 +127,7 @@
      newport, s3virge, siliconmotion, sis, tdfx, tseng, vesa, and vga
      drivers.
 
-2.2  Input Driver Enhancements
+3.2  Input Driver Enhancements
 
    o  The mouse driver now has support for mouse wheel emulation.
 
@@ -113,7 +145,7 @@
 
    o  Added hyperpen input driver.
 
-2.3  X Server and Extension Updates
+3.3  X Server and Extension Updates
 
    o  Resynced with X.Org's X11R6.6.
 
@@ -135,7 +167,7 @@
 
    o  A fatal bug XVideo Xineramification bug is fixed.
 
-2.4  Client and Library Updates
+3.4  Client and Library Updates
 
    o  FreeType2 updated to version 2.0.6.
 
@@ -149,11 +181,11 @@
 
    o  Sample xtrap clients added.
 
-2.5  I18N and Font Updates
+3.5  I18N and Font Updates
 
    o  New Luxi scalable fonts (TrueType and Type 1) from Bigelow & Holmes.
      These fonts are original designs by Kris Holmes and Charles Bigelow.
-     See below (section 4.22, page 1) for further information.
+     See below (section 5.22, page 1) for further information.
 
    o  More locale/international keyboards supported.
 
@@ -174,7 +206,7 @@
      support to any Unicode terminal, notably xterm.  Use of luit is still
      experimental in this release.
 
-2.6  OS Support Updates
+3.6  OS Support Updates
 
    o  Build problems on both QNX4 and QNX6 are fixed.
 
@@ -223,11 +255,11 @@
 <URL:http://cvsweb.xfree86.org/cvsweb/xc/pro-
 grams/Xserver/hw/xfree86/CHANGELOG?rev=HEAD>.
 
-3.  Drivers
+4.  Drivers
 
-3.1  Video Drivers
+4.1  Video Drivers
 
-XFree86 4.2.0 includes the following video drivers:
+XFree86 4.2.1 includes the following video drivers:
 
 +--------------+--------------------------+----------------------------------+
 |Driver Name   | Description              | Further Information              |
@@ -281,9 +313,9 @@
 Darwin/Mac OS X uses IOKit drivers and does not use the module loader drivers
 listed above. Further information can be found in README.Darwin.
 
-XFree86 4.2.0 includes the following input drivers:
+XFree86 4.2.1 includes the following input drivers:
 
-3.2  Input Drivers
+4.2  Input Drivers
 
           +------------+--------------------+---------------------+
           |Driver Name | Description        | Further Information |
@@ -306,21 +338,21 @@
           |wacom       | Wacom tablets      | wacom(4)            |
           +------------+--------------------+---------------------+
 
-4.  Overview of XFree86 4.x.
+5.  Overview of XFree86 4.x.
 
 Unlike XFree86 3.3.x where there are multiple X server binaries, each of
-which drive different hardware, XFree86 4.2.0 has a single X server binary
+which drive different hardware, XFree86 4.2.1 has a single X server binary
 called XFree86.  This binary can either have one or more video drivers linked
 in statically, or, more usually, dynamically load the video drivers and other
 modules that are needed.
 
-XFree86 4.2.0 has X server support for most UNIX(R) and UNIX-like operating
+XFree86 4.2.1 has X server support for most UNIX(R) and UNIX-like operating
 systems on Intel/x86 platforms, plus support for Linux on Alpha, PowerPC,
 IA-64, Sparc, and Mips platforms, and for Darwin on PowerPC.  Work on support
 for additional architectures and operating systems is in progress, and is
 planned for future releases.
 
-4.1  Loader and Modules
+5.1  Loader and Modules
 
 The XFree86 X server has a built-in run-time loader, donated by Metro Link
 <URL:http://www.metrolink.com>.  This loader can load normal object files and
@@ -336,7 +368,7 @@
 the future we plan to take advantage of this to provide more frequent driver
 module updates in between major releases.
 
-The loader in version 4.2.0 has support for Intel (x86), Alpha and PowerPC
+The loader in version 4.2.1 has support for Intel (x86), Alpha and PowerPC
 platforms.  It also has preliminary support for Sparc platforms.
 
 The X server makes use of modules for video drivers, X server extensions,
@@ -358,7 +390,7 @@
      hope to have a mechanism for signing/verifying the modules that we
      provide available in a future release.
 
-4.2  Configuration File
+5.2  Configuration File
 
 The X server configuration file format has been extended to handle some of
 the new functionality.  The xf86config utility can be used to generate a
@@ -524,7 +556,7 @@
 and /usr/X11R6/etc/X11 being added.  The full search path details are docu-
 mented in the XF86Config manual page.
 
-4.3  Command Line Options
+5.3  Command Line Options
 
 The following new X server command line options have been added:
 
@@ -638,13 +670,13 @@
 A more complete list of XFree86 X server command line options can be found in
 the XFree86(1) manual page.
 
-4.4  XAA
+5.4  XAA
 
 The XFree86 Acceleration Architecture (XAA) has been completely rewritten
 from scratch for XFree86 4.x.  Most drivers implement acceleration by making
 use of the XAA module.
 
-4.5  Multi-head
+5.5  Multi-head
 
 Some multi-head configurations are supported in XFree86 4.x, primarily with
 multiple PCI/AGP cards.  However, this is an area that is still being worked
@@ -660,7 +692,7 @@
 which card is the primary card (either by using a different PCI slot, or by
 changing the system BIOS's preference for the primary card).
 
-4.6  Xinerama
+5.6  Xinerama
 
 Xinerama is an X server extension that allows multiple physical screens to
 behave as a single screen.  With traditional multi-head in X11, windows can-
@@ -682,14 +714,14 @@
      an issue that needs to be dealt with in the individual window managers,
      and isn't specifically an XFree86 problem.
 
-4.7  DGA version 2
+5.7  DGA version 2
 
-DGA 2.0 is included in 4.2.0, but is not implemented by all drivers.  Prelim-
+DGA 2.0 is included in 4.2.1, but is not implemented by all drivers.  Prelim-
 inary documentation for the client libraries can be found in the README.DGA
 document.  A good degree of backwards compatibility with version 1.0 is pro-
 vided.
 
-4.8  DDC
+5.8  DDC
 
 The VESA(R) Display Data Channel (DDC[tm]) standard allows the monitor to
 tell the video card (or on some cases the computer directly) about itself;
@@ -705,7 +737,7 @@
 lines yet).  For some drivers, the X server's new -configure option uses the
 DDC information when generating the config file.
 
-4.8.1  Changed behavior caused by DDC.
+5.8.1  Changed behavior caused by DDC.
 
 Several drivers uses DDC information to set the screen size and pitch.  This
 can be overridden by explicitly resetting it to the and non-DDC default value
@@ -713,7 +745,7 @@
 appropriate screen dimensions with the "DisplaySize" keyword in the "Monitor"
 section of the config file.
 
-4.9  GLX and the Direct Rendering Infrastructure (DRI)
+5.9  GLX and the Direct Rendering Infrastructure (DRI)
 
 Precision Insight <URL:http://www.precisioninsight.com> was provided with
 funding and support from Red Hat <URL:http://www.redhat.com>, SGI
@@ -733,7 +765,7 @@
 drivers can be found at the DRI Project <URL:http://dri.sourceforge.net> on
 SourceForge <URL:http://www.sourceforge.net>.
 
-4.10  XVideo Extension (Xv)
+5.10  XVideo Extension (Xv)
 
 The XVideo extension is supported in XFree86 4.x.  An XvQueryPortAttributes
 function has been added as well as support for XvImages.  XvImages are XIm-
@@ -741,7 +773,7 @@
 through shared memory segments.  This allows clients to display YUV data with
 high quality hardware scaling and filtering.
 
-4.11  X Rendering Extension (Render)
+5.11  X Rendering Extension (Render)
 
 The X Rendering extension provides a 2D rendering model that more closely
 matches application demands and hardware capabilities.  It provides a render-
@@ -753,7 +785,7 @@
 overlays and other image operations not possible with the core X rendering
 system.
 
-XFree86 4.2.0 provides a partial implementation of Render sufficient for
+XFree86 4.2.1 provides a partial implementation of Render sufficient for
 drawing anti-aliased text and image composition.  Still to be implemented are
 geometric primitives and affine transformation of images.
 
@@ -763,7 +795,7 @@
 access to the available font information while still providing hardware
 acceleration.  The Xft library provides font access for Render applications.
 
-4.11.1  The Xft Library
+5.11.1  The Xft Library
 
 On the client side, the Xft library provides access to fonts for applications
 using the FreeType library, version 2.  FreeType currently supports Type1 and
@@ -786,12 +818,12 @@
 cated font aliasing mechanism.  Documentation for that file is included in
 the Xft man page.
 
-4.11.2  FreeType support in Xft
+5.11.2  FreeType support in Xft
 
-XFree86 4.2.0 includes sources for FreeType version 2.0.1, and, by default,
+XFree86 4.2.1 includes sources for FreeType version 2.0.6, and, by default,
 they are built and installed automatically.
 
-If you prefer, you can configure XFree86 4.2.0 to use an existing Freetype2
+If you prefer, you can configure XFree86 4.2.1 to use an existing Freetype2
 installation by telling XFree86 not to build the internal copy and indicating
 where that external version has been installed. Edit (or create) con-
 fig/cf/host.def to include:
@@ -806,28 +838,25 @@
 ing and installing FreeType can be found in the INSTALL file included with
 the FreeType release.
 
-4.11.3  Application Support For Anti-Aliased Text
+5.11.3  Application Support For Anti-Aliased Text
 
-Only three applications have been modified in XFree86 4.2.0 to work with the
+Only three applications have been modified in XFree86 4.2.1 to work with the
 Render extension and the Xft and FreeType libraries to provide anti-aliased
 text.  Xterm, xditview and x11perf.  Migration of other applications may
 occur in future releases.
 
-By default, xterm uses core fonts through the standard core API.  It has two
-command line options and associated resources to direct it to use Xft
-instead:
+By default, xterm uses core fonts through the standard core API.  It has a
+command line option and associated resource to direct it to use Xft instead:
 
    o -fa family / .VT100.faceName: family.  Selects the font family to use.
 
-   o -fs pointsize / .VT100.faceSize: pointsize.  Selects the pointsize.
-
 Xditview will use Xft instead of the core API by default.  X11perf includes
 tests to measure the performance of text rendered in three ways, anti-
 aliased, anti-aliased with sub-pixel sampling and regular chunky text, but
 through the Render extension, a path which is currently somewhat slower than
 core text.
 
-4.12  Other extensions
+5.12  Other extensions
 
 The XFree86-Misc extension has not been fully ported to the new server archi-
 tecture yet.  This should be completed in a future release.
@@ -840,7 +869,7 @@
 version of the extension is provided.  The missing parts of this extension
 and some new features should be completed in a future release.
 
-4.13  Xaw
+5.13  Xaw
 
 Two versions of the Xaw library are provided with XFree86 4.x. A version with
 bug fixes and a few binary compatible improvements and a new version with
@@ -899,11 +928,11 @@
    o Several bugs were fixed in the text code, while some code was rewritten
      from scratch.
 
-4.14  Xpm
+5.14  Xpm
 
 Version 3.4k of the Xpm (X pixmap) library is now integrated into XFree86.
 
-4.15  xedit
+5.15  xedit
 
 Xedit have been changed to use most of the new features added to the new ver-
 sion of the Xaw library, and some xedit only features were added. Emacs users
@@ -942,18 +971,18 @@
 
         o C-mode: this mode is expected to be stable, and fully usable.
 
-4.16  Font support
+5.16  Font support
 
 Details about the font support in XFree86 4.x can be found in the
 README.fonts document.
 
-4.17  TrueType support
+5.17  TrueType support
 
 XFree86 4.x comes with two TrueType backends, known as `xfsft' (the
 "freetype" module) and `X-TrueType' (the "xtt" module).  Both of these back-
 ends are based on the FreeType library.
 
-4.18  CID font support
+5.18  CID font support
 
 Support for CID-keyed fonts is included in XFree86 4.x.  The CID-keyed font
 format was designed by Adobe Systems <URL:http://www.adobe.com> for fonts
@@ -961,7 +990,7 @@
 by SGI <URL:http://www.sgi.com>.  See the LICENSE document for a copy of the
 CID Font Code Public License.
 
-4.19  Internationalisation of the scalable font backends
+5.19  Internationalisation of the scalable font backends
 
 XFree86 4.x has a ``fontenc'' layer to allow the scalable font backends to
 use a common method of font re-encoding.  This re-encoding makes it possible
@@ -970,14 +999,14 @@
 TrueType backend.  The `X-TrueType' version of the TrueType backend uses a
 different re-encoding method based on loadable encoding modules.
 
-4.20  Large font optimisation
+5.20  Large font optimisation
 
 The glyph metrics array, which all the X clients using a particular font have
 access to, is placed in shared memory, so as to reduce redundant memory con-
 sumption.  For non-local clients, the glyph metrics array is transmitted in a
 compressed format.
 
-4.21  Unicode/ISO 10646 support
+5.21  Unicode/ISO 10646 support
 
 What is included in 4.x:
 
@@ -1010,7 +1039,7 @@
    o Both the xfsft (the "freetype" module) and the X-TrueType (the "xtt"
      module) TrueType font backends support Unicode-encoded fonts.
 
-4.22  Luxi fonts from Bigelow and Holmes
+5.22  Luxi fonts from Bigelow and Holmes
 
 XFree86 now includes the ``Luxi'' family of Type 1 fonts and TrueType fonts.
 This family consists of the fonts ``Luxi Serif'', ``Luxi Sans'' and
@@ -1035,7 +1064,7 @@
 <design@bigelowandholmes.com> or <info@urwpp.de>, or consult the URW++ web
 site <URL:http://www.urwpp.de>.
 
-4.23  Directory rearrangements
+5.23  Directory rearrangements
 
 Some changes to the installed XFree86 directory structure have been imple-
 mented for 4.x.  One important change is a modified search path for the X
@@ -1046,7 +1075,7 @@
 located under the appropriate subdirectories of /var, again with the relevant
 symbolic links in the old location.
 
-     Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/RELNOTES.sgml,v 1.70 2002/01/17 18:14:59 dawes Exp $
+     Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/RELNOTES.sgml,v 1.70.2.2 2002/09/04 03:01:48 dawes Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/RELNOTES,v 3.104 2002/01/17 23:27:44 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/RELNOTES,v 3.104.2.1 2002/09/04 03:39:35 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/Status
diff -u xc/programs/Xserver/hw/xfree86/doc/Status:1.29 xc/programs/Xserver/hw/xfree86/doc/Status:1.29.2.1
--- xc/programs/Xserver/hw/xfree86/doc/Status:1.29	Wed Jan 16 20:51:04 2002
+++ xc/programs/Xserver/hw/xfree86/doc/Status	Wed Sep  4 03:39:36 2002
@@ -1,4 +1,4 @@
-                     Driver Status for XFree86[tm] 4.2.0
+                     Driver Status for XFree86[tm] 4.2.1
 
                           The XFree86 Project, Inc
 
@@ -7,7 +7,7 @@
                                   Abstract
 
      This document provides information about the status of the driver
-     and hardware support in XFree86 4.2.0 compared with that in XFree86
+     and hardware support in XFree86 4.2.1 compared with that in XFree86
      3.3.6.  Please send updates for this document to
      <fixes@xfree86.org>.  Please do not send requests for information
      or support to that address (they will not be answered).
@@ -15,10 +15,10 @@
 1.  Introduction
 
 This document contains one section per vendor (organised alphabetically) for
-each chipset family that is supported in XFree86 3.3.6 or XFree86 4.2.0.  It
+each chipset family that is supported in XFree86 3.3.6 or XFree86 4.2.1.  It
 includes information about the status of the drivers and the hardware they
 support, including a comparison of the level of support between versions
-3.3.6 and 4.2.0.  Unless otherwise stated, hardware is classified as "sup-
+3.3.6 and 4.2.1.  Unless otherwise stated, hardware is classified as "sup-
 ported" if its driver provides basic 2D support.  Support for additional fea-
 tures may or may not be present.
 
@@ -27,9 +27,9 @@
 compile time.  In other cases, X servers for specific chips (or families of
 chips) are provided (such as XF86_AGX, XF86_Mach64, etc.).
 
-In XFree86 4.2.0, there is only one X server, called "XFree86", which can
+In XFree86 4.2.1, there is only one X server, called "XFree86", which can
 load driver modules at runtime.  Thus there is no specific mention of a
-server binary when 4.2.0 is discussed; only the XFree86 server is used.
+server binary when 4.2.1 is discussed; only the XFree86 server is used.
 Third-party vendors (often the manufacturers of various video chipsets) may
 provide their own drivers for the XFree86 server, but these third-party mod-
 ules are beyond the scope of this document.
@@ -45,7 +45,7 @@
             Support (including acceleration) for Voodoo Banshee and Voodoo3
             cards is provided by the XF86_SVGA server with the tdfx driver.
 
-      4.2.0:
+      4.2.1:
             Support for Voodoo Graphics and Voodoo2 chips is provided by the
             "glide" driver (this requires version 2.x of the Glide library,
             which is not part of the XFree86 distribution).
@@ -54,9 +54,9 @@
             Voodoo4, and Voodoo5 is provided by the "tdfx" driver.
 
       Summary:
-            All hardware supported in 3.3.6 is also supported in 4.2.0.  The
+            All hardware supported in 3.3.6 is also supported in 4.2.1.  The
             Voodoo Graphics, Voodoo2, Voodoo4, and Voodoo5 are supported only
-            in 4.2.0.
+            in 4.2.1.
 
 3.  3Dlabs
 
@@ -66,16 +66,16 @@
             RAMDACs), Permedia with IBM RGB526 RAMDAC, and Permedia 2, 2a, 2v
             is provided by the XF86_3DLabs server.
 
-      4.2.0:
+      4.2.1:
             Support (including acceleration) for the Permedia series (includ-
             ing 1, 2, 2a, 2v, 3, and 4) and GLINT series (including 300SX,
             500TX, MX, R3 and R4) with the Gamma, Gamma2 or Delta coprocessor
             is provided by the "glint" driver.
 
       Summary:
-            All hardware supported in 3.3.6 is also supported in 4.2.0.  The
+            All hardware supported in 3.3.6 is also supported in 4.2.1.  The
             Permedia 3, Permedia 4, GLINT R3, GLINT R4 and Gamma2 are sup-
-            ported only in 4.2.0.
+            ported only in 4.2.1.
 
 4.  Alliance
 
@@ -83,15 +83,15 @@
             Support (including acceleration) for the AT24, AP6422, AT3D is
             provided by the XF86_SVGA server with the apm driver.
 
-      4.2.0:
+      4.2.1:
             Support (including acceleration) for the AT24, AT25 and AT3D is
             provided by the "apm" driver.  This driver currently has only
             incomplete support for the AP6422.
 
       Summary:
-            The AP6422 is supported in 3.3.6 but not fully in 4.2.0.  All
-            other hardware supported in 3.3.6 is also supported in 4.2.0.
-            The AT25 is supported only in 4.2.0.
+            The AP6422 is supported in 3.3.6 but not fully in 4.2.1.  All
+            other hardware supported in 3.3.6 is also supported in 4.2.1.
+            The AT25 is supported only in 4.2.1.
 
 5.  ARK Logic
 
@@ -100,12 +100,12 @@
             and ARK2000MT is provided by the XF86_SVGA server with the ark
             driver.
 
-      4.2.0:
+      4.2.1:
             Support (including acceleration) for the ARK1000PV, ARK2000PV,
             and ARK2000MT is provided by the "ark" driver.
 
       Summary:
-            All hardware supported in 3.3.6 is also supported in 4.2.0.
+            All hardware supported in 3.3.6 is also supported in 4.2.1.
 
 6.  ATI
 
@@ -123,13 +123,13 @@
             driver.  Accelerated support is provided for the Rage 128 chips
             by the XF86_SVGA server with the r128 driver.
 
-      4.2.0:
+      4.2.1:
             Accelerated support is provided for Mach64, Rage, Rage 128 and
             Radeon chips by the "ati" driver, as is unaccelerated support for
             all of the others except the Mach8 and some early Mach32 chips.
 
       Summary:
-            All hardware supported in 3.3.6 is also supported in 4.2.0 except
+            All hardware supported in 3.3.6 is also supported in 4.2.1 except
             for Mach8 and some old Mach32 chips.
 
 7.  Avance Logic
@@ -141,12 +141,12 @@
             the others.  These drivers reportedly work, but they have no
             maintainer.
 
-      4.2.0:
+      4.2.1:
             No Avance Logic chips are supported because the old drivers have
             not been ported.
 
       Summary:
-            No Avance Logic chips are supported in 4.2.0.
+            No Avance Logic chips are supported in 4.2.1.
 
 8.  Chips and Technologies
 
@@ -155,13 +155,13 @@
             65545, 65546, 65548, 65550, 65554, 65555, 68554, 69000, 64200 and
             64300 is provided by the XF86_SVGA server with the chips driver.
 
-      4.2.0:
+      4.2.1:
             Support (accelerated) for the 65520, 65525, 65530, 65535, 65540,
             65545, 65546, 65548, 65550, 65554, 65555, 68554, 69000, 64200 and
             64300 is provided by the "chips" driver.
 
       Summary:
-            All hardware supported in 3.3.6 is also supported in 4.2.0.
+            All hardware supported in 3.3.6 is also supported in 4.2.1.
 
 9.  Cirrus Logic
 
@@ -173,13 +173,13 @@
             7541, 7542, 7543, 7548, 7555 and 7556 is provided by the
             XF86_SVGA server with the cirrus driver.
 
-      4.2.0:
+      4.2.1:
             Support (accelerated) for the Alpine (5430, 5434, 5436, 5446,
             5480, 7548), and Laguna (5462, 5464, 5465) chips is provided by
             the "cirrus" driver.
 
       Summary:
-            The following chips are supported in 3.3.6 but not in 4.2.0:
+            The following chips are supported in 3.3.6 but not in 4.2.1:
             6410, 6412, 6420, 6440, 5420, 5422, 5424, 5426, 5428, 5429, 6205,
             6215, 6225, 6235, 7541, 7542, 7543, 7555 and 7556.
 
@@ -195,7 +195,7 @@
             24 plane 3D chips (on Alpha platforms) is provided by the
             XF86_TGA server.
 
-      4.2.0:
+      4.2.1:
             No support exists for the Compaq AVGA (its driver hasn't been
             ported).
 
@@ -204,8 +204,8 @@
             the "tga" driver.
 
       Summary:
-            No Compaq AVGA chips are supported in 4.2.0.  DEC TGA support is
-            equivalent in both 3.3.6 and 4.2.0.
+            No Compaq AVGA chips are supported in 4.2.1.  DEC TGA support is
+            equivalent in both 3.3.6 and 4.2.1.
 
 11.  Cyrix
 
@@ -213,13 +213,13 @@
             Support (accelerated) for the Cyrix MediaGX is provided by the
             XF86_SVGA server with the cyrix driver.
 
-      4.2.0:
-            The 3.3.6 driver has been ported to 4.2.0, including acceleration
+      4.2.1:
+            The 3.3.6 driver has been ported to 4.2.1, including acceleration
             support, and is provided by the "cyrix" driver.  Feedback is
             wanted.
 
       Summary:
-            Cyrix MediaGX users are encouraged to test its support in 4.2.0.
+            Cyrix MediaGX users are encouraged to test its support in 4.2.1.
 
 12.  Epson
 
@@ -227,12 +227,12 @@
             Support (accelerated) for the Epson SPC8110 is provided by the
             XF86_SVGA server with the spc8100 driver.
 
-      4.2.0:
+      4.2.1:
             No Epson chips are supported, because the old driver has not been
             ported.
 
       Summary:
-            No Epson chips are supported in 4.2.0.
+            No Epson chips are supported in 4.2.1.
 
 13.  Genoa
 
@@ -242,12 +242,12 @@
             because we don't have any recent test reports, and this driver
             has no maintainer.
 
-      4.2.0:
+      4.2.1:
             No Genoa chips are supported, because the old driver has not been
             ported.
 
       Summary:
-            No Genoa chips are supported in 4.2.0.
+            No Genoa chips are supported in 4.2.1.
 
 14.  IBM
 
@@ -262,7 +262,7 @@
             Support for the IBM XGA-2 chip is provided by the XF86_AGX
             server.
 
-      4.2.0:
+      4.2.1:
             Support for the standard IBM VGA chip (and compatibles) is pro-
             vided by the "vga" driver.
 
@@ -271,7 +271,7 @@
 
       Summary:
             The standard VGA core is supported in both versions, but there is
-            no support for the 8514/A or XGA-2 in 4.2.0.
+            no support for the 8514/A or XGA-2 in 4.2.1.
 
 15.  IIT
 
@@ -279,12 +279,12 @@
             Support (accelerated) for the AGX-016, AGX-015 and AGX-014 is
             provided by the XF86_AGX server.
 
-      4.2.0:
+      4.2.1:
             No IIT chips are supported, because the old driver has not been
             ported.
 
       Summary:
-            No IIT chips are supported in 4.2.0.
+            No IIT chips are supported in 4.2.1.
 
 16.  Integrated Micro Solutions (IMS)
 
@@ -292,12 +292,12 @@
             Support (accelerated) for the IMS Twin Turbo 128 and Twin Turbo
             3D is provided by the XF86_SVGA server with the imstt driver.
 
-      4.2.0:
+      4.2.1:
             Support (accelerated) for the IMS Twin Turbo 128 and Twin Turbo
             3D is provided by the "imstt" driver.
 
       Summary:
-            All hardware supported in 3.3.6 is also supported in 4.2.0.
+            All hardware supported in 3.3.6 is also supported in 4.2.1.
 
 17.  Intel
 
@@ -308,7 +308,7 @@
             requires the agpgart.o kernel module in order to use modes that
             require more than 1MB of video memory.
 
-      4.2.0:
+      4.2.1:
             Support (accelerated) for the Intel i740 is provided by the
             "i740" driver, and support for the Intel i810 (including
             i810-dc100 and i810e), i815, and i830 is provided by the "i810"
@@ -320,7 +320,7 @@
             The i740 and and original i810 are supported in both versions,
             but the i810 is supported only on Linux/x86 and recent
             FreeBSD/i386 platforms at present.  Support for later versions of
-            the i810 chipset, such as the i815, exists only in 4.2.0.
+            the i810 chipset, such as the i815, exists only in 4.2.1.
 
 18.  Matrox
 
@@ -329,14 +329,14 @@
             (Mystique), MGA2164W (Millennium II) (PCI and AGP), G100, G200
             and G400 is provided by the XF86_SVGA server with the mga driver.
 
-      4.2.0:
+      4.2.1:
             Support (accelerated) for the MGA2064W (Millennium I), MGA1064SG
             (Mystique), MGA2164W (Millennium II) (PCI and AGP), G100, G200,
             G400, G450, and G550 is provided by the "mga" driver.
 
       Summary:
-            All hardware supported in 3.3.6 is also supported in 4.2.0.  The
-            G450 and G550 are supported only in 4.2.0.
+            All hardware supported in 3.3.6 is also supported in 4.2.1.  The
+            G450 and G550 are supported only in 4.2.1.
 
 19.  Micronix, Inc. (MX)
 
@@ -346,12 +346,12 @@
             is unknown because we don't have any recent test reports, and
             this driver has no maintainer.
 
-      4.2.0:
+      4.2.1:
             No MX chips are supported, because the old driver has not been
             ported.
 
       Summary:
-            No MX chips are supported in 4.2.0.
+            No MX chips are supported in 4.2.1.
 
 20.  NCR
 
@@ -360,12 +360,12 @@
             XF86_SVGA server and the ncr77c22 driver.  The status of this
             support is unknown because we don't have any recent test reports.
 
-      4.2.0:
+      4.2.1:
             No NCR chips are supported, because the old driver has not been
             ported.
 
       Summary:
-            No NCR chips are supported in 4.2.0.
+            No NCR chips are supported in 4.2.1.
 
 21.  NeoMagic
 
@@ -374,14 +374,14 @@
             NM2097, NM2160 and NM2200 chipsets is provided by the XF86_SVGA
             server with the neo driver.
 
-      4.2.0:
+      4.2.1:
             Support (accelerated) for the NeoMagic NM2070, NM2090, NM2093,
             NM2097, NM2160, NM2200, NM2230, NM2360 and NM2380 chipsets is
             provided by the "neomagic" driver.
 
       Summary:
-            All hardware supported in 3.3.6 is also supported in 4.2.0.  The
-            NM2230 and later chips are supported only in 4.2.0.
+            All hardware supported in 3.3.6 is also supported in 4.2.1.  The
+            NM2230 and later chips are supported only in 4.2.1.
 
 22.  NVIDIA
 
@@ -390,15 +390,15 @@
             (Ultra, Vanta, M64), GeForce (DDR, 256) and Quadro is provided by
             the XF86_SVGA server and the nv driver.
 
-      4.2.0:
+      4.2.1:
             Support (accelerated) for the Riva 128, 128ZX, TNT, TNT2 (Ultra,
             Vanta, M64), GeForce (DDR, 256), Quadro, GeForce2 (GTS, Ultra,
             MX), GeForce3, and Quadro2 is provided by the "nv" driver.
 
       Summary:
             All chipsets supported in 3.3.6 except the NV1 are also supported
-            in 4.2.0.  Support for the newer chips listed above (starting
-            with the GeForce2) is available only in 4.2.0.
+            in 4.2.1.  Support for the newer chips listed above (starting
+            with the GeForce2) is available only in 4.2.1.
 
 23.  Number Nine
 
@@ -406,12 +406,12 @@
             Support (accelerated) for the Imagine 128, Ticket 2 Ride, Revolu-
             tion 3D and Revolution IV is provided by the XF86_I128 server.
 
-      4.2.0:
+      4.2.1:
             Support (accelerated) for the Imagine 128, Ticket 2 Ride, Revolu-
             tion 3D and Revolution IV is provided by the "i128" driver.
 
       Summary:
-            All hardware supported in 3.3.6 is also supported in 4.2.0.
+            All hardware supported in 3.3.6 is also supported in 4.2.1.
 
 24.  Oak Technologies, Inc.
 
@@ -420,12 +420,12 @@
             acceleration) is provided by the XF86_SVGA server and the oak
             driver.
 
-      4.2.0:
+      4.2.1:
             No Oak chips are supported, because the old driver has not been
             ported.
 
       Summary:
-            No Oak chips are supported in 4.2.0.
+            No Oak chips are supported in 4.2.1.
 
 25.  Paradise/Western Digital
 
@@ -436,12 +436,12 @@
             port for some of these chipsets is uncertain because we don't
             have any recent test reports, and this driver has no maintainer.
 
-      4.2.0:
+      4.2.1:
             No Paradise/Western Digital chips are supported, because the old
             driver has not been ported.
 
       Summary:
-            No Paradise/Western Digital chips are supported in 4.2.0.
+            No Paradise/Western Digital chips are supported in 4.2.1.
 
 26.  RealTek
 
@@ -451,12 +451,12 @@
             unknown because we don't have any recent test reports, and this
             driver has no maintainer.
 
-      4.2.0:
+      4.2.1:
             No RealTek chips are supported, because the old driver has not
             been ported.
 
       Summary:
-            No RealTek chips are supported in 4.2.0.
+            No RealTek chips are supported in 4.2.1.
 
 27.  Rendition/Micron
 
@@ -464,12 +464,12 @@
             Support for the Verite 1000, 2100 and 2200 is provided by the
             XF86_SVGA server with the rendition driver.
 
-      4.2.0:
+      4.2.1:
             Support for the Verite 1000, 2100 and 2200 is provided by the
             "rendition" driver.
 
       Summary:
-            All hardware supported in 3.3.6 is also supported in 4.2.0.
+            All hardware supported in 3.3.6 is also supported in 4.2.1.
 
 28.  S3
 
@@ -486,7 +486,7 @@
             Savage4, and Savage2000, is provided by the XF86_SVGA server with
             the s3_savage driver on some OSes (Linux, *BSD).
 
-      4.2.0:
+      4.2.1:
             Support (accelerated) for the 964 (revisions 0 and 1), 968,
             Trio32, Trio64, Trio64, Trio64V+, Trio64UV+, Aurora64V+,
             Trio64V2, and PLATO/PX is provided by the "s3" driver (however,
@@ -500,22 +500,22 @@
             yet been ported.
 
       Summary:
-            All hardware supported in 3.3.6 is also supported in 4.2.0 except
+            All hardware supported in 3.3.6 is also supported in 4.2.1 except
             for the 911, 924, 801, 805, 928, 864, and 868, and versions of
             the 964 and 968 that do not use the RAMDAC chips listed above.
-            The SuperSavage chipset is supported only in 4.2.0.
+            The SuperSavage chipset is supported only in 4.2.1.
 
 29.  Silicon Graphics, Inc. (SGI)
 
       3.3.6:
             No SGI hardware is supported in 3.3.6.
 
-      4.2.0:
+      4.2.1:
             Unaccelerated support for the SGI Indy's Newport (a.k.a. "XL")
             cards is provided by the "newport" driver.
 
       Summary:
-            SGI hardware is supported only in 4.2.0.
+            SGI hardware is supported only in 4.2.1.
 
 30.  Silicon Integrated Systems (SiS)
 
@@ -524,7 +524,7 @@
             86C225, 5597, 5598, 6326, 530, 620, 300, 630 and 540 is provided
             by the XF86_SVGA server with the sis driver.
 
-      4.2.0:
+      4.2.1:
             Support (accelerated) for the SiS
              530, 620, 6326 is provided by the "sis" driver.  The 630, 300,
             and 540 are also supported, but this code is new and there are
@@ -541,20 +541,20 @@
             LynxEM+ and Lynx3DM chips is provided by the XF86_SVGA server
             with the smi driver.
 
-      4.2.0:
+      4.2.1:
             Support (accelerated) for the Lynx, LynxE, Lynx3D, LynxEM,
             LynxEM+ and Lynx3DM chips is provided by the "siliconmotion"
             driver.
 
       Summary:
-            All hardware supported in 3.3.6 is also supported in 4.2.0.
+            All hardware supported in 3.3.6 is also supported in 4.2.1.
 
 32.  Sun Microsystems
 
       3.3.6:
             No Sun hardware is supported in 3.3.6.
 
-      4.2.0:
+      4.2.1:
             Sun BW2 framebuffers are supported by the "sunbw2" driver.  Sun
             CG3 framebuffers are supported by the "suncg3" driver.  Sun CG6
             framebuffers are supported by the "suncg6" driver.  Sun CG14
@@ -564,7 +564,7 @@
             framebuffers are supported by the "suntcx" driver.
 
       Summary:
-            Sun hardware is supported only in 4.2.0.
+            Sun hardware is supported only in 4.2.1.
 
 33.  Trident Microsystems
 
@@ -579,7 +579,7 @@
             CyberBlade/DSTN/i7, CyberBlade/i1, and CyberBlade/i7 is provided
             by the XF86_SVGA server with the tvga8900 driver.
 
-      4.2.0:
+      4.2.1:
             Support (accelerated where the chip supports it) for the
             TVGA8900B, TVGA8900C, TVGA8900CL, TVGA9000, TVGA9000i, TVGA9100B,
             TVGA9200CXr, TVGA8900D, TGUI9440AGi, TGUI9660, TGUI9680, ProVidia
@@ -593,7 +593,7 @@
 
       Summary:
             The following (older) chipsets are supported in 3.3.6 and not in
-            4.2.0: TVGA8200LX, TVGA8800CS, TVGA8900B, TVGA8900C, TVGA8900CL,
+            4.2.1: TVGA8200LX, TVGA8800CS, TVGA8900B, TVGA8900C, TVGA8900CL,
             TVGA9000, TVGA9000i, TVGA9100B, TVGA9200CXr, TGUI9400CXi,
             TGUI9420, and TGUI9430DGi.
 
@@ -603,10 +603,10 @@
             Blade3D, Cyber9320, Cyber9382, Cyber9385, Cyber9388, Cyber9397,
             Cyber9397/DVD, CyberBlade/DSTN/i1, CyberBlade/DSTN/i7,
             CyberBlade/i1 and CyberBlade/i7 are supported in both 3.3.6 and
-            4.2.0.
+            4.2.1.
 
             The CyberBlade/Ai1, CyberBlade/DSTN/Ai1, CyberBlade/e4,
-            CyberBladeXP, and BladeXP are supported only in 4.2.0.
+            CyberBladeXP, and BladeXP are supported only in 4.2.1.
 
 34.  Tseng Labs
 
@@ -618,13 +618,13 @@
             driver.  Support (accelerated) for the ET4000/W32 series and the
             ET6000 is also provided by the deprecated XF86_W32 server.
 
-      4.2.0:
+      4.2.1:
             Support for the ET4000AX, and accelerated support for the
             ET4000/W32, ET4000/W32i, ET4000/W32p, ET6000 and ET6100 is pro-
             vided by the "tseng" driver.
 
       Summary:
-            All cards supported by 3.3.6 are also supported by 4.2.0 except
+            All cards supported by 3.3.6 are also supported by 4.2.1 except
             for the old ET3000.
 
 35.  Video 7
@@ -635,12 +635,12 @@
             unknown because we don't have any recent test reports, and this
             driver has no maintainer.
 
-      4.2.0:
+      4.2.1:
             No Video 7 chips are supported, because the old driver has not
             been ported.
 
       Summary:
-            No Video 7 chips are supported in 4.2.0.
+            No Video 7 chips are supported in 4.2.1.
 
 36.  Weitek
 
@@ -649,14 +649,14 @@
             server and accelerated support for the P9100 is provided by the
             XF86_SVGA server with the p9x00 driver.
 
-      4.2.0:
+      4.2.1:
             No Weitek chips are supported, because the old drivers have not
             been ported.
 
       Summary:
-            No Weitek chips are supported in 4.2.0.
+            No Weitek chips are supported in 4.2.1.
 
      Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/Status.sgml,v 1.37 2002/01/16 20:38:45 dawes Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/Status,v 1.29 2002/01/16 20:51:04 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/Status,v 1.29.2.1 2002/09/04 03:39:36 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/Versions
diff -u xc/programs/Xserver/hw/xfree86/doc/Versions:1.3 xc/programs/Xserver/hw/xfree86/doc/Versions:1.3.2.1
--- xc/programs/Xserver/hw/xfree86/doc/Versions:1.3	Wed Jan 16 20:51:04 2002
+++ xc/programs/Xserver/hw/xfree86/doc/Versions	Wed Sep  4 03:39:36 2002
@@ -16,7 +16,7 @@
 release branches.  First is trunk of the CVS repository.  This is the main
 development stream, where all new work and work for future releases is done.
 
-Second is the stable bugfix branch for the latest full release (4.2.0).  It
+Second is the stable bugfix branch for the latest full release (4.2.1).  It
 is created around the time of the release.  The branch for this one is called
 "xf-4_2-branch".  Fixes for bugs found in the release will be added to this
 branch (as well as the trunk), and updates to this release (if any) will be
@@ -41,8 +41,8 @@
 of the previous full release.
 
 The next full release will be version 4.3.0, tentatively scheduled for late
-May 2002.  There is no scheduled update release.  If there is one, the ver-
-sion will be 4.2.1.
+late 2002.  There is no scheduled update release.  If there is one, the ver-
+sion will be 4.2.2.
 
 Aside from actual releases, snapshots of the active release branches are
 tagged in the CVS repository from time to time.  Each such snapshot has an
@@ -341,4 +341,4 @@
      Generated from XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/Versions.sgml,v 1.2 2002/01/16 20:38:45 dawes Exp $
 
 
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/Versions,v 1.3 2002/01/16 20:51:04 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/Versions,v 1.3.2.1 2002/09/04 03:39:36 dawes Exp $
Index: xc/programs/Xserver/hw/xfree86/doc/sgml/BUILD.sgml
diff -u xc/programs/Xserver/hw/xfree86/doc/sgml/BUILD.sgml:3.6 xc/programs/Xserver/hw/xfree86/doc/sgml/BUILD.sgml:3.6.4.1
--- xc/programs/Xserver/hw/xfree86/doc/sgml/BUILD.sgml:3.6	Thu Nov 15 17:32:16 2001
+++ xc/programs/Xserver/hw/xfree86/doc/sgml/BUILD.sgml	Wed Sep  4 03:33:11 2002
@@ -30,41 +30,50 @@
 
 <p>
 There are a few starting points for getting the XFree86 source.  One option
-is to start directly with the XFree86 &relvers; source distribution.  In this
+is to start directly with the XFree86 &fullrelvers; source
+distribution<![ %updaterel; [ and updating it to &relvers; with a source
+patch]]>.  In this
 case, the procedure is as follows:
 <itemize>
-  <item>The XFree86 source is contained in files <tt>X&srcvers;src-1.tgz</tt>,
-	<tt>X&srcvers;src-2.tgz</tt> and <tt>X&srcvers;src-3.tgz</tt>.  These can be found
-	at <htmlurl name="ftp://ftp.xfree86.org/pub/XFree86/&relvers;/source/"
-	url="ftp://ftp.xfree86.org/pub/XFree86/&relvers;/source/"> and similar
-	locations on XFree86 mirror sites.  <tt>X&srcvers;src-2.tgz</tt> contains
-	the fonts and documentation source.  <tt>X&srcvers;src-3.tgz</tt> contains
-	the hardcopy documentation.  <tt>X&srcvers;src-1.tgz</tt> contains
-	everything else.  If you don't need the docs or fonts you can get
-	by with only <tt>X&srcvers;src-1.tgz</tt>.
+  <item>The XFree86 source is contained in files
+	<tt>X&fullsrcvers;src-1.tgz</tt>, <tt>X&fullsrcvers;src-2.tgz</tt>
+	and <tt>X&fullsrcvers;src-3.tgz</tt>.  These can be found at
+	<htmlurl
+	name="ftp://ftp.xfree86.org/pub/XFree86/&fullrelvers;/source/"
+	url="ftp://ftp.xfree86.org/pub/XFree86/&fullrelvers;/source/">
+	and similar locations on XFree86 mirror sites.
+	<tt>X&fullsrcvers;src-2.tgz</tt> contains the fonts and
+	documentation source.  <tt>X&fullsrcvers;src-3.tgz</tt> contains
+	the hardcopy documentation.  <tt>X&fullsrcvers;src-1.tgz</tt>
+	contains everything else.  If you don't need the docs or fonts
+	you can get by with only <tt>X&fullsrcvers;src-1.tgz</tt>.
+
   <item>Extract each of these files by running the following from a directory
 	on a filesystem containing enough space (the full source requires
 	around 270MB, and a similar amount is required in addition to this
 	for the compiled binaries):
 	<quote><tt>
-	gzip -d &lt; X&srcvers;src-1.tgz | tar vxf -<newline>
-	gzip -d &lt; X&srcvers;src-2.tgz | tar vxf -<newline>
-	gzip -d &lt; X&srcvers;src-3.tgz | tar vxf -<newline>
+	gzip -d &lt; X&fullsrcvers;src-1.tgz | tar vxf -<newline>
+	gzip -d &lt; X&fullsrcvers;src-2.tgz | tar vxf -<newline>
+	gzip -d &lt; X&fullsrcvers;src-3.tgz | tar vxf -<newline>
 	</tt></quote>
-    <item>If the release is not a full release, it is available as a
-    patch against the previous full release in the 
-<htmlurl
-name="ftp://ftp.xfree86.org/pub/XFree86/&relvers;/patches/"
-url="ftp://ftp.xfree86.org/pub/XFree86/&relvers;/patches/">
-directory. Get the patch file from there and apply it by running the
-following command:
-<quote><tt>
-cd <em>the directory containing the</em> xc <em>directory</em><newline>
-gzip -d &lt; <em>file</em> | patch -s -p0 -E 
-</tt>
-</quote>
-Look for special patching instructions in the <htmlurl name="Release
-Notes" url="http://www.xfree86.org/&relvers;/RELNOTES.html">.
+
+<![ %updaterel; [
+  <item>A patch relative to &fullrelvers is available at
+	<htmlurl
+	name="ftp://ftp.xfree86.org/pub/XFree86/&relvers;/patches/"
+	url="ftp://ftp.xfree86.org/pub/XFree86/&relvers;/patches/">.
+	The patch file is <tt>&fullrelvers;-&relvers;.diff.gz</tt>.
+
+	The patch can be applied by running:
+	<quote><tt>
+	cd <em>the directory containing the</em> xc <em>directory</em><newline>
+	gzip -d &lt; &fullrelvers;-&relvers;.diff.gz | patch -s -p0 -E 
+	</tt>
+	</quote>
+	Look for special patching instructions in the <htmlurl name="Release
+	Notes" url="http://www.xfree86.org/&relvers;/RELNOTES.html">.
+]]>
 </itemize>
 
 Another option is to get the source by anonymous CVS or CVSup. 
@@ -72,7 +81,7 @@
 url="http://www.xfree86.org/cvs/"> for details on the different
 procedure available. 
 
-All method will produce one main source directory called <tt>xc</tt>. 
+All methods will produce one main source directory called <tt>xc</tt>. 
 
 <sect>Configuring the source before building
 <p>
@@ -240,7 +249,7 @@
 </itemize>
 
 <verb>
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/BUILD.sgml,v 3.6 2001/11/15 17:32:16 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/BUILD.sgml,v 3.6.4.1 2002/09/04 03:33:11 dawes Exp $
 </verb>
 
 </article>
Index: xc/programs/Xserver/hw/xfree86/doc/sgml/README.sgml
diff -u xc/programs/Xserver/hw/xfree86/doc/sgml/README.sgml:3.119 xc/programs/Xserver/hw/xfree86/doc/sgml/README.sgml:3.119.2.1
--- xc/programs/Xserver/hw/xfree86/doc/sgml/README.sgml:3.119	Wed Jan 16 19:40:48 2002
+++ xc/programs/Xserver/hw/xfree86/doc/sgml/README.sgml	Wed Sep  4 03:01:48 2002
@@ -13,10 +13,10 @@
 
 <title>README for XFree86&tm; &relvers;
 <author>The XFree86 Project, Inc
-<date>16 January 2002
+<date>3 September 2002
 
 <ident>
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/README.sgml,v 3.119 2002/01/16 19:40:48 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/README.sgml,v 3.119.2.1 2002/09/04 03:01:48 dawes Exp $
 </ident>
 
 <abstract>
Index: xc/programs/Xserver/hw/xfree86/doc/sgml/RELNOTES.sgml
diff -u xc/programs/Xserver/hw/xfree86/doc/sgml/RELNOTES.sgml:1.70 xc/programs/Xserver/hw/xfree86/doc/sgml/RELNOTES.sgml:1.70.2.2
--- xc/programs/Xserver/hw/xfree86/doc/sgml/RELNOTES.sgml:1.70	Thu Jan 17 18:14:59 2002
+++ xc/programs/Xserver/hw/xfree86/doc/sgml/RELNOTES.sgml	Wed Sep  4 03:01:48 2002
@@ -6,10 +6,10 @@
 
 <title>Release Notes for XFree86&trade; &relvers;
 <author>The XFree86 Project, Inc
-<date>17 January 2002
+<date>3 September 2002
 
 <ident>
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/RELNOTES.sgml,v 1.70 2002/01/17 18:14:59 dawes Exp $
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/RELNOTES.sgml,v 1.70.2.2 2002/09/04 03:01:48 dawes Exp $
 </ident>
 
 <abstract>
@@ -84,6 +84,29 @@
 <![ %updaterel [
 <sect>Summary of updates in &relvers;.
 <p>
+<sect1>Security
+<p>
+<itemize>
+<item> Fix a zlib bug that may have security implications on some platforms.
+<item> MIT-SHM update to not access SHM segments that the client doesn't
+	have sufficient privileges to access.
+<item> Fix an Xlib problem that made it possible to load (and execute)
+	arbitrary code in privileged clients.
+</itemize>
+
+<sect1>Other
+<p>
+<itemize>
+<item>Revert the ATI driver's composite sync default to a safer value.
+<item>Fix Xlib's modular i18n support on Solaris.
+<item>Fix an X server crash when printing some types of modes.
+<item>Startx and xon script fixes.
+<item>Fix a colormap bug with 24+8 overlay mode.
+<item>Update XDarwin support for the Jaguar release.
+<item>Xaw bug fix.
+<item>Fix a vesa driver floating point exception.
+<item>Fix Emulate3Buttons for wsmouse protocol on NetBSD and OpenBSD.
+</itemize>
 
 </sect>
 ]]>
@@ -955,7 +978,7 @@
 <sect2>FreeType support in Xft
 <p>
 
-XFree86 &relvers; includes sources for FreeType version 2.0.1, and, by
+XFree86 &relvers; includes sources for FreeType version 2.0.6, and, by
 default, they are built and installed automatically.
 
 <p>
@@ -988,13 +1011,11 @@
 
 <p>
 By default, xterm uses core fonts through the standard core API.  It has
-two command line options and associated resources to direct it to use
+a command line option and associated resource to direct it to use
 Xft instead:
 <itemize>
   <item><tt>-fa</tt> family / <tt>.VT100.faceName:</tt> family.  Selects the 
 	font family to use.
-  <item><tt>-fs</tt> pointsize / <tt>.VT100.faceSize:</tt> pointsize.  
-	Selects the pointsize.
 </itemize>
 
 <p>
Index: xc/programs/Xserver/hw/xfree86/doc/sgml/defs.ent
diff -u xc/programs/Xserver/hw/xfree86/doc/sgml/defs.ent:1.22 xc/programs/Xserver/hw/xfree86/doc/sgml/defs.ent:1.22.2.1
--- xc/programs/Xserver/hw/xfree86/doc/sgml/defs.ent:1.22	Wed Jan 16 20:38:45 2002
+++ xc/programs/Xserver/hw/xfree86/doc/sgml/defs.ent	Wed Sep  4 03:01:48 2002
@@ -1,21 +1,21 @@
-<!-- $XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/defs.ent,v 1.22 2002/01/16 20:38:45 dawes Exp $ -->
+<!-- $XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/defs.ent,v 1.22.2.1 2002/09/04 03:01:48 dawes Exp $ -->
 
 <!-- shared entity definitions for the XFree86 documentation -->
 
 <!-- XFree86 version string -->
-<!ENTITY relvers CDATA "4.2.0">
-<!ENTITY prevrelvers CDATA "4.1.0">
+<!ENTITY relvers CDATA "4.2.1">
+<!ENTITY prevrelvers CDATA "4.2.0">
 <!ENTITY fullrelvers CDATA "4.2.0">
 <!ENTITY prevfullrelvers CDATA "4.1.0">
 <!ENTITY nextfullrelvers CDATA "4.3.0">
-<!ENTITY nextfullreldate CDATA "May 2002">
-<!ENTITY nextupdrelvers CDATA "4.2.1">
-<!ENTITY srcvers CDATA "420">
-<!ENTITY prevsrcvers CDATA "410">
+<!ENTITY nextfullreldate CDATA "late 2002">
+<!ENTITY nextupdrelvers CDATA "4.2.2">
+<!ENTITY srcvers CDATA "421">
+<!ENTITY prevsrcvers CDATA "420">
 <!ENTITY fullsrcvers CDATA "420">
 <!ENTITY prevfullsrcvers CDATA "410">
 <!ENTITY whichfullrel CDATA "fifth">
-<!ENTITY whichupdaterel CDATA "none">
+<!ENTITY whichupdaterel CDATA "first">
 <!ENTITY relbranchtag CDATA "xf-4_2-branch">
 
 <!-- Version of the most recent 3.3.x release -->
@@ -32,8 +32,8 @@
 <!ENTITY % firstrel 'IGNORE'>
 <!ENTITY % earlyrel 'IGNORE'>
 <!ENTITY % laterrel 'INCLUDE'>
-<!ENTITY % fullrel 'INCLUDE'>
-<!ENTITY % updaterel 'IGNORE'>
+<!ENTITY % fullrel 'IGNORE'>
+<!ENTITY % updaterel 'INCLUDE'>
 <!ENTITY % prevrelwasupdate 'IGNORE'>
 
 <!-- Set this to INCLUDE when references to the RELNOTES are to be included -->
Index: xc/programs/Xserver/hw/xfree86/doc/sgml/index.pre
diff -u xc/programs/Xserver/hw/xfree86/doc/sgml/index.pre:1.13 xc/programs/Xserver/hw/xfree86/doc/sgml/index.pre:1.13.2.1
--- xc/programs/Xserver/hw/xfree86/doc/sgml/index.pre:1.13	Tue Jan 15 21:24:46 2002
+++ xc/programs/Xserver/hw/xfree86/doc/sgml/index.pre	Wed Sep  4 03:01:48 2002
@@ -8,10 +8,10 @@
 <!-- Title information -->
 <title>Documentation for XFree86&trade; version &relvers;
 <author>The XFree86 Project, Inc
-<date>18 January 2002
+<date>3 September 2002
 
 <!--
-$XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/index.pre,v 1.13 2002/01/15 21:24:46 dawes Exp $ 
+$XFree86: xc/programs/Xserver/hw/xfree86/doc/sgml/index.pre,v 1.13.2.1 2002/09/04 03:01:48 dawes Exp $ 
 -->
 
 <p>
Index: xc/programs/Xserver/hw/xfree86/drivers/ati/aticonfig.c
diff -u xc/programs/Xserver/hw/xfree86/drivers/ati/aticonfig.c:1.9 xc/programs/Xserver/hw/xfree86/drivers/ati/aticonfig.c:1.9.2.1
--- xc/programs/Xserver/hw/xfree86/drivers/ati/aticonfig.c:1.9	Wed Jan 16 16:22:26 2002
+++ xc/programs/Xserver/hw/xfree86/drivers/ati/aticonfig.c	Wed Jan 23 16:17:59 2002
@@ -1,4 +1,4 @@
-/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/ati/aticonfig.c,v 1.9 2002/01/16 16:22:26 tsi Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/ati/aticonfig.c,v 1.9.2.1 2002/01/23 16:17:59 tsi Exp $ */
 /*
  * Copyright 2000 through 2002 by Marc Aurele La France (TSI @ UQV), tsi@xfree86.org
  *
@@ -143,7 +143,7 @@
         ShadowFB = TRUE;
     }
 
-    Blend = CSync = /* Sync = */ TRUE;
+    Blend = /* CSync = Sync = */ TRUE;
 
     xf86ProcessOptions(pScreenInfo->scrnIndex, pScreenInfo->options,
         PublicOption);
Index: xc/programs/Xserver/hw/xfree86/drivers/ati/r128_driver.c
diff -u xc/programs/Xserver/hw/xfree86/drivers/ati/r128_driver.c:1.57 xc/programs/Xserver/hw/xfree86/drivers/ati/r128_driver.c:1.57.2.1
--- xc/programs/Xserver/hw/xfree86/drivers/ati/r128_driver.c:1.57	Fri Jan  4 21:22:26 2002
+++ xc/programs/Xserver/hw/xfree86/drivers/ati/r128_driver.c	Wed Aug 14 17:36:15 2002
@@ -1,4 +1,4 @@
-/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/ati/r128_driver.c,v 1.57 2002/01/04 21:22:26 tsi Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/ati/r128_driver.c,v 1.57.2.1 2002/08/14 17:36:15 anderson Exp $ */
 /*
  * Copyright 1999, 2000 ATI Technologies Inc., Markham, Ontario,
  *                      Precision Insight, Inc., Cedar Park, Texas, and
@@ -93,6 +93,7 @@
 #include "xf86_OSproc.h"
 #include "xf86PciInfo.h"
 #include "xf86RAC.h"
+#include "xf86Resources.h"
 #include "xf86cmap.h"
 #include "xf86xv.h"
 #include "vbe.h"
@@ -116,6 +117,8 @@
 static Bool R128ModeInit(ScrnInfoPtr pScrn, DisplayModePtr mode);
 static void R128DisplayPowerManagementSet(ScrnInfoPtr pScrn,
 					  int PowerManagementMode, int flags);
+static void R128DisplayPowerManagementSetLCD(ScrnInfoPtr pScrn,
+					  int PowerManagementMode, int flags);
 
 typedef enum {
   OPTION_NOACCEL,
@@ -325,7 +328,6 @@
     NULL
 };
 
-
 /* Allocate our private R128InfoRec. */
 static Bool R128GetRec(ScrnInfoPtr pScrn)
 {
@@ -2397,11 +2399,13 @@
 #endif
 			     )) return FALSE;
 
-				/* DPMS setup - FIXME: also for mirror mode? - Michel */
+    /* DPMS setup - FIXME: also for mirror mode in non-fbdev case? - Michel */
     if (!info->HasPanelRegs || info->BIOSDisplay == R128_BIOS_DISPLAY_CRT)
-	xf86DPMSInit(pScreen, R128DisplayPowerManagementSet, 0);
+        xf86DPMSInit(pScreen, R128DisplayPowerManagementSet, 0);
+    if (info->HasPanelRegs || info->BIOSDisplay == R128_BIOS_DISPLAY_FP)
+        xf86DPMSInit(pScreen, R128DisplayPowerManagementSetLCD, 0);
 
-	R128InitVideo(pScreen);
+    R128InitVideo(pScreen);
 
 				/* Provide SaveScreen */
     pScreen->SaveScreen  = R128SaveScreen;
@@ -3539,3 +3543,73 @@
 	break;
     }
 }
+
+static int r128_set_backlight_enable(ScrnInfoPtr pScrn, int on);
+
+static void R128DisplayPowerManagementSetLCD(ScrnInfoPtr pScrn,
+					  int PowerManagementMode, int flags)
+{
+    R128InfoPtr   info      = R128PTR(pScrn);
+    unsigned char *R128MMIO = info->MMIO;
+    int           mask      = R128_LVDS_DISPLAY_DIS;
+
+    switch (PowerManagementMode) {
+    case DPMSModeOn:
+	/* Screen: On; HSync: On, VSync: On */
+	OUTREGP(R128_LVDS_GEN_CNTL, 0, ~mask);
+        r128_set_backlight_enable(pScrn, 1);
+	break;
+    case DPMSModeStandby:
+	/* Fall through */
+    case DPMSModeSuspend:
+	/* Fall through */
+	break;
+    case DPMSModeOff:
+	/* Screen: Off; HSync: Off, VSync: Off */
+	OUTREGP(R128_LVDS_GEN_CNTL, mask, ~mask);
+        r128_set_backlight_enable(pScrn, 0);
+	break;
+    }
+}
+
+static int r128_set_backlight_enable(ScrnInfoPtr pScrn, int on)
+{
+        R128InfoPtr info        = R128PTR(pScrn);
+        unsigned char *R128MMIO = info->MMIO;
+	unsigned int lvds_gen_cntl = INREG(R128_LVDS_GEN_CNTL);
+
+	lvds_gen_cntl |= (/*R128_LVDS_BL_MOD_EN |*/ R128_LVDS_BLON);
+	if (on) {
+		lvds_gen_cntl |= R128_LVDS_DIGON;
+		if (!lvds_gen_cntl & R128_LVDS_ON) {
+			lvds_gen_cntl &= ~R128_LVDS_BLON;
+			OUTREG(R128_LVDS_GEN_CNTL, lvds_gen_cntl);
+			(void)INREG(R128_LVDS_GEN_CNTL);
+			usleep(10000);
+			lvds_gen_cntl |= R128_LVDS_BLON;
+			OUTREG(R128_LVDS_GEN_CNTL, lvds_gen_cntl);
+		}
+#if 0
+		lvds_gen_cntl &= ~R128_LVDS_BL_MOD_LEVEL_MASK;
+		lvds_gen_cntl |= (0xFF /* backlight_conv[level] */ <<
+				  R128_LVDS_BL_MOD_LEVEL_SHIFT);
+#endif
+		lvds_gen_cntl |= (R128_LVDS_ON | R128_LVDS_EN);
+		lvds_gen_cntl &= ~R128_LVDS_DISPLAY_DIS;
+	} else {
+#if 0
+		lvds_gen_cntl &= ~R128_LVDS_BL_MOD_LEVEL_MASK;
+		lvds_gen_cntl |= (0xFF /* backlight_conv[0] */ <<
+				  R128_LVDS_BL_MOD_LEVEL_SHIFT);
+#endif
+		lvds_gen_cntl |= R128_LVDS_DISPLAY_DIS;
+		OUTREG(R128_LVDS_GEN_CNTL, lvds_gen_cntl);
+		usleep(10);
+		lvds_gen_cntl &= ~(R128_LVDS_ON | R128_LVDS_EN | R128_LVDS_BLON 
+				   | R128_LVDS_DIGON);
+	}
+
+	OUTREG(R128_LVDS_GEN_CNTL, lvds_gen_cntl);
+
+	return 0;
+ }
Index: xc/programs/Xserver/hw/xfree86/drivers/ati/r128_reg.h
diff -u xc/programs/Xserver/hw/xfree86/drivers/ati/r128_reg.h:1.13 xc/programs/Xserver/hw/xfree86/drivers/ati/r128_reg.h:1.13.4.1
--- xc/programs/Xserver/hw/xfree86/drivers/ati/r128_reg.h:1.13	Tue Oct  2 11:44:16 2001
+++ xc/programs/Xserver/hw/xfree86/drivers/ati/r128_reg.h	Wed Aug 14 17:36:16 2002
@@ -1,4 +1,4 @@
-/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/ati/r128_reg.h,v 1.13 2001/10/02 11:44:16 alanh Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/ati/r128_reg.h,v 1.13.4.1 2002/08/14 17:36:16 anderson Exp $ */
 /*
  * Copyright 1999, 2000 ATI Technologies Inc., Markham, Ontario,
  *                      Precision Insight, Inc., Cedar Park, Texas, and
@@ -684,6 +684,9 @@
 #define R128_LEAD_BRES_LNTH_SUB           0x1624
 #define R128_LVDS_GEN_CNTL                0x02d0
 #       define R128_LVDS_ON               (1   <<  0)
+#       define R128_LVDS_DISPLAY_DIS      (1   <<  1)
+#       define R128_LVDS_EN               (1   <<  7)
+#       define R128_LVDS_DIGON            (1   << 18)
 #       define R128_LVDS_BLON             (1   << 19)
 #       define R128_LVDS_SEL_CRTC2        (1   << 23)
 #       define R128_HSYNC_DELAY_SHIFT     28
Index: xc/programs/Xserver/hw/xfree86/drivers/trident/trident_dac.c
diff -u xc/programs/Xserver/hw/xfree86/drivers/trident/trident_dac.c:1.63 xc/programs/Xserver/hw/xfree86/drivers/trident/trident_dac.c:1.63.2.1
--- xc/programs/Xserver/hw/xfree86/drivers/trident/trident_dac.c:1.63	Fri Jan 11 13:06:30 2002
+++ xc/programs/Xserver/hw/xfree86/drivers/trident/trident_dac.c	Fri Mar 29 18:34:24 2002
@@ -22,7 +22,7 @@
  *
  * Author:  Alan Hourihane, alanh@fairlite.demon.co.uk
  */
-/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/trident/trident_dac.c,v 1.63 2002/01/11 13:06:30 alanh Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/trident/trident_dac.c,v 1.63.2.1 2002/03/29 18:34:24 alanh Exp $ */
 
 #include "xf86.h"
 #include "xf86_OSproc.h"
@@ -191,7 +191,6 @@
     vgaHWPtr hwp = VGAHWPTR(pScrn);
     vgaRegPtr regp = &hwp->ModeReg;
     vgaRegPtr vgaReg = &hwp->ModeReg;
-    vgaHWGetIOBase(VGAHWPTR(pScrn));
     vgaIOBase = VGAHWPTR(pScrn)->IOBase;
     
     /* Unprotect */
@@ -640,7 +639,6 @@
     TRIDENTPtr pTrident = TRIDENTPTR(pScrn);
     CARD8 temp;
     int vgaIOBase;
-    vgaHWGetIOBase(VGAHWPTR(pScrn));
     vgaIOBase = VGAHWPTR(pScrn)->IOBase;
 
     if (pTrident->Chipset > PROVIDIA9685) {
@@ -773,7 +771,6 @@
     TRIDENTPtr pTrident = TRIDENTPTR(pScrn);
     CARD8 temp;
     int vgaIOBase;
-    vgaHWGetIOBase(VGAHWPTR(pScrn));
     vgaIOBase = VGAHWPTR(pScrn)->IOBase;
 
     /* Goto New Mode */
@@ -886,7 +883,6 @@
 {
     TRIDENTPtr pTrident = TRIDENTPTR(pScrn);
     int vgaIOBase;
-    vgaHWGetIOBase(VGAHWPTR(pScrn));
     vgaIOBase = VGAHWPTR(pScrn)->IOBase;
 
     /* 64x64 */
@@ -897,7 +893,6 @@
 TridentHideCursor(ScrnInfoPtr pScrn) {
     int vgaIOBase;
     TRIDENTPtr pTrident = TRIDENTPTR(pScrn);
-    vgaHWGetIOBase(VGAHWPTR(pScrn));
     vgaIOBase = VGAHWPTR(pScrn)->IOBase;
 
     OUTW(vgaIOBase + 4, 0x4150);
@@ -908,7 +903,6 @@
 {
     int vgaIOBase;
     TRIDENTPtr pTrident = TRIDENTPTR(pScrn);
-    vgaHWGetIOBase(VGAHWPTR(pScrn));
     vgaIOBase = VGAHWPTR(pScrn)->IOBase;
     
     if (x < 0) {
@@ -934,7 +928,6 @@
 {
     int vgaIOBase;
     TRIDENTPtr pTrident = TRIDENTPTR(pScrn);
-    vgaHWGetIOBase(VGAHWPTR(pScrn));
     vgaIOBase = VGAHWPTR(pScrn)->IOBase;
     OUTW(vgaIOBase + 4, (fg & 0x000000FF)<<8  | 0x48);
     OUTW(vgaIOBase + 4, (fg & 0x0000FF00)     | 0x49);
@@ -954,7 +947,6 @@
 {
     TRIDENTPtr pTrident = TRIDENTPTR(pScrn);
     int vgaIOBase;
-    vgaHWGetIOBase(VGAHWPTR(pScrn));
     vgaIOBase = VGAHWPTR(pScrn)->IOBase;
 
     memcpy((CARD8 *)pTrident->FbBase + (pScrn->videoRam * 1024) - 4096,
Index: xc/programs/Xserver/hw/xfree86/drivers/trident/trident_driver.c
diff -u xc/programs/Xserver/hw/xfree86/drivers/trident/trident_driver.c:1.160 xc/programs/Xserver/hw/xfree86/drivers/trident/trident_driver.c:1.160.2.1
--- xc/programs/Xserver/hw/xfree86/drivers/trident/trident_driver.c:1.160	Tue Jan 15 18:31:19 2002
+++ xc/programs/Xserver/hw/xfree86/drivers/trident/trident_driver.c	Fri Mar 29 18:34:24 2002
@@ -28,7 +28,7 @@
  *	    Massimiliano Ghilardi, max@Linuz.sns.it, some fixes to the
  *				   clockchip programming code.
  */
-/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/trident/trident_driver.c,v 1.160 2002/01/15 18:31:19 alanh Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/trident/trident_driver.c,v 1.160.2.1 2002/03/29 18:34:24 alanh Exp $ */
 
 #include "xf1bpp.h"
 #include "xf4bpp.h"
@@ -2598,7 +2598,6 @@
     	vgaHWSetMmioFuncs(hwp, pTrident->IOBase, 0);
     }
 
-    vgaHWGetIOBase(hwp);
     vgaIOBase = VGAHWPTR(pScrn)->IOBase;
 
     /* Save the current state */
Index: xc/programs/Xserver/hw/xfree86/drivers/trident/trident_video.c
diff -u xc/programs/Xserver/hw/xfree86/drivers/trident/trident_video.c:1.21 xc/programs/Xserver/hw/xfree86/drivers/trident/trident_video.c:1.21.2.1
--- xc/programs/Xserver/hw/xfree86/drivers/trident/trident_video.c:1.21	Sun Jan 13 00:15:52 2002
+++ xc/programs/Xserver/hw/xfree86/drivers/trident/trident_video.c	Mon Jan 28 14:32:55 2002
@@ -21,7 +21,7 @@
  *
  * Author:  Alan Hourihane, alanh@fairlite.demon.co.uk
  */
-/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/trident/trident_video.c,v 1.21 2002/01/13 00:15:52 alanh Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/trident/trident_video.c,v 1.21.2.1 2002/01/28 14:32:55 alanh Exp $ */
 
 #include "xf86.h"
 #include "xf86_OSproc.h"
@@ -1356,6 +1356,8 @@
 
   pTrident->hsync = (HTotal - HSyncStart) + 23 + h_off;
   pTrident->vsync = (VTotal - VSyncStart) - 2 + v_off;
+  pTrident->hsync_rskew = 0;
+  pTrident->vsync_bskew = 0;
   
   /* 
    * HACK !! As awful as this is, it appears to be the only way....Sigh!
Index: xc/programs/Xserver/hw/xfree86/drivers/trident/tvga_dac.c
diff -u xc/programs/Xserver/hw/xfree86/drivers/trident/tvga_dac.c:1.5 xc/programs/Xserver/hw/xfree86/drivers/trident/tvga_dac.c:1.5.4.1
--- xc/programs/Xserver/hw/xfree86/drivers/trident/tvga_dac.c:1.5	Wed Sep 12 13:50:12 2001
+++ xc/programs/Xserver/hw/xfree86/drivers/trident/tvga_dac.c	Fri Mar 29 18:34:24 2002
@@ -21,7 +21,7 @@
  *
  * Author:  Alan Hourihane, alanh@fairlite.demon.co.uk
  */
-/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/trident/tvga_dac.c,v 1.5 2001/09/12 13:50:12 alanh Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/drivers/trident/tvga_dac.c,v 1.5.4.1 2002/03/29 18:34:24 alanh Exp $ */
 
 #include "xf86.h"
 #include "xf86_OSproc.h"
@@ -43,7 +43,6 @@
     int vgaIOBase;
     int offset = 0;
     int clock = mode->Clock;
-    vgaHWGetIOBase(VGAHWPTR(pScrn));
     vgaIOBase = VGAHWPTR(pScrn)->IOBase;
 
     OUTB(0x3C4, 0x0B); INB(0x3C5); /* Ensure we are in New Mode */
@@ -140,7 +139,6 @@
     TRIDENTPtr pTrident = TRIDENTPTR(pScrn);
     CARD8 temp;
     int vgaIOBase;
-    vgaHWGetIOBase(VGAHWPTR(pScrn));
     vgaIOBase = VGAHWPTR(pScrn)->IOBase;
 
     /* Goto Old Mode */
@@ -188,7 +186,6 @@
     TRIDENTPtr pTrident = TRIDENTPTR(pScrn);
     CARD8 temp;
     int vgaIOBase;
-    vgaHWGetIOBase(VGAHWPTR(pScrn));
     vgaIOBase = VGAHWPTR(pScrn)->IOBase;
 
     temp = INB(0x3C8);
Index: xc/programs/Xserver/hw/xfree86/drivers/vesa/vesa.c
diff -u xc/programs/Xserver/hw/xfree86/drivers/vesa/vesa.c:1.24 xc/programs/Xserver/hw/xfree86/drivers/vesa/vesa.c:1.24.4.1
--- xc/programs/Xserver/hw/xfree86/drivers/vesa/vesa.c:1.24	Mon Oct  1 13:44:12 2001
+++ xc/programs/Xserver/hw/xfree86/drivers/vesa/vesa.c	Thu Jul  4 17:07:08 2002
@@ -27,7 +27,7 @@
  *
  * Authors: Paulo Csar Pereira de Andrade <pcpa@conectiva.com.br>
  *
- * $XFree86: xc/programs/Xserver/hw/xfree86/drivers/vesa/vesa.c,v 1.24 2001/10/01 13:44:12 eich Exp $
+ * $XFree86: xc/programs/Xserver/hw/xfree86/drivers/vesa/vesa.c,v 1.24.4.1 2002/07/04 17:07:08 paulo Exp $
  */
 
 #include "vesa.h"
@@ -524,9 +524,6 @@
 	xf86UnloadSubModule(pDDCModule);
     }
 
-    /* Set display resolution */
-    xf86SetDpi(pScrn, 0, 0);
-
     if ((pScrn->monitor->DDC = pVesa->monitor) != NULL)
 	xf86SetDDCproperties(pScrn, pVesa->monitor);
 
@@ -797,6 +794,9 @@
     pScrn->displayWidth = pScrn->virtualX;
 
     xf86PrintModes(pScrn);
+
+    /* Set display resolution */
+    xf86SetDpi(pScrn, 0, 0);
 
     if (pScrn->modes == NULL) {
 	xf86DrvMsg(pScrn->scrnIndex, X_ERROR, "No modes\n");
Index: xc/programs/Xserver/hw/xfree86/etc/Xinstall.sh
diff -u xc/programs/Xserver/hw/xfree86/etc/Xinstall.sh:1.37 xc/programs/Xserver/hw/xfree86/etc/Xinstall.sh:1.37.2.2
--- xc/programs/Xserver/hw/xfree86/etc/Xinstall.sh:1.37	Thu Jan 17 20:54:23 2002
+++ xc/programs/Xserver/hw/xfree86/etc/Xinstall.sh	Wed Sep  4 03:01:49 2002
@@ -1,13 +1,13 @@
 #!/bin/sh
 
 #
-# $XFree86: xc/programs/Xserver/hw/xfree86/etc/Xinstall.sh,v 1.37 2002/01/17 20:54:23 dawes Exp $
+# $XFree86: xc/programs/Xserver/hw/xfree86/etc/Xinstall.sh,v 1.37.2.2 2002/09/04 03:01:49 dawes Exp $
 #
 # Copyright  2000 by Precision Insight, Inc.
 # Copyright  2000, 2001 by VA Linux Systems, Inc.
 # Copyright  1996-2002 by The XFree86 Project, Inc.
 #
-# This script should be used to install XFree86 4.2.0.
+# This script should be used to install XFree86 4.2.1.
 #
 # Parts of this script are based on the old preinst.sh and postinst.sh
 # scripts.
@@ -21,7 +21,7 @@
 # These should be updated for each release.
 
 FULLPREFIX=4.2
-PATCHLEVEL=0
+PATCHLEVEL=1
 VERSION=$FULLPREFIX.$PATCHLEVEL
 FULLVERSION=$FULLPREFIX.0
 SCRIPTVERSION=$VERSION
@@ -435,7 +435,7 @@
 			1.[2-3]*)
 				DistName="Darwin-ppc-1.x"
 				;;
-			1.4.* | 5.*)
+			1.4* | 5.*)
 				DistName="Darwin-ppc-5.x"
 				;;
 			[6-9].*)
@@ -448,7 +448,7 @@
 			;;
 		x86*)
 			case "$OsVersion" in
-			1.4.* | 5.*)
+			1.4* | 5.*)
 				DistName="Darwin-ix86-5.x"
 				;;
 			[6-9].*)
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/Cygwin/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/Cygwin/update-upd:1.1 xc/programs/Xserver/hw/xfree86/etc/bindist/Cygwin/update-upd:1.1.4.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/Cygwin/update-upd:1.1	Mon Jul  2 09:37:18 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/Cygwin/update-upd	Wed Sep  4 03:01:49 2002
@@ -1,32 +1,15 @@
-bin/XWin.exe
-bin/gccmakedep.exe
-bin/mkhtmlindex.exe
-bin/rman.exe
-bin/pswrap.exe
-bin/twm.exe
-bin/xedit.exe
-bin/xfs.exe
-bin/xman.exe
-bin/xterm.exe
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
 lib/X11/config/cygwin.cf
-lib/X11/config/gnu.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libXaw.a
-lib/libXfont.a
-lib/libXft.a
-lib/libfreetype.a
-man/man1/XWin.1x
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/Darwin-ix86/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/Darwin-ix86/update-upd:1.1 xc/programs/Xserver/hw/xfree86/etc/bindist/Darwin-ix86/update-upd:1.1.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/Darwin-ix86/update-upd:1.1	Thu May 31 18:33:44 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/Darwin-ix86/update-upd	Wed Sep  4 03:01:49 2002
@@ -1,30 +1,19 @@
+.XFree86_Version
 bin/Xdarwin
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
+lib/X11/config/cygwin.cf
 lib/X11/config/darwin.cf
-lib/X11/config/gnu.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libXaw.a
-lib/libXfont.a
-lib/libXft.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/Darwin-ppc/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/Darwin-ppc/update-upd:1.1 xc/programs/Xserver/hw/xfree86/etc/bindist/Darwin-ppc/update-upd:1.1.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/Darwin-ppc/update-upd:1.1	Thu May 31 18:33:48 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/Darwin-ppc/update-upd	Wed Sep  4 03:01:49 2002
@@ -1,30 +1,19 @@
+.XFree86_Version
 bin/Xdarwin
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
+lib/X11/config/cygwin.cf
 lib/X11/config/darwin.cf
-lib/X11/config/gnu.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libXaw.a
-lib/libXfont.a
-lib/libXft.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD/drivers-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD/drivers-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD/drivers-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD/drivers-upd:1.2	Thu May 31 18:33:51 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD/drivers-upd	Wed Sep  4 03:01:49 2002
@@ -1,20 +1,7 @@
-lib/modules/drivers/chips_drv.o
-lib/modules/drivers/cyrix_drv.o
-lib/modules/drivers/glint_drv.o
-lib/modules/drivers/i810_drv.o
-lib/modules/drivers/mga_drv.o
-lib/modules/drivers/neomagic_drv.o
-lib/modules/drivers/nv_drv.o
+lib/modules/dri/r128_dri.so
+lib/modules/drivers/ati_drv.o
 lib/modules/drivers/r128_drv.o
-lib/modules/drivers/s3virge_drv.o
-lib/modules/drivers/savage_drv.o
-lib/modules/drivers/sis_drv.o
-lib/modules/drivers/tdfx_drv.o
 lib/modules/drivers/trident_drv.o
-lib/modules/drivers/tseng_drv.o
-lib/modules/drivers/vga_drv.o
-lib/modules/extensions/libextmod.a
-lib/modules/fonts/libfreetype.a
-lib/modules/input/mouse_drv.o
-lib/modules/libvgahw.a
-lib/modules/libxf8_16bpp.a
+lib/modules/drivers/vesa_drv.o
+lib/modules/input/hyperpen_drv.o
+lib/modules/libxf8_32bpp.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD/update-upd:1.4 xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD/update-upd:1.4.2.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD/update-upd:1.4	Tue Jan 15 21:34:35 2002
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD/update-upd	Wed Sep  4 03:01:49 2002
@@ -1,31 +1,20 @@
-bin/SuperProbe
+.XFree86_Version
 bin/XFree86
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xf86cfg
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
-lib/X11/app-defaults/XF86Cfg
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
-lib/X11/config/gnu.cf
+lib/X11/config/cygwin.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libX11.so
 lib/libX11.so.6
@@ -33,15 +22,3 @@
 lib/libXaw.so
 lib/libXaw.so.6
 lib/libXaw.so.7
-lib/libXfont.a
-lib/libXfont.so
-lib/libXfont.so.1
-lib/libXft.a
-lib/libXft.so
-lib/libXft.so.1
-lib/libfreetype.a
-lib/libfreetype.so
-lib/libfreetype.so.8
-man/man1/XFree86.1.gz
-man/man4/nv.4.gz
-man/man5/XF86Config.5.gz
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD-aout/drivers-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD-aout/drivers-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD-aout/drivers-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD-aout/drivers-upd:1.2	Thu May 31 18:33:55 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD-aout/drivers-upd	Wed Sep  4 03:01:50 2002
@@ -1,20 +1,6 @@
-lib/modules/drivers/chips_drv.o
-lib/modules/drivers/cyrix_drv.o
-lib/modules/drivers/glint_drv.o
-lib/modules/drivers/i810_drv.o
-lib/modules/drivers/mga_drv.o
-lib/modules/drivers/neomagic_drv.o
-lib/modules/drivers/nv_drv.o
+lib/modules/drivers/ati_drv.o
 lib/modules/drivers/r128_drv.o
-lib/modules/drivers/s3virge_drv.o
-lib/modules/drivers/savage_drv.o
-lib/modules/drivers/sis_drv.o
-lib/modules/drivers/tdfx_drv.o
 lib/modules/drivers/trident_drv.o
-lib/modules/drivers/tseng_drv.o
-lib/modules/drivers/vga_drv.o
-lib/modules/extensions/libextmod.a
-lib/modules/fonts/libfreetype.a
-lib/modules/input/mouse_drv.o
-lib/modules/libvgahw.a
-lib/modules/libxf8_16bpp.a
+lib/modules/drivers/vesa_drv.o
+lib/modules/input/hyperpen_drv.o
+lib/modules/libxf8_32bpp.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD-aout/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD-aout/update-upd:1.4 xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD-aout/update-upd:1.4.2.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD-aout/update-upd:1.4	Tue Jan 15 21:34:35 2002
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/FreeBSD-aout/update-upd	Wed Sep  4 03:01:50 2002
@@ -1,42 +1,25 @@
-bin/SuperProbe
+.XFree86_Version
 bin/XFree86
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xf86cfg
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
-lib/X11/app-defaults/XF86Cfg
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
-lib/X11/config/gnu.cf
+lib/X11/config/cygwin.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
+lib/libX11.so
 lib/libX11.so.6.2
 lib/libXaw.a
+lib/libXaw.so
 lib/libXaw.so.6.1
 lib/libXaw.so.7.0
-lib/libXfont.a
-lib/libXfont.so.1.4
-lib/libXft.a
-lib/libXft.so.1.1
-lib/libfreetype.a
-lib/libfreetype.so.8.0
-man/man1/XFree86.1.gz
-man/man4/nv.4.gz
-man/man5/XF86Config.5.gz
+lib/libz.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/Interactive/drivers-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/Interactive/drivers-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/Interactive/drivers-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/Interactive/drivers-upd:1.2	Thu May 31 18:34:02 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/Interactive/drivers-upd	Wed Sep  4 03:01:50 2002
@@ -1,20 +1,6 @@
-lib/modules/drivers/chips_drv.o
-lib/modules/drivers/cyrix_drv.o
-lib/modules/drivers/glint_drv.o
-lib/modules/drivers/i810_drv.o
-lib/modules/drivers/mga_drv.o
-lib/modules/drivers/neomagic_drv.o
-lib/modules/drivers/nv_drv.o
+lib/modules/drivers/ati_drv.o
 lib/modules/drivers/r128_drv.o
-lib/modules/drivers/s3virge_drv.o
-lib/modules/drivers/savage_drv.o
-lib/modules/drivers/sis_drv.o
-lib/modules/drivers/tdfx_drv.o
 lib/modules/drivers/trident_drv.o
-lib/modules/drivers/tseng_drv.o
-lib/modules/drivers/vga_drv.o
-lib/modules/extensions/libextmod.a
-lib/modules/fonts/libfreetype.a
-lib/modules/input/mouse_drv.o
-lib/modules/libvgahw.a
-lib/modules/libxf8_16bpp.a
+lib/modules/drivers/vesa_drv.o
+lib/modules/input/hyperpen_drv.o
+lib/modules/libxf8_32bpp.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/Interactive/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/Interactive/update-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/Interactive/update-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/Interactive/update-upd:1.2	Thu May 31 18:34:02 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/Interactive/update-upd	Wed Sep  4 03:01:50 2002
@@ -1,36 +1,20 @@
-bin/SuperProbe
+.XFree86_Version
 bin/XFree86
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xf86cfg
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
-lib/X11/app-defaults/XF86Cfg
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
-lib/X11/config/gnu.cf
+lib/X11/config/cygwin.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libXaw.a
-lib/libXfont.a
-lib/libXft.a
-lib/libfreetype.a
-man/man1/XFree86.1x.Z
-man/man4/XF86Config.4.Z
-man/man7/nv.7.Z
+lib/libz.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-axp/drivers-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-axp/drivers-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-axp/drivers-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-axp/drivers-upd:1.2	Thu May 31 18:34:04 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-axp/drivers-upd	Wed Sep  4 03:01:50 2002
@@ -1,11 +1,5 @@
-lib/modules/drivers/glint_drv.o
-lib/modules/drivers/mga_drv.o
-lib/modules/drivers/nv_drv.o
-lib/modules/drivers/s3virge_drv.o
-lib/modules/drivers/savage_drv.o
-lib/modules/drivers/vga_drv.o
-lib/modules/extensions/libextmod.a
-lib/modules/fonts/libfreetype.a
-lib/modules/input/mouse_drv.o
-lib/modules/libvgahw.a
-lib/modules/libxf8_16bpp.a
+lib/modules/dri/r128_dri.so
+lib/modules/drivers/ati_drv.o
+lib/modules/drivers/r128_drv.o
+lib/modules/input/hyperpen_drv.o
+lib/modules/libxf8_32bpp.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-axp/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-axp/update-upd:1.4 xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-axp/update-upd:1.4.2.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-axp/update-upd:1.4	Tue Jan 15 21:34:36 2002
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-axp/update-upd	Wed Sep  4 03:01:50 2002
@@ -1,31 +1,20 @@
-bin/SuperProbe
+.XFree86_Version
 bin/XFree86
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xf86cfg
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
-lib/X11/app-defaults/XF86Cfg
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
-lib/X11/config/gnu.cf
+lib/X11/config/cygwin.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libX11.so
 lib/libX11.so.6
@@ -36,18 +25,3 @@
 lib/libXaw.so.6.1
 lib/libXaw.so.7
 lib/libXaw.so.7.0
-lib/libXfont.a
-lib/libXfont.so
-lib/libXfont.so.1
-lib/libXfont.so.1.4
-lib/libXft.a
-lib/libXft.so
-lib/libXft.so.1
-lib/libXft.so.1.1
-lib/libfreetype.a
-lib/libfreetype.so
-lib/libfreetype.so.6
-lib/libfreetype.so.6.2
-man/man1/XFree86.1x
-man/man4/nv.4
-man/man5/XF86Config.5x
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-ix86/drivers-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-ix86/drivers-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-ix86/drivers-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-ix86/drivers-upd:1.2	Thu May 31 18:34:09 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-ix86/drivers-upd	Wed Sep  4 03:01:50 2002
@@ -1,20 +1,7 @@
-lib/modules/drivers/chips_drv.o
-lib/modules/drivers/cyrix_drv.o
-lib/modules/drivers/glint_drv.o
-lib/modules/drivers/i810_drv.o
-lib/modules/drivers/mga_drv.o
-lib/modules/drivers/neomagic_drv.o
-lib/modules/drivers/nv_drv.o
+lib/modules/dri/r128_dri.so
+lib/modules/drivers/ati_drv.o
 lib/modules/drivers/r128_drv.o
-lib/modules/drivers/s3virge_drv.o
-lib/modules/drivers/savage_drv.o
-lib/modules/drivers/sis_drv.o
-lib/modules/drivers/tdfx_drv.o
 lib/modules/drivers/trident_drv.o
-lib/modules/drivers/tseng_drv.o
-lib/modules/drivers/vga_drv.o
-lib/modules/extensions/libextmod.a
-lib/modules/fonts/libfreetype.a
-lib/modules/input/mouse_drv.o
-lib/modules/libvgahw.a
-lib/modules/libxf8_16bpp.a
+lib/modules/drivers/vesa_drv.o
+lib/modules/input/hyperpen_drv.o
+lib/modules/libxf8_32bpp.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-ix86/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-ix86/update-upd:1.4 xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-ix86/update-upd:1.4.2.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-ix86/update-upd:1.4	Tue Jan 15 21:34:36 2002
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/Linux-ix86/update-upd	Wed Sep  4 03:01:50 2002
@@ -1,31 +1,20 @@
-bin/SuperProbe
+.XFree86_Version
 bin/XFree86
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xf86cfg
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
-lib/X11/app-defaults/XF86Cfg
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
-lib/X11/config/gnu.cf
+lib/X11/config/cygwin.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libX11.so
 lib/libX11.so.6
@@ -36,18 +25,4 @@
 lib/libXaw.so.6.1
 lib/libXaw.so.7
 lib/libXaw.so.7.0
-lib/libXfont.a
-lib/libXfont.so
-lib/libXfont.so.1
-lib/libXfont.so.1.4
-lib/libXft.a
-lib/libXft.so
-lib/libXft.so.1
-lib/libXft.so.1.1
-lib/libfreetype.a
-lib/libfreetype.so
-lib/libfreetype.so.6
-lib/libfreetype.so.6.2
-man/man1/XFree86.1x
-man/man4/nv.4
-man/man5/XF86Config.5x
+lib/libz.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/LynxOS/drivers-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/LynxOS/drivers-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/LynxOS/drivers-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/LynxOS/drivers-upd:1.2	Thu May 31 18:34:12 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/LynxOS/drivers-upd	Wed Sep  4 03:01:50 2002
@@ -1,20 +1,6 @@
-lib/modules/drivers/chips_drv.o
-lib/modules/drivers/cyrix_drv.o
-lib/modules/drivers/glint_drv.o
-lib/modules/drivers/i810_drv.o
-lib/modules/drivers/mga_drv.o
-lib/modules/drivers/neomagic_drv.o
-lib/modules/drivers/nv_drv.o
+lib/modules/drivers/ati_drv.o
 lib/modules/drivers/r128_drv.o
-lib/modules/drivers/s3virge_drv.o
-lib/modules/drivers/savage_drv.o
-lib/modules/drivers/sis_drv.o
-lib/modules/drivers/tdfx_drv.o
 lib/modules/drivers/trident_drv.o
-lib/modules/drivers/tseng_drv.o
-lib/modules/drivers/vga_drv.o
-lib/modules/extensions/libextmod.a
-lib/modules/fonts/libfreetype.a
-lib/modules/input/mouse_drv.o
-lib/modules/libvgahw.a
-lib/modules/libxf8_16bpp.a
+lib/modules/drivers/vesa_drv.o
+lib/modules/input/hyperpen_drv.o
+lib/modules/libxf8_32bpp.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/LynxOS/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/LynxOS/update-upd:1.4 xc/programs/Xserver/hw/xfree86/etc/bindist/LynxOS/update-upd:1.4.2.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/LynxOS/update-upd:1.4	Tue Jan 15 21:34:38 2002
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/LynxOS/update-upd	Wed Sep  4 03:01:50 2002
@@ -1,31 +1,20 @@
-bin/SuperProbe
+.XFree86_Version
 bin/XFree86
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xf86cfg
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
-lib/X11/app-defaults/XF86Cfg
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
-lib/X11/config/gnu.cf
+lib/X11/config/cygwin.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libX11.so
 lib/libX11.so.6
@@ -33,15 +22,3 @@
 lib/libXaw.so
 lib/libXaw.so.6
 lib/libXaw.so.7
-lib/libXfont.a
-lib/libXfont.so
-lib/libXfont.so.1
-lib/libXft.a
-lib/libXft.so
-lib/libXft.so.1
-lib/libfreetype.a
-lib/libfreetype.so
-lib/libfreetype.so.8
-man/cat1/XFree86.1
-man/cat4/nv.4
-man/cat5/XF86Config.5
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-aout-ix86/drivers-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-aout-ix86/drivers-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-aout-ix86/drivers-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-aout-ix86/drivers-upd:1.2	Thu May 31 18:34:15 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-aout-ix86/drivers-upd	Wed Sep  4 03:01:50 2002
@@ -1,19 +1,6 @@
-lib/modules/drivers/chips_drv.o
-lib/modules/drivers/cyrix_drv.o
-lib/modules/drivers/glint_drv.o
-lib/modules/drivers/mga_drv.o
-lib/modules/drivers/neomagic_drv.o
-lib/modules/drivers/nv_drv.o
+lib/modules/drivers/ati_drv.o
 lib/modules/drivers/r128_drv.o
-lib/modules/drivers/s3virge_drv.o
-lib/modules/drivers/savage_drv.o
-lib/modules/drivers/sis_drv.o
-lib/modules/drivers/tdfx_drv.o
 lib/modules/drivers/trident_drv.o
-lib/modules/drivers/tseng_drv.o
-lib/modules/drivers/vga_drv.o
-lib/modules/extensions/libextmod.a
-lib/modules/fonts/libfreetype.a
-lib/modules/input/mouse_drv.o
-lib/modules/libvgahw.a
-lib/modules/libxf8_16bpp.a
+lib/modules/drivers/vesa_drv.o
+lib/modules/input/hyperpen_drv.o
+lib/modules/libxf8_32bpp.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-aout-ix86/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-aout-ix86/update-upd:1.4 xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-aout-ix86/update-upd:1.4.2.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-aout-ix86/update-upd:1.4	Tue Jan 15 21:34:38 2002
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-aout-ix86/update-upd	Wed Sep  4 03:01:50 2002
@@ -1,42 +1,22 @@
-bin/SuperProbe
+.XFree86_Version
 bin/XFree86
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xf86cfg
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
-lib/X11/app-defaults/XF86Cfg
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
-lib/X11/config/gnu.cf
+lib/X11/config/cygwin.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libX11.so.6.2
 lib/libXaw.a
 lib/libXaw.so.6.1
 lib/libXaw.so.7.0
-lib/libXfont.a
-lib/libXfont.so.1.4
-lib/libXft.a
-lib/libXft.so.1.1
-lib/libfreetype.a
-lib/libfreetype.so.8.0
-man/cat1/XFree86.0
-man/cat4/nv.0
-man/cat5/XF86Config.0
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-ix86/drivers-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-ix86/drivers-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-ix86/drivers-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-ix86/drivers-upd:1.2	Thu May 31 18:34:17 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-ix86/drivers-upd	Wed Sep  4 03:01:51 2002
@@ -1,19 +1,6 @@
-lib/modules/drivers/chips_drv.o
-lib/modules/drivers/cyrix_drv.o
-lib/modules/drivers/glint_drv.o
-lib/modules/drivers/mga_drv.o
-lib/modules/drivers/neomagic_drv.o
-lib/modules/drivers/nv_drv.o
+lib/modules/drivers/ati_drv.o
 lib/modules/drivers/r128_drv.o
-lib/modules/drivers/s3virge_drv.o
-lib/modules/drivers/savage_drv.o
-lib/modules/drivers/sis_drv.o
-lib/modules/drivers/tdfx_drv.o
 lib/modules/drivers/trident_drv.o
-lib/modules/drivers/tseng_drv.o
-lib/modules/drivers/vga_drv.o
-lib/modules/extensions/libextmod.a
-lib/modules/fonts/libfreetype.a
-lib/modules/input/mouse_drv.o
-lib/modules/libvgahw.a
-lib/modules/libxf8_16bpp.a
+lib/modules/drivers/vesa_drv.o
+lib/modules/input/hyperpen_drv.o
+lib/modules/libxf8_32bpp.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-ix86/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-ix86/update-upd:1.4 xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-ix86/update-upd:1.4.2.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-ix86/update-upd:1.4	Tue Jan 15 21:34:38 2002
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/NetBSD-ix86/update-upd	Wed Sep  4 03:01:51 2002
@@ -1,31 +1,20 @@
-bin/SuperProbe
+.XFree86_Version
 bin/XFree86
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xf86cfg
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
-lib/X11/app-defaults/XF86Cfg
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
-lib/X11/config/gnu.cf
+lib/X11/config/cygwin.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libX11.so
 lib/libX11.so.6
@@ -36,18 +25,3 @@
 lib/libXaw.so.6.1
 lib/libXaw.so.7
 lib/libXaw.so.7.0
-lib/libXfont.a
-lib/libXfont.so
-lib/libXfont.so.1
-lib/libXfont.so.1.4
-lib/libXft.a
-lib/libXft.so
-lib/libXft.so.1
-lib/libXft.so.1.1
-lib/libfreetype.a
-lib/libfreetype.so
-lib/libfreetype.so.8
-lib/libfreetype.so.8.0
-man/cat1/XFree86.0
-man/cat4/nv.0
-man/cat5/XF86Config.0
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/OpenBSD-ix86/drivers-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/OpenBSD-ix86/drivers-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/OpenBSD-ix86/drivers-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/OpenBSD-ix86/drivers-upd:1.2	Thu May 31 18:34:20 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/OpenBSD-ix86/drivers-upd	Wed Sep  4 03:01:51 2002
@@ -1,19 +1,6 @@
-lib/modules/drivers/chips_drv.o
-lib/modules/drivers/cyrix_drv.o
-lib/modules/drivers/glint_drv.o
-lib/modules/drivers/mga_drv.o
-lib/modules/drivers/neomagic_drv.o
-lib/modules/drivers/nv_drv.o
+lib/modules/drivers/ati_drv.o
 lib/modules/drivers/r128_drv.o
-lib/modules/drivers/s3virge_drv.o
-lib/modules/drivers/savage_drv.o
-lib/modules/drivers/sis_drv.o
-lib/modules/drivers/tdfx_drv.o
 lib/modules/drivers/trident_drv.o
-lib/modules/drivers/tseng_drv.o
-lib/modules/drivers/vga_drv.o
-lib/modules/extensions/libextmod.a
-lib/modules/fonts/libfreetype.a
-lib/modules/input/mouse_drv.o
-lib/modules/libvgahw.a
-lib/modules/libxf8_16bpp.a
+lib/modules/drivers/vesa_drv.o
+lib/modules/input/hyperpen_drv.o
+lib/modules/libxf8_32bpp.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/OpenBSD-ix86/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/OpenBSD-ix86/update-upd:1.4 xc/programs/Xserver/hw/xfree86/etc/bindist/OpenBSD-ix86/update-upd:1.4.2.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/OpenBSD-ix86/update-upd:1.4	Tue Jan 15 21:34:39 2002
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/OpenBSD-ix86/update-upd	Wed Sep  4 03:01:51 2002
@@ -1,42 +1,22 @@
-bin/SuperProbe
+.XFree86_Version
 bin/XFree86
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xf86cfg
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
-lib/X11/app-defaults/XF86Cfg
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
-lib/X11/config/gnu.cf
+lib/X11/config/cygwin.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libX11.so.6.2
 lib/libXaw.a
 lib/libXaw.so.6.1
 lib/libXaw.so.7.0
-lib/libXfont.a
-lib/libXfont.so.1.4
-lib/libXft.a
-lib/libXft.so.1.1
-lib/libfreetype.a
-lib/libfreetype.so.8.0
-man/cat1/XFree86.0
-man/cat4/nv.0
-man/cat5/XF86Config.0
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/SVR4.0/drivers-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/SVR4.0/drivers-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/SVR4.0/drivers-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/SVR4.0/drivers-upd:1.2	Thu May 31 18:34:22 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/SVR4.0/drivers-upd	Wed Sep  4 03:01:51 2002
@@ -1,20 +1,6 @@
-lib/modules/drivers/chips_drv.o
-lib/modules/drivers/cyrix_drv.o
-lib/modules/drivers/glint_drv.o
-lib/modules/drivers/i810_drv.o
-lib/modules/drivers/mga_drv.o
-lib/modules/drivers/neomagic_drv.o
-lib/modules/drivers/nv_drv.o
+lib/modules/drivers/ati_drv.o
 lib/modules/drivers/r128_drv.o
-lib/modules/drivers/s3virge_drv.o
-lib/modules/drivers/savage_drv.o
-lib/modules/drivers/sis_drv.o
-lib/modules/drivers/tdfx_drv.o
 lib/modules/drivers/trident_drv.o
-lib/modules/drivers/tseng_drv.o
-lib/modules/drivers/vga_drv.o
-lib/modules/extensions/libextmod.a
-lib/modules/fonts/libfreetype.a
-lib/modules/input/mouse_drv.o
-lib/modules/libvgahw.a
-lib/modules/libxf8_16bpp.a
+lib/modules/drivers/vesa_drv.o
+lib/modules/input/hyperpen_drv.o
+lib/modules/libxf8_32bpp.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/SVR4.0/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/SVR4.0/update-upd:1.4 xc/programs/Xserver/hw/xfree86/etc/bindist/SVR4.0/update-upd:1.4.2.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/SVR4.0/update-upd:1.4	Tue Jan 15 21:34:39 2002
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/SVR4.0/update-upd	Wed Sep  4 03:01:51 2002
@@ -1,31 +1,20 @@
-bin/SuperProbe
+.XFree86_Version
 bin/XFree86
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xf86cfg
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
-lib/X11/app-defaults/XF86Cfg
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
-lib/X11/config/gnu.cf
+lib/X11/config/cygwin.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libX11.so
 lib/libX11.so.6.2
@@ -33,15 +22,4 @@
 lib/libXaw.so
 lib/libXaw.so.6.1
 lib/libXaw.so.7.0
-lib/libXfont.a
-lib/libXfont.so
-lib/libXfont.so.1.4
-lib/libXft.a
-lib/libXft.so
-lib/libXft.so.1.1
-lib/libfreetype.a
-lib/libfreetype.so
-lib/libfreetype.so.6.2
-man/man1/XFree86.1x
-man/man4/XF86Config.4
-man/man7/nv.7
+lib/libz.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/Solaris/drivers-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/Solaris/drivers-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/Solaris/drivers-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/Solaris/drivers-upd:1.2	Thu May 31 18:34:23 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/Solaris/drivers-upd	Wed Sep  4 03:01:51 2002
@@ -1,20 +1,6 @@
-lib/modules/drivers/chips_drv.o
-lib/modules/drivers/cyrix_drv.o
-lib/modules/drivers/glint_drv.o
-lib/modules/drivers/i810_drv.o
-lib/modules/drivers/mga_drv.o
-lib/modules/drivers/neomagic_drv.o
-lib/modules/drivers/nv_drv.o
+lib/modules/drivers/ati_drv.o
 lib/modules/drivers/r128_drv.o
-lib/modules/drivers/s3virge_drv.o
-lib/modules/drivers/savage_drv.o
-lib/modules/drivers/sis_drv.o
-lib/modules/drivers/tdfx_drv.o
 lib/modules/drivers/trident_drv.o
-lib/modules/drivers/tseng_drv.o
-lib/modules/drivers/vga_drv.o
-lib/modules/extensions/libextmod.a
-lib/modules/fonts/libfreetype.a
-lib/modules/input/mouse_drv.o
-lib/modules/libvgahw.a
-lib/modules/libxf8_16bpp.a
+lib/modules/drivers/vesa_drv.o
+lib/modules/input/hyperpen_drv.o
+lib/modules/libxf8_32bpp.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/Solaris/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/Solaris/update-upd:1.4 xc/programs/Xserver/hw/xfree86/etc/bindist/Solaris/update-upd:1.4.2.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/Solaris/update-upd:1.4	Tue Jan 15 21:34:40 2002
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/Solaris/update-upd	Wed Sep  4 03:01:51 2002
@@ -1,31 +1,20 @@
-bin/SuperProbe
+.XFree86_Version
 bin/XFree86
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xf86cfg
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
-lib/X11/app-defaults/XF86Cfg
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
-lib/X11/config/gnu.cf
+lib/X11/config/cygwin.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libX11.so
 lib/libX11.so.6.2
@@ -33,15 +22,4 @@
 lib/libXaw.so
 lib/libXaw.so.6.1
 lib/libXaw.so.7.0
-lib/libXfont.a
-lib/libXfont.so
-lib/libXfont.so.1.4
-lib/libXft.a
-lib/libXft.so
-lib/libXft.so.1.1
-lib/libfreetype.a
-lib/libfreetype.so
-lib/libfreetype.so.6.2
-man/man1/XFree86.1x
-man/man4/XF86Config.4
-man/man7/nv.7
+lib/libz.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/UnixWare/drivers-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/UnixWare/drivers-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/UnixWare/drivers-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/UnixWare/drivers-upd:1.2	Thu May 31 18:34:26 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/UnixWare/drivers-upd	Wed Sep  4 03:01:52 2002
@@ -1,20 +1,6 @@
-lib/modules/drivers/chips_drv.o
-lib/modules/drivers/cyrix_drv.o
-lib/modules/drivers/glint_drv.o
-lib/modules/drivers/i810_drv.o
-lib/modules/drivers/mga_drv.o
-lib/modules/drivers/neomagic_drv.o
-lib/modules/drivers/nv_drv.o
+lib/modules/drivers/ati_drv.o
 lib/modules/drivers/r128_drv.o
-lib/modules/drivers/s3virge_drv.o
-lib/modules/drivers/savage_drv.o
-lib/modules/drivers/sis_drv.o
-lib/modules/drivers/tdfx_drv.o
 lib/modules/drivers/trident_drv.o
-lib/modules/drivers/tseng_drv.o
-lib/modules/drivers/vga_drv.o
-lib/modules/extensions/libextmod.a
-lib/modules/fonts/libfreetype.a
-lib/modules/input/mouse_drv.o
-lib/modules/libvgahw.a
-lib/modules/libxf8_16bpp.a
+lib/modules/drivers/vesa_drv.o
+lib/modules/input/hyperpen_drv.o
+lib/modules/libxf8_32bpp.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/UnixWare/update-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/UnixWare/update-upd:1.4 xc/programs/Xserver/hw/xfree86/etc/bindist/UnixWare/update-upd:1.4.2.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/UnixWare/update-upd:1.4	Tue Jan 15 21:34:40 2002
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/UnixWare/update-upd	Wed Sep  4 03:01:52 2002
@@ -1,31 +1,20 @@
-bin/SuperProbe
+.XFree86_Version
 bin/XFree86
-bin/gccmakedep
-bin/mkhtmlindex
-bin/rman
-bin/pswrap
-bin/twm
-bin/xedit
-bin/xfs
-bin/xf86cfg
-bin/xman
-bin/xterm
-include/X11/Xos.h
-include/X11/Xosdefs.h
-include/X11/Xos_r.h
-lib/X11/app-defaults/XF86Cfg
+bin/xon
+bin/startx
+lib/X11/app-defaults/Xedit-color
 lib/X11/config/FreeBSD.cf
-lib/X11/config/Imake.rules
 lib/X11/config/Imake.tmpl
 lib/X11/config/NetBSD.cf
 lib/X11/config/OpenBSD.cf
 lib/X11/config/X11.tmpl
-lib/X11/config/gnu.cf
+lib/X11/config/cygwin.cf
+lib/X11/config/darwin.cf
+lib/X11/config/darwinLib.rules
+lib/X11/config/darwinLib.tmpl
 lib/X11/config/linux.cf
-lib/X11/config/osf1.cf
-lib/X11/config/xfree86.cf
-lib/X11/xkb/rules/xfree86.lst
-lib/X11/xkb/symbols/us
+lib/X11/config/sun.cf
+lib/X11/xkb/symbols/us_intl
 lib/libX11.a
 lib/libX11.so
 lib/libX11.so.6.2
@@ -33,15 +22,4 @@
 lib/libXaw.so
 lib/libXaw.so.6.1
 lib/libXaw.so.7.0
-lib/libXfont.a
-lib/libXfont.so
-lib/libXfont.so.1.4
-lib/libXft.a
-lib/libXft.so
-lib/libXft.so.1.1
-lib/libfreetype.a
-lib/libfreetype.so
-lib/libfreetype.so.6.2
-man/man1/XFree86.1x
-man/man4/XF86Config.4
-man/man7/nv.7
+lib/libz.a
Index: xc/programs/Xserver/hw/xfree86/etc/bindist/common/docupd-upd
diff -u xc/programs/Xserver/hw/xfree86/etc/bindist/common/docupd-upd:1.2 xc/programs/Xserver/hw/xfree86/etc/bindist/common/docupd-upd:1.2.6.1
--- xc/programs/Xserver/hw/xfree86/etc/bindist/common/docupd-upd:1.2	Thu May 31 18:34:28 2001
+++ xc/programs/Xserver/hw/xfree86/etc/bindist/common/docupd-upd	Wed Sep  4 03:01:52 2002
@@ -1,40 +1,10 @@
 lib/X11/doc/BugReport
-lib/X11/doc/DESIGN
 lib/X11/doc/Install
-lib/X11/doc/LICENSE
 lib/X11/doc/README
-lib/X11/doc/README.NetBSD
-lib/X11/doc/README.OpenBSD
-lib/X11/doc/README.fonts
 lib/X11/doc/RELNOTES
-lib/X11/doc/Status
-lib/X11/doc/Versions
-lib/X11/doc/PostScript/DESIGN.ps
 lib/X11/doc/PostScript/Install.ps
-lib/X11/doc/PostScript/LICENSE.ps
 lib/X11/doc/PostScript/README.ps
-lib/X11/doc/PostScript/NetBSD.ps
-lib/X11/doc/PostScript/OpenBSD.ps
 lib/X11/doc/PostScript/RELNOTES.ps
-lib/X11/doc/PostScript/Status.ps
-lib/X11/doc/PostScript/Versions.ps
-lib/X11/doc/PostScript/fonts.ps
-lib/X11/doc/html/DESIGN*.html
 lib/X11/doc/html/Install*.html
-lib/X11/doc/html/LICENSE*.html
-lib/X11/doc/html/NetBSD*.html
-lib/X11/doc/html/OpenBSD*.html
 lib/X11/doc/html/README*.html
 lib/X11/doc/html/RELNOTES*.html
-lib/X11/doc/html/Status*.html
-lib/X11/doc/html/Versions*.html
-lib/X11/doc/html/XF86Config.5.html
-lib/X11/doc/html/XFree86.1.html
-lib/X11/doc/html/index.html
-lib/X11/doc/html/fonts*.html
-lib/X11/doc/html/manindex1.html
-lib/X11/doc/html/manindex3.html
-lib/X11/doc/html/manindex4.html
-lib/X11/doc/html/manindex5.html
-lib/X11/doc/html/manindex7.html
-lib/X11/doc/html/nv.4.html
Index: xc/programs/Xserver/hw/xfree86/input/hyperpen/xf86HyperPen.c
diff -u xc/programs/Xserver/hw/xfree86/input/hyperpen/xf86HyperPen.c:1.5 xc/programs/Xserver/hw/xfree86/input/hyperpen/xf86HyperPen.c:1.5.2.1
--- xc/programs/Xserver/hw/xfree86/input/hyperpen/xf86HyperPen.c:1.5	Wed Dec 26 21:51:58 2001
+++ xc/programs/Xserver/hw/xfree86/input/hyperpen/xf86HyperPen.c	Mon Feb 25 20:17:51 2002
@@ -35,7 +35,7 @@
  * TORTIOUS ACTIONS, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  * PERFORMANCE OF THIS SOFTWARE.
  */
-/* $XFree86: xc/programs/Xserver/hw/xfree86/input/hyperpen/xf86HyperPen.c,v 1.5 2001/12/26 21:51:58 dawes Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/input/hyperpen/xf86HyperPen.c,v 1.5.2.1 2002/02/25 20:17:51 dawes Exp $ */
 
 #include <xf86Version.h>
 
@@ -1779,7 +1779,7 @@
 				/* a tool */
 };
 
-XF86ModuleData HyperPenModuleData = {&xf86HypVersionRec,
+XF86ModuleData hyperpenModuleData = {&xf86HypVersionRec,
 					xf86HypPlug,
 					xf86HypUnplug};
 
Index: xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_mouse.c
diff -u xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_mouse.c:1.20 xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_mouse.c:1.20.2.1
--- xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_mouse.c:1.20	Mon Jan 14 15:34:23 2002
+++ xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_mouse.c	Sun Jan 27 19:05:19 2002
@@ -1,4 +1,4 @@
-/* $XFree86: xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_mouse.c,v 1.20 2002/01/14 15:34:23 dawes Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/os-support/bsd/bsd_mouse.c,v 1.20.2.1 2002/01/27 19:05:19 herrb Exp $ */
 
 /*
  * Copyright 1999 by The XFree86 Project, Inc.
@@ -36,9 +36,6 @@
 #define UMS_BUT(i) ((i) == 0 ? 2 : (i) == 1 ? 0 : (i) == 2 ? 1 : (i))
 #endif /* USBMOUSE_SUPPORT */
 
-#ifdef WSCONS_SUPPORT
-static void wsconsSigioReadInput (int fd, void *closure);
-#endif
 #ifdef USBMOUSE_SUPPORT
 static void usbSigioReadInput (int fd, void *closure);
 #endif
@@ -196,82 +193,6 @@
 #if defined(WSCONS_SUPPORT)
 #define NUMEVENTS 64
 
-static int
-wsconsMouseProc(DeviceIntPtr pPointer, int what)
-{
-    InputInfoPtr pInfo;
-    MouseDevPtr pMse;
-    unsigned char map[MSE_MAXBUTTONS + 1];
-    int nbuttons;
-
-    pInfo = pPointer->public.devicePrivate;
-    pMse = pInfo->private;
-    pMse->device = pPointer;
-
-    switch (what) {
-    case DEVICE_INIT: 
-	pPointer->public.on = FALSE;
-
-	for (nbuttons = 0; nbuttons < MSE_MAXBUTTONS; ++nbuttons)
-	    map[nbuttons + 1] = nbuttons + 1;
-
-	InitPointerDeviceStruct((DevicePtr)pPointer, 
-				map, 
-				min(pMse->buttons, MSE_MAXBUTTONS),
-				miPointerGetMotionEvents, 
-				pMse->Ctrl,
-				miPointerGetMotionBufferSize());
-
-	/* X valuator */
-	xf86InitValuatorAxisStruct(pPointer, 0, 0, -1, 1, 0, 1);
-	xf86InitValuatorDefaults(pPointer, 0);
-	/* Y valuator */
-	xf86InitValuatorAxisStruct(pPointer, 1, 0, -1, 1, 0, 1);
-	xf86InitValuatorDefaults(pPointer, 1);
-	xf86MotionHistoryAllocate(pInfo);
-	break;
-
-    case DEVICE_ON:
-	pInfo->fd = xf86OpenSerial(pInfo->options);
-	if (pInfo->fd == -1)
-	    xf86Msg(X_WARNING, "%s: cannot open input device\n", pInfo->name);
-	else {
-	    pMse->buffer = XisbNew(pInfo->fd,
-			      NUMEVENTS * sizeof(struct wscons_event));
-	    if (!pMse->buffer) {
-		xfree(pMse);
-		xf86CloseSerial(pInfo->fd);
-		pInfo->fd = -1;
-	    } else {
-		xf86FlushInput(pInfo->fd);
-		if (!xf86InstallSIGIOHandler (pInfo->fd, wsconsSigioReadInput, pInfo))
-		    AddEnabledDevice(pInfo->fd);
-	    }
-	}
-	pMse->lastButtons = 0;
-	pMse->emulateState = 0;
-	pPointer->public.on = TRUE;
-	break;
-
-    case DEVICE_OFF:
-    case DEVICE_CLOSE:
-	if (pInfo->fd != -1) {
-	    RemoveEnabledDevice(pInfo->fd);
-	    if (pMse->buffer) {
-		XisbFree(pMse->buffer);
-		pMse->buffer = NULL;
-	    }
-	    xf86CloseSerial(pInfo->fd);
-	    pInfo->fd = -1;
-	}
-	pPointer->public.on = FALSE;
-	usleep(300000);
-	break;
-    }
-    return Success;
-}
-
-
 static void
 wsconsReadInput(InputInfoPtr pInfo)
 {
@@ -328,12 +249,6 @@
     return;
 }
 
-static void
-wsconsSigioReadInput (int fd, void *closure)
-{
-    wsconsReadInput ((InputInfoPtr) closure);
-}
-
 
 /* This function is called when the protocol is "wsmouse". */
 static Bool
@@ -365,8 +280,7 @@
     /* Process common mouse options (like Emulate3Buttons, etc). */
     pMse->CommonOptions(pInfo);
 
-    /* Setup the local procs. */
-    pInfo->device_control = wsconsMouseProc;
+    /* Setup the local input proc. */
     pInfo->read_input = wsconsReadInput;
 
     pInfo->flags |= XI86_CONFIGURED;
Index: xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/i810_dma.c
diff -u xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/i810_dma.c:1.15 xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/i810_dma.c:1.15.4.1
--- xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/i810_dma.c:1.15	Tue Oct  2 11:44:17 2001
+++ xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/i810_dma.c	Thu Aug 22 15:27:37 2002
@@ -290,14 +290,18 @@
 
 static void i810_free_page(drm_device_t *dev, unsigned long page)
 {
-	if(page == 0UL)
-		return;
-
-	atomic_dec(&virt_to_page(page)->count);
-	clear_bit(PG_locked, &virt_to_page(page)->flags);
-	wake_up(&virt_to_page(page)->wait);
-	free_page(page);
-	return;
+	if (page) {
+#if LINUX_VERSION_CODE < 0x020409
+		atomic_dec(&virt_to_page(page)->count);
+		clear_bit(PG_locked, &virt_to_page(page)->flags);
+		wake_up(&virt_to_page(page)->wait);
+#else
+		struct page *p = virt_to_page(page);
+		put_page(p);
+		unlock_page(p);
+#endif
+		free_page(page);
+	}
 }
 
 static int i810_dma_cleanup(drm_device_t *dev)
Index: xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/i830_dma.c
diff -u xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/i830_dma.c:1.1 xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/i830_dma.c:1.1.4.1
--- xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/i830_dma.c:1.1	Thu Oct  4 18:28:22 2001
+++ xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/i830_dma.c	Thu Aug 22 15:27:38 2002
@@ -312,14 +312,18 @@
 
 static void i830_free_page(drm_device_t *dev, unsigned long page)
 {
-	if(page == 0UL) 
-		return;
-	
-	atomic_dec(&virt_to_page(page)->count);
-	clear_bit(PG_locked, &virt_to_page(page)->flags);
-	wake_up(&virt_to_page(page)->wait);
-	free_page(page);
-	return;
+	if (page) {
+#if LINUX_VERSION_CODE < 0x020409
+		atomic_dec(&virt_to_page(page)->count);
+		clear_bit(PG_locked, &virt_to_page(page)->flags);
+		wake_up(&virt_to_page(page)->wait);
+#else
+		struct page *p = virt_to_page(page);
+		put_page(p);
+		unlock_page(p);
+#endif
+		free_page(page);
+	}
 }
 
 static int i830_dma_cleanup(drm_device_t *dev)
Index: xc/programs/Xserver/hw/xfree86/xf8_32bpp/xf86overlay.c
diff -u xc/programs/Xserver/hw/xfree86/xf8_32bpp/xf86overlay.c:1.8 xc/programs/Xserver/hw/xfree86/xf8_32bpp/xf86overlay.c:1.8.8.1
--- xc/programs/Xserver/hw/xfree86/xf8_32bpp/xf86overlay.c:1.8	Sat Mar 25 20:14:43 2000
+++ xc/programs/Xserver/hw/xfree86/xf8_32bpp/xf86overlay.c	Mon Feb 11 00:07:42 2002
@@ -1,4 +1,4 @@
-/* $XFree86: xc/programs/Xserver/hw/xfree86/xf8_32bpp/xf86overlay.c,v 1.8 2000/03/25 20:14:43 mvojkovi Exp $ */
+/* $XFree86: xc/programs/Xserver/hw/xfree86/xf8_32bpp/xf86overlay.c,v 1.8.8.1 2002/02/11 00:07:42 dawes Exp $ */
 
 /*
    Copyright (C) 1998.  The XFree86 Project Inc.
@@ -311,6 +311,7 @@
 
 	pmap->red[pScrn->colorKey].refcnt = AllocPrivate;
 	pmap->red[pScrn->colorKey].fShared = FALSE;
+	pmap->freeRed--;
 	
 	color.red = color.blue = color.green = 0;
 	color.pixel = pScrn->colorKey;
Index: xc/programs/Xserver/os/xdmcp.c
diff -u xc/programs/Xserver/os/xdmcp.c:3.20 xc/programs/Xserver/os/xdmcp.c:3.20.4.1
--- xc/programs/Xserver/os/xdmcp.c:3.20	Mon Nov 19 20:44:18 2001
+++ xc/programs/Xserver/os/xdmcp.c	Mon Mar 11 18:59:51 2002
@@ -13,7 +13,7 @@
  * without express or implied warranty.
  *
  */
-/* $XFree86: xc/programs/Xserver/os/xdmcp.c,v 3.20 2001/11/19 20:44:18 tsi Exp $ */
+/* $XFree86: xc/programs/Xserver/os/xdmcp.c,v 3.20.4.1 2002/03/11 18:59:51 keithp Exp $ */
 
 #ifdef WIN32
 /* avoid conflicting definitions */
@@ -660,34 +660,17 @@
     pointer	    pReadmask)
 {
     fd_set *LastSelectMask = (fd_set*)pReadmask;
-    CARD32 millisToGo, wtMillis;
-    static struct timeval waittime;
+    CARD32 millisToGo;
 
     if (state == XDM_OFF)
 	return;
     FD_SET(xdmcpSocket, LastSelectMask);
     if (timeOutTime == 0)
 	return;
-    millisToGo = GetTimeInMillis();
-    if (millisToGo < timeOutTime)
-	millisToGo = timeOutTime - millisToGo;
-    else
+    millisToGo = timeOutTime - GetTimeInMillis();
+    if ((int) millisToGo < 0)
 	millisToGo = 0;
-    if (*wt == NULL)
-    {
-	waittime.tv_sec = (millisToGo) / 1000;
-	waittime.tv_usec = 1000 * (millisToGo % 1000);
-	*wt = &waittime;
-    }
-    else
-    {
-	wtMillis = (*wt)->tv_sec * 1000 + (*wt)->tv_usec / 1000;
-	if (millisToGo < wtMillis)
- 	{
-	    (*wt)->tv_sec = (millisToGo) / 1000;
-	    (*wt)->tv_usec = 1000 * (millisToGo % 1000);
-	}
-    }
+    AdjustWaitForDelay (wt, millisToGo);
 }
 
 /*
@@ -726,7 +709,7 @@
 	if (XFD_ANYSET(&AllClients) && state == XDM_RUN_SESSION)
 	    timeOutTime = GetTimeInMillis() +  keepaliveDormancy * 1000;
     }
-    else if (timeOutTime && GetTimeInMillis() >= timeOutTime)
+    else if (timeOutTime && (int) (GetTimeInMillis() - timeOutTime) >= 0)
     {
     	if (state == XDM_RUN_SESSION)
     	{
Index: xc/programs/bitmap/Bitmap-nocase.ad
diff -u /dev/null xc/programs/bitmap/Bitmap-nocase.ad:1.1.2.1
--- /dev/null	Sat Sep  7 14:07:30 2002
+++ xc/programs/bitmap/Bitmap-nocase.ad	Sat Jun  1 00:04:37 2002
@@ -0,0 +1,233 @@
+! $Xorg: Bitmap.ad,v 1.3 2000/08/17 19:53:49 cpqbld Exp $
+!
+! $XFree86: xc/programs/bitmap/Bitmap-nocase.ad,v 1.1.2.1 2002/06/01 00:04:37 torrey Exp $
+!
+! The App-defaults file for Bitmap for use on file systems
+! that are not case sensitive.
+
+*TransientShell.allowShellResize:	True
+*shapeStyle:				oval
+*cursor:				left_ptr
+*pane.orientation:			horizontal
+
+*Form*top:				ChainTop
+*Form*bottom:				ChainTop
+*Form*left:				ChainLeft
+*Form*right:				ChainLeft
+
+*MenuButton.leftBitmap:			menu12
+*form*width:              		120
+*form*height:             		15
+
+*baseTranslations:#override\
+			Ctrl<Key>c:	do-quit()\n\
+			<Key>q:		do-quit()\n\
+			Ctrl<Key>n:	do-new()\n\
+			Ctrl<Key>f:	do-load()\n\
+			Ctrl<Key>i:	do-insert()\n\
+			Ctrl<Key>s:	do-save()\n\
+			Ctrl<Key>w:	do-save-as()\n\
+			Ctrl<Key>r:	do-resize()\n\
+			Ctrl<Key>x:	do-rescale()\n\
+			Ctrl<Key>e:	do-filename()\n\
+			Ctrl<Key>b:	do-basename()\n\
+			Meta<Key>i:	switch-image()\n\
+			Meta<Key>g:	switch-grid()\n\
+			Meta<Key>d:	switch-dashed()\n\
+			Meta<Key>a:	switch-axes()\n\
+			Meta<Key>s:	switch-stippled()\n\
+			Meta<Key>p:	switch-proportional()\n\
+			Meta<Key>z:	switch-zoom()\n\
+			Meta<Key>c:	do-cut()\n\
+			Meta<Key>w:	do-copy()\n\
+			Meta<Key>y:	do-paste()
+
+
+*Toggle.translations:	<EnterWindow>:		highlight(WhenUnset)\n\
+			<LeaveWindow>:		unhighlight()\n\
+			<Btn1Down>,<Btn1Up>: 	set() notify()
+
+*MenuButton.translations:<EnterWindow>:		highlight()\n\
+			<LeaveWindow>:  	reset()\n\
+			Any<BtnDown>:  		reset() fix-menu() PopupMenu()
+
+*Dialog*baseTranslations:#override\
+			<Key>Return:	set-dialog-button(okay, yes, retry)\n\
+			Ctrl<Key>g:	set-dialog-button(cancel, abort)
+*image*baseTranslations:#override\
+			<Btn1Down>,<Btn1Up>:	switch-image()
+*image*width: 0
+*image*height: 0
+*image*Label.internalWidth: 0
+*image*Label.internalHeight: 0
+*image*normalImage.foreground: white
+*image*normalImage.background: black
+*image*invertedImage.foreground: black
+*image*invertedImage.background: white
+
+*bitmap.cursor:           		tcross
+*bitmap.dashes:				Dashes
+*bitmap.stipple:			Stippler
+*bitmap.stippled:			on
+
+*TransientShell.width:			300
+
+*input*icon:				Term
+*qsave*icon:				Term
+*error*icon:				Excl
+*Dialog.yes.label:			Yes
+*Dialog.no.label:			No
+*Dialog.okay.label:			OK
+*Dialog.abort.label:			Abort
+*Dialog.cancel.label:			Cancel
+*Dialog.retry.label:			Retry
+
+*MenuButton.width:			58
+
+*SimpleMenu.width:			0
+*SimpleMenu.height:			0
+*SimpleMenu.cursor:			hand2
+*SimpleMenu.line.height:		0
+
+*fileButton.label:			File
+*fileButton.menuName:			fileMenu
+
+*editButton.label:			Edit
+*editButton.fromHoriz: 			fileButton
+*editButton.menuName:			editMenu
+
+*formy.status*top:			ChainTop
+*formy.status*bottom:			ChainTop
+*formy.status*left:			ChainLeft
+*formy.status*right:			ChainRight
+*status.fromHoriz:			editButton
+*status.borderWidth:			0
+
+*SmeBSB.HorizontalMargins:		32
+
+*fileMenu.new.label:			New (Ctrl-N)...
+*fileMenu.load.label:			Load (Ctrl-F)...   
+*fileMenu.insert.label:			Insert (Ctrl-I)... 
+*fileMenu.save.label:			Save (Ctrl-S)
+*fileMenu.saveAs.label:			Save As (Ctrl-W)...
+*fileMenu.resize.label:			Resize (Ctrl-R)... 
+*fileMenu.rescale.label:		Rescale (Ctrl-X)...
+*fileMenu.filename.label:		Filename (Ctrl-E)...
+*fileMenu.basename.label:		Basename (Ctrl-B)...
+*fileMenu.quit.label:			Quit (Ctrl-C, Q)
+
+*editMenu.image.label:			Image (Meta-I)
+*editMenu.grid.label:			Grid (Meta-G)
+*editMenu.dashed.label:			Dashed (Meta-D)
+*editMenu.axes.label:			Axes (Meta-A)
+*editMenu.stippled.label:		Stippled (Meta-S)
+*editMenu.proportional.label:		Proportional (Meta-P)
+*editMenu.zoom.label:			Zoom (Meta-Z)
+*editMenu.cut.label:			Cut (Meta-C)
+*editMenu.copy.label:			Copy (Meta-W)
+*editMenu.paste.label:			Paste (Meta-Y, Ctrl-mb)
+
+*form.clear.label:			Clear
+*form.set.fromVert: 			clear
+*form.set.label:			Set
+*form.invert.fromVert: 			set
+*form.invert.label:			Invert
+
+*form.mark.vertDistance:		10
+*form.mark.fromVert:			invert
+*form.mark.label:			Mark
+*form.unmark.fromVert:              	mark
+*form.unmark.label:			Unmark
+
+*form.copy.vertDistance:		10
+*form.copy.fromVert: 			unmark
+*form.copy.radioGroup:			mark
+*form.copy.label:			Copy
+*form.move.fromVert: 			copy
+*form.move.radioGroup:			copy
+*form.move.label:			Move
+
+*form.flipHoriz.vertDistance:		10
+*form.flipHoriz.width:			36
+*form.flipHoriz.height:			36
+*form.flipHoriz.fromVert: 		move
+*form.flipHoriz.bitmap:			FlipHoriz
+*form.up.vertDistance:			10
+*form.up.width:				36
+*form.up.height:			36
+*form.up.fromVert: 			move
+*form.up.fromHoriz:			flipHoriz
+*form.up.bitmap:			Up
+*form.flipVert.vertDistance:		10
+*form.flipVert.width:			36
+*form.flipVert.height:			36
+*form.flipVert.fromVert: 		move
+*form.flipVert.fromHoriz:		up
+*form.flipVert.bitmap:			FlipVert
+*form.left.width:			36
+*form.left.height:			36
+*form.left.fromVert: 			flipHoriz
+*form.left.bitmap:			Left
+*form.fold.width:			36
+*form.fold.height:			36
+*form.fold.fromVert: 			up
+*form.fold.fromHoriz: 			left
+*form.fold.bitmap:			Fold
+*form.right.width:			36
+*form.right.height:			36
+*form.right.fromVert: 			flipVert
+*form.right.fromHoriz: 			fold
+*form.right.bitmap:			Right
+*form.rotateLeft.width:			36
+*form.rotateLeft.height:		36
+*form.rotateLeft.fromVert:		left
+*form.rotateLeft.bitmap:		RotateLeft
+*form.down.width:			36
+*form.down.height:			36
+*form.down.fromVert: 			fold
+*form.down.fromHoriz: 			rotateLeft
+*form.down.bitmap:			Down
+*form.rotateRight.width:		36
+*form.rotateRight.height:		36
+*form.rotateRight.fromVert:		right
+*form.rotateRight.fromHoriz:		down
+*form.rotateRight.bitmap:		RotateRight
+
+*form.point.vertDistance:		10
+*form.point.fromVert: 			rotateLeft
+*form.point.radioGroup:  		move
+*form.point.label:			Point
+*form.curve.fromVert: 			point
+*form.curve.radioGroup:  		point
+*form.curve.label:			Curve
+*form.line.fromVert: 			curve
+*form.line.radioGroup: 			curve
+*form.line.label:			Line
+*form.rectangle.fromVert: 		line
+*form.rectangle.radioGroup:  		line
+*form.rectangle.label:			Rectangle
+*form.filledRectangle.fromVert: 	rectangle
+*form.filledRectangle.radioGroup:  	rectangle
+*form.filledRectangle.label:		Filled Rectangle
+*form.circle.fromVert: 			filledRectangle
+*form.circle.radioGroup:  		filledRectangle
+*form.circle.label:			Circle
+*form.filledCircle.fromVert: 		circle
+*form.filledCircle.radioGroup:  	circle
+*form.filledCircle.label:		Filled Circle
+*form.floodFill.fromVert:		filledCircle
+*form.floodFill.radioGroup:  		filledCircle
+*form.floodFill.label:			Flood Fill
+
+*form.setHotSpot.vertDistance:		10
+*form.setHotSpot.fromVert: 		floodFill
+*form.setHotSpot.radioGroup:  		floodFill
+*form.setHotSpot.label:			Set Hot Spot
+*form.clearHotSpot.fromVert: 		setHotSpot
+*form.clearHotSpot.label:		Clear Hot Spot
+
+*form.undo.vertDistance:		10
+*form.undo.fromVert:			clearHotSpot
+*form.undo.label:			Undo
+
+
Index: xc/programs/bitmap/Imakefile
diff -u xc/programs/bitmap/Imakefile:3.5 xc/programs/bitmap/Imakefile:3.5.6.1
--- xc/programs/bitmap/Imakefile:3.5	Wed Jan 17 23:44:51 2001
+++ xc/programs/bitmap/Imakefile	Sat Jun  1 00:04:37 2002
@@ -3,8 +3,9 @@
 
 
 
-XCOMM $XFree86: xc/programs/bitmap/Imakefile,v 3.5 2001/01/17 23:44:51 dawes Exp $
+XCOMM $XFree86: xc/programs/bitmap/Imakefile,v 3.5.6.1 2002/06/01 00:04:37 torrey Exp $
 
+#if CaseSensitiveFileSystem
 BUTTONPICTURES = \
 	Dashes \
 	Down \
@@ -19,7 +20,25 @@
 	Stipple \
 	Term \
 	Up
+#else
+LinkFile(Stippler,Stipple)
 
+BUTTONPICTURES = \
+	Dashes \
+	Down \
+	Excl \
+	FlipHoriz \
+	FlipVert \
+	Fold \
+	Left \
+	Right \
+	RotateLeft \
+	RotateRight \
+	Stippler \
+	Term \
+	Up
+#endif
+
 #if HasMkstemp
   MKTMP_DEFINES = -DHAS_MKSTEMP
 #endif
@@ -42,7 +61,11 @@
 
 BuildIncludes($(BUTTONPICTURES),X11/bitmaps,../..)
 
+#if CaseSensitiveFileSystem
 InstallAppDefaults(Bitmap)
+#else
+InstallAppDefaultsLong(Bitmap-nocase,Bitmap)
+#endif
 InstallAppDefaultsLong(Bitmap-co,Bitmap-color)
 InstallMultipleDestFlags(install,$(BUTTONPICTURES),$(INCDIR)/X11/bitmaps,$(INSTINCFLAGS))
 
Index: xc/programs/scripts/xon.sh
diff -u xc/programs/scripts/xon.sh:1.5 xc/programs/scripts/xon.sh:1.5.2.1
--- xc/programs/scripts/xon.sh:1.5	Mon Jan  7 22:00:32 2002
+++ xc/programs/scripts/xon.sh	Mon Jan 28 18:27:33 2002
@@ -1,5 +1,6 @@
 #!/bin/sh
 # $Xorg: xon.sh,v 1.4 2000/12/20 16:50:07 pookie Exp $
+# $XFree86: xc/programs/scripts/xon.sh,v 1.5.2.1 2002/01/28 18:27:33 tsi Exp $
 # start up xterm (or any other X command) on the specified host
 # Usage: xon host [arguments] [command]
 
@@ -47,7 +48,11 @@
 :*)
 	case `uname` in
 	Linux*)
-		fullname=`hostname -f`
+		if [ -z "`hostname --version | grep GNU`" ]; then
+			fullname=`hostname -f`
+		else
+			fullname=`hostname`
+		fi
 		;;
 	*)
 	fullname=`uname -n`
Index: xc/programs/xedit/Xedit-color.ad
diff -u xc/programs/xedit/Xedit-color.ad:1.6 xc/programs/xedit/Xedit-color.ad:1.6.8.1
--- xc/programs/xedit/Xedit-color.ad:1.6	Sat Aug 28 09:01:20 1999
+++ xc/programs/xedit/Xedit-color.ad	Thu Jul  4 17:07:11 2002
@@ -1,4 +1,4 @@
-! $XFree86: xc/programs/xedit/Xedit-color.ad,v 1.6 1999/08/28 09:01:20 dawes Exp $
+! $XFree86: xc/programs/xedit/Xedit-color.ad,v 1.6.8.1 2002/07/04 17:07:11 paulo Exp $
 
 #include "Xedit"
 
@@ -168,4 +168,4 @@
 integer?foreground=OrangeRed3&font=*courier-bold-r*12*,\
 float?foreground=OrangeRed3&font=*courier-bold-r*12*&overstrike&underline,\
 punctuation?foreground=gray12&font=*courier-bold-r*12*,\
-error?foreground=yellow&background=red&font=*new century schoolbook-bold*25*
+error?foreground=yellow&background=red&font=*new century schoolbook-bold*24*
Index: xc/programs/xinit/startx.cpp
diff -u xc/programs/xinit/startx.cpp:3.12 xc/programs/xinit/startx.cpp:3.12.2.2
--- xc/programs/xinit/startx.cpp:3.12	Fri Nov 30 20:57:48 2001
+++ xc/programs/xinit/startx.cpp	Mon Jan 28 18:27:34 2002
@@ -11,7 +11,7 @@
 XCOMM
 XCOMM Site administrators are STRONGLY urged to write nicer versions.
 XCOMM
-XCOMM $XFree86: xc/programs/xinit/startx.cpp,v 3.12 2001/11/30 20:57:48 dawes Exp $
+XCOMM $XFree86: xc/programs/xinit/startx.cpp,v 3.12.2.2 2002/01/28 18:27:34 tsi Exp $
 
 #ifdef SCO
 
@@ -139,24 +139,30 @@
 fi
 
 if [ x"$XAUTHORITY" = x ]; then
-    export XAUTHORITY=$HOME/.Xauthority
+    XAUTHORITY=$HOME/.Xauthority
+    export XAUTHORITY
 fi
 
 removelist=
 
 #if defined(HAS_COOKIE_MAKER) && defined(MK_COOKIE)
 XCOMM set up default Xauth info for this machine
-#ifndef HOSTNAME
-#ifdef __linux__
-#define HOSTNAME hostname -f
-#else
-#define HOSTNAME hostname
-#endif
-#endif
+case `uname` in
+Linux*)
+	if [ -z "`hostname --version | grep GNU`" ]; then
+		hostname=`hostname -f`
+	else
+		hostname=`hostname`
+	fi
+	;;
+*)
+	hostname=`hostname`
+	;;
+esac
 
 authdisplay=${display:-:0}
 mcookie=`MK_COOKIE`
-for displayname in $authdisplay `HOSTNAME`$authdisplay; do
+for displayname in $authdisplay $hostname$authdisplay; do
     if ! xauth list "$displayname" | grep "$displayname " >/dev/null 2>&1; then
 	xauth add $displayname . $mcookie
 	removelist="$displayname $removelist"
Index: xc/programs/xkbcomp/symbols/us_intl
diff -u xc/programs/xkbcomp/symbols/us_intl:1.4 xc/programs/xkbcomp/symbols/us_intl:1.4.4.1
--- xc/programs/xkbcomp/symbols/us_intl:1.4	Fri Nov  2 23:29:34 2001
+++ xc/programs/xkbcomp/symbols/us_intl	Mon Aug 26 21:43:24 2002
@@ -1,5 +1,5 @@
 //
-// $XFree86: xc/programs/xkbcomp/symbols/us_intl,v 1.4 2001/11/02 23:29:34 dawes Exp $
+// $XFree86: xc/programs/xkbcomp/symbols/us_intl,v 1.4.4.1 2002/08/26 21:43:24 paulo Exp $
 //
 // Dead-keys definition for a very simple US/ASCII layout.
 // by Conectiva (http://www.conectiva.com.br)
@@ -41,21 +41,21 @@
     key <AC11> {	[ dead_acute,	dead_diaeresis	],
 			[ apostrophe,	quotedbl	]	};
 			
-    key <AE09> {	[	  9,	parenleft	]
+    key <AE09> {	[	  9,	parenleft	],
 			[      dead_breve,	dead_breve	]	};
-    key <AE10> {	[	  0,	parenright	]
+    key <AE10> {	[	  0,	parenright	],
 			[      dead_abovering, dead_abovering	]	};
     key <AE11> {	[     minus,	underscore	],
 			[      dead_macron,	dead_belowdot	]	};
     key <AE12> {	[     equal,	plus		],
 			[      dead_doubleacute,	dead_horn	]	};
-    key <AC10> {	[ semicolon,	colon		]
+    key <AC10> {	[ semicolon,	colon		],
 			[      dead_ogonek,	dead_diaeresis	]	};
-    key <AB08> {	[     comma,	less		]
+    key <AB08> {	[     comma,	less		],
 			[      dead_cedilla,	dead_caron	]	};
-    key <AB09> {	[    period,	greater		]
+    key <AB09> {	[    period,	greater		],
 			[      dead_abovedot,	dead_circumflex	]	};
-    key <AB10> {	[     slash,	question	]
+    key <AB10> {	[     slash,	question	],
 			[      dead_hook,	dead_hook	]	};
 
 
