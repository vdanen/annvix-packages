# ncurses 5.6 - patch 20070825 - Thomas E. Dickey
#
# ------------------------------------------------------------------------------
#
# Ncurses 5.6 is at
# 	ftp.gnu.org:/pub/gnu
#
# Patches for ncurses 5.6 are in the subdirectory
# 	ftp://invisible-island.net/ncurses/5.6
#
# ------------------------------------------------------------------------------
# patch by Thomas E. Dickey <dickey@invisible-island.net>
# created  Sat Aug 25 20:38:10 UTC 2007
# ------------------------------------------------------------------------------
# NEWS               |    8 +++++++-
# configure          |    4 ++--
# configure.in       |    6 +++---
# dist.mk            |    4 ++--
# progs/dump_entry.c |    6 +++---
# 5 files changed, 17 insertions(+), 11 deletions(-)
# ------------------------------------------------------------------------------
Index: NEWS
Prereq:  1.1155 
--- ncurses-5.6-20070818+/NEWS	2007-08-18 22:31:19.000000000 +0000
+++ ncurses-5.6-20070825/NEWS	2007-08-25 20:12:52.000000000 +0000
@@ -25,7 +25,7 @@
 -- sale, use or other dealings in this Software without prior written        --
 -- authorization.                                                            --
 -------------------------------------------------------------------------------
--- $Id: NEWS,v 1.1155 2007/08/18 22:31:19 tom Exp $
+-- $Id: NEWS,v 1.1157 2007/08/25 20:12:52 tom Exp $
 -------------------------------------------------------------------------------
 
 This is a log of changes that ncurses has gone through since Zeyd started
@@ -45,6 +45,12 @@
 Changes through 1.9.9e did not credit all contributions;
 it is not possible to add this information.
 
+20070825
+	+ fix a sign-extension bug in infocmp's repair_acsc() function
+	  (cf: 971004).
+	+ fix old configure script bug which prevented "--disable-warnings"
+	  option from working (patch by Mike Frysinger).
+
 20070818
 	+ add 9term terminal description (request by Juhapekka Tolvanen) -TD
 	+ modify comp_hash.c's string output to avoid misinterpreting a null
Index: configure
--- ncurses-5.6-20070818+/configure	2007-08-11 18:17:00.000000000 +0000
+++ ncurses-5.6-20070825/configure	2007-08-25 19:30:46.000000000 +0000
@@ -1,5 +1,5 @@
 #! /bin/sh
-# From configure.in Revision: 1.422 .
+# From configure.in Revision: 1.423 .
 # Guess values for system-dependent variables and create Makefiles.
 # Generated by Autoconf 2.52.20061216.
 #
@@ -9306,7 +9306,7 @@
 echo "$as_me:9306: result: $with_warnings" >&5
 echo "${ECHO_T}$with_warnings" >&6
 
-if test -n "$with_warnings"; then
+if test "x$with_warnings" = "xyes"; then
  	ADAFLAGS="$ADAFLAGS -gnatg"
 
 INTEL_COMPILER=no
Index: configure.in
Prereq:  1.422 
--- ncurses-5.6-20070818+/configure.in	2007-07-28 18:23:55.000000000 +0000
+++ ncurses-5.6-20070825/configure.in	2007-08-25 19:15:51.000000000 +0000
@@ -28,14 +28,14 @@
 dnl
 dnl Author: Thomas E. Dickey 1995-on
 dnl
-dnl $Id: configure.in,v 1.422 2007/07/28 18:23:55 tom Exp $
+dnl $Id: configure.in,v 1.423 2007/08/25 19:15:51 Mike.Frysinger Exp $
 dnl Process this file with autoconf to produce a configure script.
 dnl
 dnl See http://invisible-island.net/autoconf/ for additional information.
 dnl
 dnl ---------------------------------------------------------------------------
 AC_PREREQ(2.13.20020210)
-AC_REVISION($Revision: 1.422 $)
+AC_REVISION($Revision: 1.423 $)
 AC_INIT(ncurses/base/lib_initscr.c)
 AC_CONFIG_HEADER(include/ncurses_cfg.h:include/ncurses_cfg.hin)
 
@@ -1035,7 +1035,7 @@
 	[with_warnings=$enableval])
 AC_MSG_RESULT($with_warnings)
 
-if test -n "$with_warnings"; then
+if test "x$with_warnings" = "xyes"; then
  	ADAFLAGS="$ADAFLAGS -gnatg"
 	CF_GCC_WARNINGS(Wdeclaration-after-statement Wextra Wno-unknown-pragmas Wswitch-enum)
 	if test "$cf_with_cxx" = yes ; then
Index: dist.mk
Prereq:  1.607 
--- ncurses-5.6-20070818+/dist.mk	2007-08-18 09:36:09.000000000 +0000
+++ ncurses-5.6-20070825/dist.mk	2007-08-25 13:46:49.000000000 +0000
@@ -25,7 +25,7 @@
 # use or other dealings in this Software without prior written               #
 # authorization.                                                             #
 ##############################################################################
-# $Id: dist.mk,v 1.607 2007/08/18 09:36:09 tom Exp $
+# $Id: dist.mk,v 1.608 2007/08/25 13:46:49 tom Exp $
 # Makefile for creating ncurses distributions.
 #
 # This only needs to be used directly as a makefile by developers, but
@@ -37,7 +37,7 @@
 # These define the major/minor/patch versions of ncurses.
 NCURSES_MAJOR = 5
 NCURSES_MINOR = 6
-NCURSES_PATCH = 20070818
+NCURSES_PATCH = 20070825
 
 # We don't append the patch to the version, since this only applies to releases
 VERSION = $(NCURSES_MAJOR).$(NCURSES_MINOR)
Index: progs/dump_entry.c
Prereq:  1.80 
--- ncurses-5.6-20070818+/progs/dump_entry.c	2007-04-07 17:13:36.000000000 +0000
+++ ncurses-5.6-20070825/progs/dump_entry.c	2007-08-25 20:05:35.000000000 +0000
@@ -39,7 +39,7 @@
 #include "termsort.c"		/* this C file is generated */
 #include <parametrized.h>	/* so is this */
 
-MODULE_ID("$Id: dump_entry.c,v 1.80 2007/04/07 17:13:36 tom Exp $")
+MODULE_ID("$Id: dump_entry.c,v 1.81 2007/08/25 20:05:35 tom Exp $")
 
 #define INDENT			8
 #define DISCARD(string) string = ABSENT_STRING
@@ -1226,7 +1226,7 @@
 	bool fix_needed = FALSE;
 
 	for (n = 0, source = 0; acs_chars[n] != 0; n++) {
-	    target = acs_chars[n];
+	    target = UChar(acs_chars[n]);
 	    if (source >= target) {
 		fix_needed = TRUE;
 		break;
@@ -1238,7 +1238,7 @@
 	if (fix_needed) {
 	    memset(mapped, 0, sizeof(mapped));
 	    for (n = 0; acs_chars[n] != 0; n++) {
-		source = acs_chars[n];
+		source = UChar(acs_chars[n]);
 		if ((target = (unsigned char) acs_chars[n + 1]) != 0) {
 		    mapped[source] = target;
 		    n++;
