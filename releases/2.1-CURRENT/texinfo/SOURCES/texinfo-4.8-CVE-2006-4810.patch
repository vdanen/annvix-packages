--- util/texindex.c.orig	2006-10-13 01:26:23.000000000 +0200
+++ util/texindex.c	2006-10-13 01:28:11.000000000 +0200
@@ -858,7 +857,7 @@
         {
           buffer = (char *) xrealloc (buffer, linebuffer->size *= 2);
           p += buffer - linebuffer->buffer;
-          end += buffer - linebuffer->buffer;
+          end = buffer + linebuffer->size;
           linebuffer->buffer = buffer;
         }
       if (c < 0 || c == '\n')
