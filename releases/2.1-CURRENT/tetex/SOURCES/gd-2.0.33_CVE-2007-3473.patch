diff --git gd-2.0.33/gd.c b/BUILD/gd-2.0.33/gd.c
index 9e9f369..8c309b6 100644
--- gd-2.0.33/gd.c
+++ gd-2.0.33/gd.c
@@ -2483,6 +2483,10 @@ BGD_DECLARE(gdImagePtr) gdImageCreateFromXbm (FILE * fd)
     }
   bytes = (w * h / 8) + 1;
   im = gdImageCreate (w, h);
+  if (!im) {
+    return 0;
+  }
+
   gdImageColorAllocate (im, 255, 255, 255);
   gdImageColorAllocate (im, 0, 0, 0);
   x = 0;
