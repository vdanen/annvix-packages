--- linux-2.4.21/sound/core/ioctl32/timer32.c.alsa-ioctl32-build-fixes	2003-06-06 13:54:27.000000000 +0200
+++ linux-2.4.21/sound/core/ioctl32/timer32.c	2003-08-10 15:02:33.000000000 +0200
@@ -21,7 +21,6 @@
 #include <sound/driver.h>
 #include <linux/time.h>
 #include <linux/fs.h>
-#include <linux/compat.h>
 #include <sound/core.h>
 #include <sound/timer.h>
 #include <asm/uaccess.h>
--- linux-2.4.21/sound/core/ioctl32/ioctl32.h.alsa-ioctl32-build-fixes	2003-02-06 18:59:15.000000000 +0100
+++ linux-2.4.21/sound/core/ioctl32/ioctl32.h	2003-08-10 15:11:09.000000000 +0200
@@ -26,6 +26,16 @@
 #ifndef __ALSA_IOCTL32_H
 #define __ALSA_IOCTL32_H
 
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2,5,50)
+#include <linux/types.h>
+struct compat_timespec {
+  s32 tv_sec;
+  s32 tv_nsec;
+};
+#else
+#include <linux/compat.h>
+#endif
+
 #ifndef A
 #ifdef CONFIG_PPC64
 #include <asm/ppc32.h>
--- linux-2.4.21/sound/core/ioctl32/pcm32.c.alsa-ioctl32-build-fixes	2003-06-06 13:54:27.000000000 +0200
+++ linux-2.4.21/sound/core/ioctl32/pcm32.c	2003-08-10 15:02:33.000000000 +0200
@@ -21,7 +21,6 @@
 #include <sound/driver.h>
 #include <linux/time.h>
 #include <linux/slab.h>
-#include <linux/compat.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include "ioctl32.h"
--- linux-2.4.21/sound/core/ioctl32/rawmidi32.c.alsa-ioctl32-build-fixes	2003-06-06 13:54:27.000000000 +0200
+++ linux-2.4.21/sound/core/ioctl32/rawmidi32.c	2003-08-10 15:02:33.000000000 +0200
@@ -21,7 +21,6 @@
 #include <sound/driver.h>
 #include <linux/time.h>
 #include <linux/fs.h>
-#include <linux/compat.h>
 #include <sound/core.h>
 #include <sound/rawmidi.h>
 #include <asm/uaccess.h>
