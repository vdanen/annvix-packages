--- linux-2.4.22/net/core/dev.c.orig	2003-09-11 11:27:28.000000000 -0400
+++ linux-2.4.22/net/core/dev.c	2003-09-11 11:28:10.000000000 -0400
@@ -2708,6 +2708,8 @@
 					"become free. Usage count = %d\n",
 					dev->name, atomic_read(&dev->refcnt));
 			warning_time = jiffies;
+			atomic_set(&dev->refcnt,0);
+			return 0;
 		}
 	}
 	dev_put(dev);
