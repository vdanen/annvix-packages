--- zlib-1.2.2.2/inftrees.c.can-2005-2096	2005-07-04 10:11:17.654675898 -0600
+++ zlib-1.2.2.2/inftrees.c	2005-07-04 10:12:16.718086123 -0600
@@ -134,7 +134,7 @@
         left -= count[len];
         if (left < 0) return -1;        /* over-subscribed */
     }
-    if (left > 0 && (type == CODES || (codes - count[0] != 1)))
+    if (left > 0 && (type == CODES || max != 1))
         return -1;                      /* incomplete set */
 
     /* generate offsets into symbol table for each length for sorting */
