#!/bin/sh
PATH="/sbin:/usr/sbin:/bin:/usr/bin"

# this runs sshd under supervise

# source sysconfig settings
[ -f /etc/sysconfig/sshd ] && . /etc/sysconfig/sshd

# this runs sshd and limits the server to a maximum of 30 simultaneous
# connections (-c) using the ipsvd-instruct(5) directory ./peers for instructions
# and listening to all IPs on port 22 (ssh)

exec /sbin/tcpsvd -c30 -v -llocalhost -i./peers 0 22 /usr/sbin/sshd -i $OPTIONS 2>&1
