Index: squid/src/client_side.c
diff -c squid/src/client_side.c:1.561.2.63 squid/src/client_side.c:1.561.2.64
*** squid/src/client_side.c:1.561.2.63	Tue Nov 16 14:21:55 2004
--- squid/src/client_side.c	Tue Dec  7 16:57:25 2004
***************
*** 661,666 ****
--- 661,675 ----
  	if (!entry)
  	    entry = storeGetPublicByRequestMethod(http->request, METHOD_HEAD);
  	if (entry) {
+ 	    if (EBIT_TEST(entry->flags, ENTRY_SPECIAL)) {
+ 		http->log_type = LOG_TCP_DENIED;
+ 		err = errorCon(ERR_ACCESS_DENIED, HTTP_FORBIDDEN);
+ 		err->request = requestLink(http->request);
+ 		err->src_addr = http->conn->peer.sin_addr;
+ 		http->entry = clientCreateStoreEntry(http, http->request->method, null_request_flags);
+ 		errorAppendEntry(http->entry, err);
+ 		return;
+ 	    }
  	    /* Swap in the metadata */
  	    http->entry = entry;
  	    storeLockObject(http->entry);
