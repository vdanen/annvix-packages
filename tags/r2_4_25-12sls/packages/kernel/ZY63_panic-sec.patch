--- linux-2.4.22/kernel/panic.c.panic	2004-04-20 17:12:25.000000000 -0600
+++ linux-2.4.22/kernel/panic.c	2004-04-20 17:13:27.000000000 -0600
@@ -58,7 +58,7 @@
 	
 	bust_spinlocks(1);
 	va_start(args, fmt);
-	vsprintf(buf, fmt, args);
+	vsnprintf(buf, sizeof(buf), fmt, args);
 	va_end(args);
 	printk(KERN_EMERG "Kernel panic: %s\n",buf);
 	if (in_interrupt())
